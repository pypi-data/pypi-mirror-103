(self.webpackChunk=self.webpackChunk||[]).push([["ReleasesDetail"],{"./app/actionCreators/release.tsx":(e,t,r)=>{"use strict";r.d(t,{o7:()=>u,dF:()=>p,VE:()=>d,aQ:()=>g});var s=r("../node_modules/@sentry/minimal/esm/index.js"),o=r("../node_modules/@sentry/types/esm/severity.js"),n=r("./app/actionCreators/indicator.tsx"),a=r("./app/actions/releaseActions.tsx"),l=r("./app/locale.tsx"),i=r("./app/stores/releaseStore.tsx"),c=r("./app/types/index.tsx");function u(e,t){var r=t.orgSlug,n=t.projectSlug,l=t.releaseVersion,c="/projects/".concat(r,"/").concat(n,"/releases/").concat(encodeURIComponent(l),"/");return i.Z.state.releaseLoading[(0,i.p)(n,l)]=!0,a.Z.loadRelease(r,n,l),e.requestPromise(c,{method:"GET"}).then((function(e){a.Z.loadReleaseSuccess(n,l,e)})).catch((function(e){404!==e.status?(a.Z.loadReleaseError(n,l,e),s.$e((function(t){t.setLevel(o.z.Warning),t.setFingerprint(["getRelease-action-creator"]),s.Tb(e)}))):a.Z.loadReleaseSuccess(n,l,null)}))}function p(e,t){var r=t.orgSlug,n=t.projectSlug,l=t.releaseVersion,c="/organizations/".concat(r,"/releases/").concat(encodeURIComponent(l),"/deploys/");return i.Z.state.deploysLoading[(0,i.p)(n,l)]=!0,a.Z.loadDeploys(r,n,l),e.requestPromise(c,{method:"GET"}).then((function(e){a.Z.loadDeploysSuccess(n,l,e)})).catch((function(e){404!==e.status?(a.Z.loadDeploysError(n,l,e),s.$e((function(t){t.setLevel(o.z.Warning),t.setFingerprint(["getReleaseDeploys-action-creator"]),s.Tb(e)}))):a.Z.loadDeploysSuccess(n,l,null)}))}function d(e,t){var r=t.orgSlug,s=t.projectSlug,o=t.releaseVersion;return a.Z.loadRelease(r,s,o),(0,n.E3)((0,l.t)("Archiving Release…")),e.requestPromise("/organizations/".concat(r,"/releases/"),{method:"POST",data:{status:c.dE.Archived,projects:[],version:o}}).then((function(e){a.Z.loadReleaseSuccess(s,o,e),(0,n.S9)((0,l.t)("Release was successfully archived."))})).catch((function(e){var t,r;throw a.Z.loadReleaseError(s,o,e),(0,n.Iw)(null!==(t=null===(r=e.responseJSON)||void 0===r?void 0:r.detail)&&void 0!==t?t:(0,l.t)("Release could not be be archived.")),e}))}function g(e,t){var r=t.orgSlug,s=t.projectSlug,o=t.releaseVersion;return a.Z.loadRelease(r,s,o),(0,n.E3)((0,l.t)("Restoring Release…")),e.requestPromise("/organizations/".concat(r,"/releases/"),{method:"POST",data:{status:c.dE.Active,projects:[],version:o}}).then((function(e){a.Z.loadReleaseSuccess(s,o,e),(0,n.S9)((0,l.t)("Release was successfully restored."))})).catch((function(e){var t,r;throw a.Z.loadReleaseError(s,o,e),(0,n.Iw)(null!==(t=null===(r=e.responseJSON)||void 0===r?void 0:r.detail)&&void 0!==t?t:(0,l.t)("Release could not be be restored.")),e}))}},"./app/actions/releaseActions.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r("../node_modules/reflux/src/index.js");const o=r.n(s)().createActions(["loadRelease","loadReleaseError","loadReleaseSuccess","loadDeploys","loadDeploysError","loadDeploysSuccess"])},"./app/components/breadcrumbs.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var s=r("../node_modules/@babel/runtime/helpers/esm/extends.js"),o=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),n=r("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),a=r("../node_modules/react/index.js"),l=r("./app/components/globalSelectionLink.tsx"),i=r("./app/components/links/link.tsx"),c=r("./app/icons/index.tsx"),u=r("./app/styles/overflowEllipsis.tsx"),p=r("./app/styles/space.tsx"),d=r("../node_modules/@emotion/core/dist/core.browser.esm.js"),g=function(e){var t=e.crumbs,r=e.linkLastItem,s=void 0!==r&&r,n=(0,o.Z)(e,["crumbs","linkLastItem"]);return 0===t.length?null:(s||(t[t.length-1].to=null),(0,d.tZ)(m,n,t.map((function(e,r){var s=e.label,o=e.to,n=e.preserveGlobalSelection,l=e.key,i="string"==typeof s?s:"",c=(null!=l?l:"string"==typeof o)?"".concat(i).concat(o):"".concat(i).concat(r);return(0,d.tZ)(a.Fragment,{key:c},o?(0,d.tZ)(Z,{to:o,preserveGlobalSelection:n},s):(0,d.tZ)(f,null,s),r<t.length-1&&(0,d.tZ)(y,{size:"xs",direction:"right"}))}))))};g.displayName="Breadcrumbs";var h=function(e){return"\n  color: ".concat(e.theme.gray300,";\n  ").concat(u.Z,";\n  width: auto;\n\n  &:last-child {\n    color: ").concat(e.theme.textColor,";\n  }\n")},m=(0,n.Z)("div",{target:"e11qg6050",label:"BreadcrumbList"})("display:flex;align-items:center;padding:",(0,p.Z)(1)," 0;"),Z=(0,n.Z)((function(e){var t=e.preserveGlobalSelection,r=e.to,n=(0,o.Z)(e,["preserveGlobalSelection","to"]);return t?(0,d.tZ)(l.Z,(0,s.Z)({to:r},n)):(0,d.tZ)(i.Z,(0,s.Z)({to:r},n))}),{target:"e11qg6051",label:"BreadcrumbLink"})(h," &:hover,&:active{color:",(function(e){return e.theme.subText}),";}"),f=(0,n.Z)("span",{target:"e11qg6052",label:"BreadcrumbItem"})(h),y=(0,n.Z)(c.g6,{target:"e11qg6053",label:"BreadcrumbDividerIcon"})("color:",(function(e){return e.theme.gray300}),";margin:0 ",(0,p.Z)(1),";flex-shrink:0;");const v=g},"./app/components/pickProjectToContinue.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s=r("../node_modules/@babel/runtime/helpers/esm/extends.js"),o=r("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),n=(r("../node_modules/react/index.js"),r("./app/actionCreators/modal.tsx")),a=r("./app/components/contextPickerModal.tsx"),l=r("../node_modules/@emotion/core/dist/core.browser.esm.js");function i(e){var t=e.noProjectRedirectPath,r=e.nextPath,o=e.router,i=e.projects,u=!1,p=r.includes("?")?"".concat(r,"&project="):"".concat(r,"?project=");return 1===i.length?(o.replace(p+i[0].id),null):((0,n.openModal)((function(e){return(0,l.tZ)(a.Z,(0,s.Z)({},e,{needOrg:!1,needProject:!0,nextPath:"".concat(p,":project"),onFinish:function(e){u=!0,o.replace(e)},projectSlugs:i.map((function(e){return e.slug}))}))}),{onClose:function(){u||o.push(t)}}),(0,l.tZ)(c,null))}i.displayName="PickProjectToContinue";var c=(0,o.Z)("div",{target:"e1sj8doz0",label:"ContextPickerBackground"})({name:"1iy821x",styles:"height:100vh;width:100%;"});const u=i},"./app/stores/releaseStore.tsx":(e,t,r)=>{"use strict";r.d(t,{p:()=>p,Z:()=>g});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),n=r("../node_modules/reflux/src/index.js"),a=r.n(n),l=r("./app/actions/organizationActions.tsx"),i=r("./app/actions/releaseActions.tsx");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e,t){return"".concat(e).concat(t)},d={state:{orgSlug:void 0,release:new Map,releaseLoading:new Map,releaseError:new Map,deploys:new Map,deploysLoading:new Map,deploysError:new Map},listenables:i.Z,init:function(){this.listenTo(l.Z.update,this.updateOrganization),this.reset()},reset:function(){this.state={orgSlug:void 0,release:new Map,releaseLoading:new Map,releaseError:new Map,deploys:new Map,deploysLoading:new Map,deploysError:new Map},this.trigger(this.state)},updateOrganization:function(e){this.reset(),this.state.orgSlug=e.slug,this.trigger(this.state)},loadRelease:function(e,t,r){this.orgSlug&&this.orgSlug===e||(this.reset(),this.orgSlug=e);var n=p(t,r),a=this.state,l=a.releaseLoading,i=a.releaseError,c=(0,o.Z)(a,["releaseLoading","releaseError"]);this.state=u(u({},c),{},{releaseLoading:u(u({},l),{},(0,s.Z)({},n,!0)),releaseError:u(u({},i),{},(0,s.Z)({},n,void 0))}),this.trigger(this.state)},loadReleaseError:function(e,t,r){var n=p(e,t),a=this.state,l=a.releaseLoading,i=a.releaseError,c=(0,o.Z)(a,["releaseLoading","releaseError"]);this.state=u(u({},c),{},{releaseLoading:u(u({},l),{},(0,s.Z)({},n,!1)),releaseError:u(u({},i),{},(0,s.Z)({},n,r))}),this.trigger(this.state)},loadReleaseSuccess:function(e,t,r){var n=p(e,t),a=this.state,l=a.release,i=a.releaseLoading,c=a.releaseError,d=(0,o.Z)(a,["release","releaseLoading","releaseError"]);this.state=u(u({},d),{},{release:u(u({},l),{},(0,s.Z)({},n,r)),releaseLoading:u(u({},i),{},(0,s.Z)({},n,!1)),releaseError:u(u({},c),{},(0,s.Z)({},n,void 0))}),this.trigger(this.state)},loadDeploys:function(e,t,r){this.orgSlug&&this.orgSlug===e||(this.reset(),this.orgSlug=e);var n=p(t,r),a=this.state,l=a.deploysLoading,i=a.deploysError,c=(0,o.Z)(a,["deploysLoading","deploysError"]);this.state=u(u({},c),{},{deploysLoading:u(u({},l),{},(0,s.Z)({},n,!0)),deploysError:u(u({},i),{},(0,s.Z)({},n,void 0))}),this.trigger(this.state)},loadDeploysError:function(e,t,r){var n=p(e,t),a=this.state,l=a.deploysLoading,i=a.deploysError,c=(0,o.Z)(a,["deploysLoading","deploysError"]);this.state=u(u({},c),{},{deploysLoading:u(u({},l),{},(0,s.Z)({},n,!1)),deploysError:u(u({},i),{},(0,s.Z)({},n,r))}),this.trigger(this.state)},loadDeploysSuccess:function(e,t,r){var n=p(e,t),a=this.state,l=a.deploys,i=a.deploysLoading,c=a.deploysError,d=(0,o.Z)(a,["deploys","deploysLoading","deploysError"]);this.state=u(u({},d),{},{deploys:u(u({},l),{},(0,s.Z)({},n,r)),deploysLoading:u(u({},i),{},(0,s.Z)({},n,!1)),deploysError:u(u({},c),{},(0,s.Z)({},n,void 0))}),this.trigger(this.state)},get:function(e,t){var r=p(e,t);return{release:this.state.release[r],releaseLoading:this.state.releaseLoading[r],releaseError:this.state.releaseError[r],deploys:this.state.deploys[r],deploysLoading:this.state.deploysLoading[r],deploysError:this.state.deploysError[r]}}};const g=a().createStore(d)},"./app/views/releases/detail/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ReleaseContext:()=>Pe,ReleasesDetailContainer:()=>ke,default:()=>Le});var s=r("../node_modules/@babel/runtime/helpers/esm/extends.js"),o=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),l=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../node_modules/@babel/runtime/helpers/esm/get.js"),c=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),u=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),p=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),g=r("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),h=r("../node_modules/react/index.js"),m=r("../node_modules/lodash/pick.js"),Z=r.n(m),f=r("../node_modules/moment/moment.js"),y=r.n(f),v=r("./app/components/alert.tsx"),b=r("./app/components/asyncComponent.tsx"),j=r("./app/components/lightWeightNoProjectMessage.tsx"),x=r("./app/components/loadingIndicator.tsx"),S=r("./app/components/organizations/globalSelectionHeader/index.tsx"),w=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),P=r("./app/components/pickProjectToContinue.tsx"),R=r("./app/constants/index.tsx"),k=r("./app/constants/globalSelectionHeader.tsx"),E=r("./app/icons/index.tsx"),O=r("./app/locale.tsx"),L=r("./app/styles/organization.tsx"),D=r("./app/styles/space.tsx"),z=r("./app/utils/formatters.tsx"),C=r("./app/utils/routeTitle.tsx"),_=r("./app/utils/withGlobalSelection.tsx"),M=r("./app/utils/withOrganization.tsx"),q=r("./app/views/asyncView.tsx"),T=r("./app/views/releases/list/utils.tsx"),A=r("./app/views/releases/utils/releaseHealthRequest.tsx"),F=r("./app/components/badge.tsx"),H=r("./app/components/breadcrumbs.tsx"),B=r("./app/components/clipboard.tsx"),I=r("./app/components/idBadge/index.tsx"),N=r("./app/components/layouts/thirds.tsx"),U=r("./app/components/links/externalLink.tsx"),V=r("./app/components/links/listLink.tsx"),G=r("./app/components/navTabs.tsx"),W=r("./app/components/tooltip.tsx"),J=r("./app/components/version.tsx"),Y=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),Q=r("../node_modules/@babel/runtime/regenerator/index.js"),$=r.n(Q),K=r("../node_modules/react-router/es/index.js"),X=r("./app/actionCreators/release.tsx"),ee=r("./app/api.tsx"),te=r("./app/components/button.tsx"),re=r("./app/components/buttonBar.tsx"),se=r("./app/components/confirm.tsx"),oe=r("./app/components/dropdownLink.tsx"),ne=r("./app/components/idBadge/projectBadge.tsx"),ae=r("./app/components/menuItem.tsx"),le=r("./app/components/textOverflow.tsx"),ie=r("./app/views/releases/utils/index.tsx"),ce=r("../node_modules/@emotion/core/dist/core.browser.esm.js");function ue(e){var t=e.orgSlug,r=e.projectSlug,s=e.release,o=e.releaseMeta,n=e.refetchData;function a(){return(a=(0,Y.Z)($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,X.VE)(new ee.KU,{orgSlug:t,projectSlug:r,releaseVersion:s.version});case 3:K.browserHistory.push("/organizations/".concat(t,"/releases/")),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function l(){return(l=(0,Y.Z)($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,X.aQ)(new ee.KU,{orgSlug:t,projectSlug:r,releaseVersion:s.version});case 3:n(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function i(e){return(0,ce.tZ)("h4",null,(0,ce.tZ)(le.Z,null,e))}function c(e){return(0,ce.tZ)(h.Fragment,null,e,(0,ce.tZ)(ge,null,(t=o.projects.slice(0,5),r=o.projects.length-t.length,(0,ce.tZ)(h.Fragment,null,t.map((function(e){return(0,ce.tZ)(ne.Z,{key:e.slug,project:e,avatarSize:18})})),r>0&&(0,ce.tZ)("span",null,(0,ce.tZ)(W.Z,{title:s.projects.slice(5).map((function(e){return e.slug})).join(", ")},"+ ",(0,O.tn)("%s other project","%s other projects",r)))))),(0,O.t)("Are you sure you want to do this?"));var t,r}return(0,ce.tZ)(re.Z,{gap:1},(0,ce.tZ)(de,{caret:!1,anchorRight:window.innerWidth>992,title:(0,ce.tZ)(pe,{icon:(0,ce.tZ)(E.YR,null),label:(0,O.t)("Actions")})},(0,ie.rF)(s)?(0,ce.tZ)(se.Z,{onConfirm:function(){return l.apply(this,arguments)},header:i((0,O._N)("Restore Release [release]",{release:(0,z.ko)(s.version)})),message:c((0,O.tn)("You are restoring this release for the following project:","By restoring this release, you are also restoring it for the following projects:",o.projects.length)),cancelText:(0,O.t)("Nevermind"),confirmText:(0,O.t)("Restore")},(0,ce.tZ)(ae.Z,null,(0,O.t)("Restore"))):(0,ce.tZ)(se.Z,{onConfirm:function(){return a.apply(this,arguments)},header:i((0,O._N)("Archive Release [release]",{release:(0,z.ko)(s.version)})),message:c((0,O.tn)("You are archiving this release for the following project:","By archiving this release, you are also archiving it for the following projects:",o.projects.length)),cancelText:(0,O.t)("Nevermind"),confirmText:(0,O.t)("Archive")},(0,ce.tZ)(ae.Z,null,(0,O.t)("Archive")))))}ue.displayName="ReleaseActions";var pe=(0,g.Z)(te.ZP,{target:"e13w85ly0",label:"ActionsButton"})({name:"qr3b9c",styles:"width:40px;height:40px;padding:0;"}),de=(0,g.Z)(oe.Z,{target:"e13w85ly1",label:"StyledDropdownLink"})({name:"1aycio4",styles:"& + .dropdown-menu{top:50px !important;}"}),ge=(0,g.Z)("div",{target:"e13w85ly2",label:"ProjectsWrapper"})("margin:",(0,D.Z)(2)," 0 ",(0,D.Z)(2)," ",(0,D.Z)(2),";display:grid;gap:",(0,D.Z)(.5),";img{border:none !important;box-shadow:none !important;}");const he=ue;var me=function(e){var t=e.location,r=e.organization,s=e.release,o=e.project,n=e.releaseMeta,a=e.refetchData,l=s.version,i=s.url,c=n.commitCount,u=n.commitFilesChanged,p="/organizations/".concat(r.slug,"/releases/").concat(encodeURIComponent(l),"/"),d=[{title:(0,O.t)("Overview"),to:p},{title:(0,ce.tZ)(h.Fragment,null,(0,O.t)("Commits")," ",(0,ce.tZ)(be,{text:(0,z.Du)(c)})),to:"".concat(p,"commits/")},{title:(0,ce.tZ)(h.Fragment,null,(0,O.t)("Files Changed"),(0,ce.tZ)(be,{text:(0,z.Du)(u)})),to:"".concat(p,"files-changed/")}];return(0,ce.tZ)(N.h4,null,(0,ce.tZ)(N.oB,null,(0,ce.tZ)(H.Z,{crumbs:[{to:"/organizations/".concat(r.slug,"/releases/"),label:(0,O.t)("Releases"),preserveGlobalSelection:!0},{label:(0,z.ko)(l)}]}),(0,ce.tZ)(N.Dx,null,(0,ce.tZ)(Ze,null,(0,ce.tZ)(I.Z,{project:o,avatarSize:28,hideName:!0}),(0,ce.tZ)(fe,{version:l,anchor:!1,truncate:!0}),(0,ce.tZ)(ye,null,(0,ce.tZ)(B.Z,{value:l},(0,ce.tZ)(W.Z,{title:l,containerDisplayMode:"flex"},(0,ce.tZ)(E.vU,{size:"xs"})))),!!i&&(0,ce.tZ)(ye,null,(0,ce.tZ)(W.Z,{title:i},(0,ce.tZ)(U.Z,{href:i},(0,ce.tZ)(E.V$,{size:"xs"}))))))),(0,ce.tZ)(N.kP,null,(0,ce.tZ)(he,{orgSlug:r.slug,projectSlug:o.slug,release:s,releaseMeta:n,refetchData:a})),(0,ce.tZ)(h.Fragment,null,(0,ce.tZ)(ve,null,d.map((function(e){return(0,ce.tZ)(V.Z,{key:e.to,to:(r=e.to,{pathname:r,query:Z()(t.query,Object.values(k.nF))}),isActive:function(){return e.to===t.pathname}},e.title);var r})))))};me.displayName="ReleaseHeader";var Ze=(0,g.Z)("div",{target:"e4tsdqb0",label:"ReleaseName"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),fe=(0,g.Z)(J.Z,{target:"e4tsdqb1",label:"StyledVersion"})("margin-left:",(0,D.Z)(1),";"),ye=(0,g.Z)("span",{target:"e4tsdqb2",label:"IconWrapper"})("transition:color 0.3s ease-in-out;margin-left:",(0,D.Z)(1),";&,a{color:",(function(e){return e.theme.gray300}),";display:flex;&:hover{cursor:pointer;color:",(function(e){return e.theme.textColor}),";}}"),ve=(0,g.Z)(G.Z,{target:"e4tsdqb3",label:"StyledNavTabs"})({name:"n8i8z8",styles:"margin-bottom:0;width:100%;"}),be=(0,g.Z)(F.Z,{target:"e4tsdqb4",label:"NavTabsBadge"})("@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){display:none;}");const je=me;function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,p.Z)(e);if(t){var o=(0,p.Z)(this).constructor;r=Reflect.construct(s,arguments,o)}else r=s.apply(this,arguments);return(0,u.Z)(this,r)}}var Pe=h.createContext({}),Re=function(e){(0,c.Z)(r,e);var t=we(r);function r(){var e;(0,n.Z)(this,r);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,d.Z)((0,l.Z)(e),"shouldReload",!0),e}return(0,a.Z)(r,[{key:"getTitle",value:function(){var e=this.props,t=e.params,r=e.organization,s=e.selection,o=this.state.release,n=null==o?void 0:o.projects.find((function(e){return e.id===s.projects[0]}));return(0,C.Z)((0,O.t)("Release %s",(0,z.ko)(t.release)),r.slug,!1,null==n?void 0:n.slug)}},{key:"getDefaultState",value:function(){return Se(Se({},(0,i.Z)((0,p.Z)(r.prototype),"getDefaultState",this).call(this)),{},{deploys:[],sessions:null})}},{key:"getEndpoints",value:function(){var e,t=this.props,r=t.organization,s=t.location,n=t.params,a=t.releaseMeta,l=t.defaultStatsPeriod,i="/organizations/".concat(r.slug,"/releases/").concat(encodeURIComponent(n.release),"/"),c=[["release",i,{query:Se({},(0,w.Q)(Z()(s.query,(0,o.Z)(Object.values(k.nF))),{defaultStatsPeriod:l}))}]];return a.deployCount>0&&c.push(["deploys","".concat(i,"deploys/")]),c.push(["sessions","/organizations/".concat(r.slug,"/sessions/"),{query:{project:s.query.project,environment:null!==(e=s.query.environment)&&void 0!==e?e:[],query:'release:"'.concat(n.release,'"'),field:"sum(session)",statsPeriod:"90d",interval:"1d"}}]),c}},{key:"renderError",value:function(){var e,t=Object.values(this.state.errors).find((function(e){return 404===(null==e?void 0:e.status)||403===(null==e?void 0:e.status)}));if(t)return(0,ce.tZ)(L.JH,null,(0,ce.tZ)(v.Z,{type:"error",icon:(0,ce.tZ)(E.FC,null)},(0,O.t)("This release may not be in your selected project.")));for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=(0,i.Z)((0,p.Z)(r.prototype),"renderError",this)).call.apply(e,[this].concat(o))}},{key:"renderLoading",value:function(){return(0,ce.tZ)(L.JH,null,(0,ce.tZ)(x.Z,null))}},{key:"renderBody",value:function(){var e=this.props,t=e.organization,r=e.location,s=e.selection,o=e.releaseMeta,n=e.defaultStatsPeriod,a=e.getHealthData,l=e.isHealthLoading,i=this.state,c=i.release,u=i.deploys,p=i.sessions,d=i.reloading,g=null==c?void 0:c.projects.find((function(e){return e.id===s.projects[0]}));return g&&c?(0,ce.tZ)(j.Z,{organization:t},(0,ce.tZ)(Ee,null,(0,ce.tZ)(je,{location:r,organization:t,release:c,project:g,releaseMeta:o,refetchData:this.fetchData}),(0,ce.tZ)(Pe.Provider,{value:{release:c,project:g,deploys:u,releaseMeta:o,refetchData:this.fetchData,defaultStatsPeriod:n,getHealthData:a,isHealthLoading:l,hasHealthData:!(null==p||!p.groups[0].totals["sum(session)"])}},this.props.children))):d?(0,ce.tZ)(x.Z,null):null}}]),r}(q.Z),ke=function(e){(0,c.Z)(r,e);var t=we(r);function r(){var e;(0,n.Z)(this,r);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),(0,d.Z)((0,l.Z)(e),"shouldReload",!0),e}return(0,a.Z)(r,[{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.params;return[["releaseMeta","/organizations/".concat(t.slug,"/releases/").concat(encodeURIComponent(r.release),"/meta/")]]}},{key:"renderError",value:function(){var e,t=Object.values(this.state.errors).find((function(e){return 404===(null==e?void 0:e.status)}));if(t)return(0,ce.tZ)(L.JH,null,(0,ce.tZ)(v.Z,{type:"error",icon:(0,ce.tZ)(E.FC,null)},(0,O.t)("This release could not be found.")));for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=(0,i.Z)((0,p.Z)(r.prototype),"renderError",this)).call.apply(e,[this].concat(o))}},{key:"isProjectMissingInUrl",value:function(){var e=this.props.location.query.project;return!e||"string"!=typeof e}},{key:"renderLoading",value:function(){return(0,ce.tZ)(L.JH,null,(0,ce.tZ)(x.Z,null))}},{key:"renderProjectsFooterMessage",value:function(){return(0,ce.tZ)(Oe,null,(0,ce.tZ)(E.aU,{size:"xs"})," ",(0,O.t)("Only projects with this release are visible."))}},{key:"renderBody",value:function(){var e=this,t=this.props,r=t.organization,o=t.params,n=t.router,a=t.location,l=t.selection,i=this.state.releaseMeta;if(!i)return null;var c=i.projects,u=y()(i.released).isAfter(y()().subtract(24,"hours"))?"24h":R.GY;return this.isProjectMissingInUrl()?(0,ce.tZ)(P.Z,{projects:c.map((function(e){var t=e.id,r=e.slug;return{id:String(t),slug:r}})),router:n,nextPath:"/organizations/".concat(r.slug,"/releases/").concat(encodeURIComponent(o.release),"/"),noProjectRedirectPath:"/organizations/".concat(r.slug,"/releases/")}):(0,ce.tZ)(S.Z,{lockedMessageSubject:(0,O.t)("release"),shouldForceProject:1===c.length,forceProject:1===c.length?Se(Se({},c[0]),{},{id:String(c[0].id)}):void 0,specificProjectSlugs:c.map((function(e){return e.slug})),disableMultipleProjectSelection:!0,showProjectSettingsLink:!0,projectsFooterMessage:this.renderProjectsFooterMessage(),defaultSelection:{datetime:{start:null,end:null,utc:!1,period:u}}},(0,ce.tZ)(A.Z,{releases:[o.release],organization:r,selection:l,location:a,display:[T.zY.SESSIONS,T.zY.USERS],defaultStatsPeriod:u},(function(t){var r=t.isHealthLoading,o=t.getHealthData;return(0,ce.tZ)(Re,(0,s.Z)({},e.props,{releaseMeta:i,defaultStatsPeriod:u,getHealthData:o,isHealthLoading:r}))})))}}]),r}(b.Z),Ee=(0,g.Z)(L.JH,{target:"eii7qn30",label:"StyledPageContent"})({name:"y8aj3r",styles:"padding:0;"}),Oe=(0,g.Z)("div",{target:"eii7qn31",label:"ProjectsFooterMessage"})("display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-gap:",(0,D.Z)(1),";");const Le=(0,_.Z)((0,M.Z)(ke))}}]);
//# sourceMappingURL=ReleasesDetail.js.map