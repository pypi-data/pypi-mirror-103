(self.webpackChunk=self.webpackChunk||[]).push([["ProjectTeams"],{"./app/utils/routeTitle.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3?arguments[3]:void 0,r="".concat(e," - ").concat(t),o=s?"".concat(r," - ").concat(s):r;return n?"".concat(o," - Sentry"):o}},"./app/views/asyncView.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),i=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=(n("../node_modules/react/index.js"),n("../node_modules/react-document-title/index.js")),u=n.n(l),c=n("./app/components/asyncComponent.tsx"),d=n("../node_modules/@emotion/core/dist/core.browser.esm.js");var m=function(e){(0,o.Z)(c,e);var t,n,l=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(s,arguments,r)}else e=s.apply(this,arguments);return(0,a.Z)(this,e)});function c(){return(0,s.Z)(this,c),l.apply(this,arguments)}return(0,r.Z)(c,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,d.tZ)(u(),{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),c}(c.Z);m.displayName="AsyncView"},"./app/views/settings/components/settingsPageHeader.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var s=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),d=n("../node_modules/react/index.js"),m=n("./app/styles/organization.tsx"),p=n("./app/styles/space.tsx"),f=n("../node_modules/@emotion/core/dist/core.browser.esm.js");var h=function(e){(0,a.Z)(c,e);var t,n,u=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(s,arguments,r)}else e=s.apply(this,arguments);return(0,i.Z)(this,e)});function c(){return(0,r.Z)(this,c),u.apply(this,arguments)}return(0,o.Z)(c,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.subtitle,o=e.action,a=e.tabs,i=e.noTitleStyles,l=e.body,u=(0,s.Z)(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),c=!r;return(0,f.tZ)("div",u,(0,f.tZ)(b,{isNarrow:c},(0,f.tZ)(Z,null,t&&(0,f.tZ)(v,null,t),n&&(0,f.tZ)(g,{tabs:a,styled:i},(0,f.tZ)(m.Gh,null,n),r&&(0,f.tZ)(y,null,r))),o&&(0,f.tZ)(j,{isNarrow:c},o)),l&&(0,f.tZ)(x,null,l),a&&(0,f.tZ)(w,null,a))}}]),c}(d.Component);h.displayName="UnstyledSettingsPageHeader",(0,u.Z)(h,"defaultProps",{noTitleStyles:!1});var b=(0,c.Z)("div",{target:"e1nr98yc0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),Z=(0,c.Z)("div",{target:"e1nr98yc1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),g=(0,c.Z)("div",{target:"e1nr98yc2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",(0,p.Z)(4)," ",(0,p.Z)(2)," ",(0,p.Z)(3)," 0;"),y=(0,c.Z)("div",{target:"e1nr98yc3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,p.Z)(1.5)," 0 0;"),v=(0,c.Z)("div",{target:"e1nr98yc4",label:"Icon"})("margin-right:",(0,p.Z)(1),";"),j=(0,c.Z)("div",{target:"e1nr98yc5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":(0,p.Z)(4)}),";"),T=(0,c.Z)(h,{target:"e1nr98yc6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",(0,p.Z)(4),";"),x=(0,c.Z)("div",{target:"e1nr98yc7",label:"BodyWrapper"})("flex:1;margin:0 0 ",(0,p.Z)(3),";"),w=(0,c.Z)("div",{target:"e1nr98yc8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});const C=T},"./app/views/settings/components/teamSelect.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var s=n("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),r=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),m=n("../node_modules/@babel/runtime/regenerator/index.js"),p=n.n(m),f=n("../node_modules/react/index.js"),h=n("../node_modules/lodash/debounce.js"),b=n.n(h),Z=n("./app/components/button.tsx"),g=n("./app/components/confirm.tsx"),y=n("./app/components/dropdownAutoComplete/index.tsx"),v=n("./app/components/dropdownButton.tsx"),j=n("./app/components/links/link.tsx"),T=n("./app/components/panels/index.tsx"),x=n("./app/constants/index.tsx"),w=n("./app/icons/index.tsx"),C=n("./app/locale.tsx"),_=n("./app/styles/space.tsx"),R=n("./app/utils/withApi.tsx"),k=n("./app/views/settings/components/emptyMessage.tsx"),S=n("../node_modules/@emotion/core/dist/core.browser.esm.js");var P=function(e){(0,i.Z)(m,e);var t,n,d=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(s,arguments,r)}else e=s.apply(this,arguments);return(0,l.Z)(this,e)});function m(){var e;(0,r.Z)(this,m);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=d.call.apply(d,[this].concat(n)),(0,c.Z)((0,a.Z)(e),"state",{loading:!0,teams:null}),(0,c.Z)((0,a.Z)(e),"fetchTeams",b()(function(){var t=(0,s.Z)(p().mark((function t(n){var s,r,o,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props,r=s.api,o=s.organization,t.next=3,r.requestPromise("/organizations/".concat(o.slug,"/teams/"),{query:{query:n,per_page:x.X1}});case 3:a=t.sent,e.setState({teams:a,loading:!1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x.Dk)),(0,c.Z)((0,a.Z)(e),"handleQueryUpdate",(function(t){e.setState({loading:!0}),e.fetchTeams(t.target.value)})),(0,c.Z)((0,a.Z)(e),"handleAddTeam",(function(t){var n,s=null===(n=e.state.teams)||void 0===n?void 0:n.find((function(e){return e.slug===t.value}));s&&e.props.onAddTeam(s)})),(0,c.Z)((0,a.Z)(e),"handleRemove",(function(t){e.props.onRemoveTeam(t)})),e}return(0,o.Z)(m,[{key:"componentDidMount",value:function(){this.fetchTeams()}},{key:"renderTeamAddDropDown",value:function(){var e,t=this.props,n=t.disabled,s=t.selectedTeams,r=t.menuHeader,o=this.state.teams,a=n;return e=null===o||0===o.length?[]:o.filter((function(e){return!s.includes(e.slug)})).map((function(e,t){return{index:t,value:e.slug,searchKey:e.slug,label:(0,S.tZ)(z,null,"#",e.slug)}})),(0,S.tZ)(y.Z,{items:e,busyItemsStillVisible:this.state.loading,onChange:this.handleQueryUpdate,onSelect:this.handleAddTeam,emptyMessage:(0,C.t)("No teams"),menuHeader:r,disabled:a,alignMenu:"right"},(function(e){var t=e.isOpen;return(0,S.tZ)(v.Z,{"aria-label":(0,C.t)("Add Team"),isOpen:t,size:"xsmall",disabled:a},(0,C.t)("Add Team"))}))}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.organization,s=t.selectedTeams,r=t.disabled,o=t.confirmLastTeamRemoveMessage;if(0===s.length)return(0,S.tZ)(k.Z,null,(0,C.t)("No Teams assigned"));var a=1===s.length&&o?o:null;return s.map((function(t){return(0,S.tZ)(A,{key:t,orgId:n.slug,team:t,onRemove:e.handleRemove,disabled:r,confirmMessage:a})}))}},{key:"render",value:function(){return(0,S.tZ)(T.s_,null,(0,S.tZ)(T.V9,{hasButtons:!0},(0,C.t)("Team"),this.renderTeamAddDropDown()),(0,S.tZ)(T.N,null,this.renderBody()))}}]),m}(f.Component);P.displayName="TeamSelect";var A=function(e){var t=e.orgId,n=e.team,s=e.onRemove,r=e.disabled,o=e.confirmMessage;return(0,S.tZ)(I,null,(0,S.tZ)(B,{to:"/settings/".concat(t,"/teams/").concat(n,"/")},"#".concat(n)),(0,S.tZ)(g.Z,{message:o,bypass:!o,onConfirm:function(){return s(n)},disabled:r},(0,S.tZ)(Z.ZP,{size:"xsmall",icon:(0,S.tZ)(w.JZ,{isCircled:!0,size:"xs"}),disabled:r},(0,C.t)("Remove"))))};A.displayName="TeamRow";var z=(0,d.Z)("div",{target:"e1u21fi90",label:"TeamDropdownElement"})("padding:",(0,_.Z)(.5)," 0px;text-transform:none;"),I=(0,d.Z)(T.Lv,{target:"e1u21fi91",label:"TeamPanelItem"})("padding:",(0,_.Z)(2),";align-items:center;"),B=(0,d.Z)(j.Z,{target:"e1u21fi92",label:"StyledLink"})("flex:1;margin-right:",(0,_.Z)(1),";");const O=(0,R.Z)(P)},"./app/views/settings/project/projectTeams.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R});var s=n("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),r=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),m=(n("../node_modules/react/index.js"),n("../node_modules/@emotion/core/dist/core.browser.esm.js")),p=n("./app/actionCreators/indicator.tsx"),f=n("./app/actionCreators/modal.tsx"),h=n("./app/actionCreators/projects.tsx"),b=n("./app/components/links/link.tsx"),Z=n("./app/components/tooltip.tsx"),g=n("./app/locale.tsx"),y=n("./app/styles/space.tsx"),v=n("./app/utils/routeTitle.tsx"),j=n("./app/views/asyncView.tsx"),T=n("./app/views/settings/components/settingsPageHeader.tsx"),x=n("./app/views/settings/components/teamSelect.tsx");var w=function(e){(0,i.Z)(b,e);var t,n,d=(t=b,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(s,arguments,r)}else e=s.apply(this,arguments);return(0,l.Z)(this,e)});function b(){var e;(0,r.Z)(this,b);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=d.call.apply(d,[this].concat(n)),(0,c.Z)((0,a.Z)(e),"canCreateTeam",(function(){var t=e.props.organization,n=new Set(t.access);return n.has("org:write")&&n.has("team:write")&&n.has("project:write")})),(0,c.Z)((0,a.Z)(e),"handleRemove",(function(t){if(!e.state.loading){var n=e.props.params,s=n.orgId,r=n.projectId;(0,h.M9)(e.api,s,r,t).then((function(){return e.handleRemovedTeam(t)})).catch((function(){(0,p.Iw)((0,g.t)("Could not remove the %s team",t)),e.setState({loading:!1})}))}})),(0,c.Z)((0,a.Z)(e),"handleRemovedTeam",(function(t){e.setState((function(e){return{projectTeams:(0,s.Z)((e.projectTeams||[]).filter((function(e){return e.slug!==t})))}}))})),(0,c.Z)((0,a.Z)(e),"handleAddedTeam",(function(t){e.setState((function(e){return{projectTeams:[].concat((0,s.Z)(e.projectTeams||[]),[t])}}))})),(0,c.Z)((0,a.Z)(e),"handleAdd",(function(t){if(!e.state.loading){var n=e.props.params,s=n.orgId,r=n.projectId;(0,h.Oe)(e.api,s,r,t).then((function(){e.handleAddedTeam(t)}),(function(){e.setState({error:!0,loading:!1})}))}})),(0,c.Z)((0,a.Z)(e),"handleCreateTeam",(function(t){var n=e.props,s=n.project,r=n.organization;e.canCreateTeam()&&(t.stopPropagation(),t.preventDefault(),(0,f.openCreateTeamModal)({project:s,organization:r,onClose:function(t){(0,h.Oe)(e.api,r.slug,s.slug,t).then(e.remountComponent,e.remountComponent)}}))})),e}return(0,o.Z)(b,[{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,n=e.projectId;return[["projectTeams","/projects/".concat(t,"/").concat(n,"/teams/")]]}},{key:"getTitle",value:function(){var e=this.props.params.projectId;return(0,v.Z)((0,g.t)("Project Teams"),e,!1)}},{key:"renderBody",value:function(){var e,t=this.props,n=t.params,s=t.organization,r=this.canCreateTeam(),o=s.access.includes("project:write"),a=(0,g.t)("This is the last team with access to this project. Removing it will mean only organization owners and managers will be able to access the project pages. Are you sure you want to remove this team from the project %s?",n.projectId),i=this.state.projectTeams,l=null!==(e=null==i?void 0:i.map((function(e){return e.slug})))&&void 0!==e?e:[],u=(0,m.tZ)(C,null,(0,g.t)("Teams"),(0,m.tZ)(Z.Z,{disabled:r,title:(0,g.t)("You must be a project admin to create teams"),position:"top"},(0,m.tZ)(_,{to:"",disabled:!r,onClick:this.handleCreateTeam},(0,g.t)("Create Team"))));return(0,m.tZ)("div",null,(0,m.tZ)(T.Z,{title:(0,g.t)("%s Teams",n.projectId)}),(0,m.tZ)(x.Z,{organization:s,selectedTeams:l,onAddTeam:this.handleAdd,onRemoveTeam:this.handleRemove,menuHeader:u,confirmLastTeamRemoveMessage:a,disabled:!o}))}}]),b}(j.Z),C=(0,d.Z)("div",{target:"e1bk25b30",label:"StyledTeamsLabel"})("font-size:0.875em;padding:",(0,y.Z)(.5)," 0px;text-transform:uppercase;"),_=(0,d.Z)(b.Z,{target:"e1bk25b31",label:"StyledCreateTeamLink"})("float:right;text-transform:none;",(function(e){return e.disabled&&(0,m.iv)("cursor:not-allowed;color:",e.theme.gray300,";opacity:0.6;;label:StyledCreateTeamLink;")}),";");const R=w}}]);
//# sourceMappingURL=ProjectTeams.js.map