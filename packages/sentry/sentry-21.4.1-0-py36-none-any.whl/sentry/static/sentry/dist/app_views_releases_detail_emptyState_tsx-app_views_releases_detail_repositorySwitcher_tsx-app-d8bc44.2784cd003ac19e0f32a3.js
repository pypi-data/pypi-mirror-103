(self.webpackChunk=self.webpackChunk||[]).push([["app_views_releases_detail_emptyState_tsx-app_views_releases_detail_repositorySwitcher_tsx-app-d8bc44"],{"./app/actions/repositoryActions.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var o=r("../node_modules/reflux/src/index.js");const s=r.n(o)().createActions(["resetRepositories","loadRepositories","loadRepositoriesError","loadRepositoriesSuccess"])},"./app/utils/withRepositories.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var o=r("../node_modules/@babel/runtime/helpers/esm/extends.js"),s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/react/index.js"),r("../node_modules/create-react-class/index.js")),i=r.n(n),a=r("../node_modules/reflux/src/index.js"),l=r.n(a),p=r("../node_modules/@sentry/minimal/esm/index.js"),c=r("../node_modules/@sentry/types/esm/severity.js"),u=r("./app/actions/repositoryActions.tsx");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m={listenables:u.Z,state:{orgSlug:void 0,repositories:void 0,repositoriesLoading:void 0,repositoriesError:void 0},init:function(){this.resetRepositories()},resetRepositories:function(){this.state={orgSlug:void 0,repositories:void 0,repositoriesLoading:void 0,repositoriesError:void 0},this.trigger(this.state)},loadRepositories:function(e){this.state={orgSlug:e,repositories:e===this.state.orgSlug?this.state.repositories:void 0,repositoriesLoading:!0,repositoriesError:void 0},this.trigger(this.state)},loadRepositoriesError:function(e){this.state=h(h({},this.state),{},{repositories:void 0,repositoriesLoading:!1,repositoriesError:e}),this.trigger(this.state)},loadRepositoriesSuccess:function(e){this.state=h(h({},this.state),{},{repositories:e,repositoriesLoading:!1,repositoriesError:void 0}),this.trigger(this.state)},get:function(){return h({},this.state)}};const f=l().createStore(m);var v=r("./app/utils/getDisplayName.tsx"),b=r("../node_modules/@emotion/core/dist/core.browser.esm.js");function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j={repositories:void 0,repositoriesLoading:void 0,repositoriesError:void 0};const Z=function(e){return i()({displayName:"withRepositories(".concat((0,v.Z)(e),")"),mixins:[l().listenTo(f,"onStoreUpdate")],getInitialState:function(){var e=this.props.organization.slug,t=f.get();return t.orgSlug!==e&&u.Z.resetRepositories(),t.orgSlug===e?g(g({},j),t):g({},j)},componentDidMount:function(){this.fetchRepositories()},fetchRepositories:function(){var e=this.props,t=e.api,r=e.organization.slug,o=f.get();(!o.repositories&&!o.repositoriesLoading||o.repositoriesError)&&function(e,t){var r=t.orgSlug,o="/organizations/".concat(r,"/repos/");f.state.repositoriesLoading=!0,u.Z.loadRepositories(r),e.requestPromise(o,{method:"GET"}).then((function(e){u.Z.loadRepositoriesSuccess(e)})).catch((function(e){u.Z.loadRepositoriesError(e),p.$e((function(t){t.setLevel(c.z.Warning),t.setFingerprint(["getRepositories-action-creator"]),p.Tb(e)}))}))}(t,{orgSlug:r})},onStoreUpdate:function(){var e=f.get();this.setState(g({},e))},render:function(){return(0,b.tZ)(e,(0,o.Z)({},this.props,this.state))}})}},"./app/views/releases/detail/emptyState.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>a}),r("../node_modules/react/index.js");var o=r("./app/components/emptyStateWarning.tsx"),s=r("./app/components/panels/index.tsx"),n=r("../node_modules/@emotion/core/dist/core.browser.esm.js"),i=function(e){var t=e.children;return(0,n.tZ)(s.s_,null,(0,n.tZ)(s.N,null,(0,n.tZ)(o.Z,null,(0,n.tZ)("p",null,t))))};i.displayName="EmptyState";const a=i},"./app/views/releases/detail/repositorySwitcher.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),n=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),p=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=r("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),u=r("../node_modules/react/index.js"),d=r("./app/components/dropdownControl.tsx"),h=r("./app/locale.tsx"),m=r("./app/styles/overflowEllipsis.tsx"),f=r("./app/styles/space.tsx"),v=r("../node_modules/@emotion/core/dist/core.browser.esm.js");function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e){(0,i.Z)(m,e);var t,r,c=(t=m,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,l.Z)(t);if(r){var s=(0,l.Z)(this).constructor;e=Reflect.construct(o,arguments,s)}else e=o.apply(this,arguments);return(0,a.Z)(this,e)});function m(){var e;(0,o.Z)(this,m);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=c.call.apply(c,[this].concat(r)),(0,p.Z)((0,n.Z)(e),"state",{}),(0,p.Z)((0,n.Z)(e),"dropdownButton",u.createRef()),(0,p.Z)((0,n.Z)(e),"handleRepoFilterChange",(function(t){var r=e.props,o=r.router,s=r.location;o.push(y(y({},s),{},{query:y(y({},s.query),{},{cursor:void 0,activeRepo:t})}))})),e}return(0,s.Z)(m,[{key:"componentDidMount",value:function(){this.setButtonDropDownWidth()}},{key:"setButtonDropDownWidth",value:function(){var e,t,r=null===(e=this.dropdownButton)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.offsetWidth;r&&this.setState({dropdownButtonWidth:r})}},{key:"render",value:function(){var e=this,t=this.props,r=t.activeRepository,o=t.repositories,s=this.state.dropdownButtonWidth,n=null==r?void 0:r.name;return(0,v.tZ)(Z,{minMenuWidth:s,label:(0,v.tZ)(u.Fragment,null,(0,v.tZ)(w,null,"".concat((0,h.t)("Filter"),":")),n),buttonProps:{forwardRef:this.dropdownButton}},o.map((function(e){return e.name})).map((function(t){return(0,v.tZ)(d.hP,{key:t,onSelect:e.handleRepoFilterChange,eventKey:t,isActive:t===n},(0,v.tZ)(R,null,t))})))}}]),m}(u.PureComponent);g.displayName="RepositorySwitcher";const j=g;var Z=(0,c.Z)(d.ZP,{target:"e1rv9bcl0",label:"StyledDropdownControl"})("margin-bottom:",(0,f.Z)(1),";> *:nth-child(2){right:auto;width:auto;",(function(e){return e.minMenuWidth&&"min-width: calc(".concat(e.minMenuWidth,"px + 10px);")})," border-radius:",(function(e){return e.theme.borderRadius}),";border-top-left-radius:0px;border:1px solid ",(function(e){return e.theme.button.default.border}),";top:calc(100% - 1px);}"),w=(0,c.Z)("em",{target:"e1rv9bcl1",label:"FilterText"})("font-style:normal;color:",(function(e){return e.theme.gray300}),";margin-right:",(0,f.Z)(.5),";"),R=(0,c.Z)("div",{target:"e1rv9bcl2",label:"RepoLabel"})(m.Z)},"./app/views/releases/detail/utils.tsx":(e,t,r)=>{"use strict";r.d(t,{bB:()=>m,DZ:()=>f,pm:()=>v,AN:()=>b,EJ:()=>y});var o=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/lodash/pick.js"),i=r.n(n),a=r("./app/constants/globalSelectionHeader.tsx"),l=r("./app/locale.tsx"),p=r("./app/utils/dates.tsx"),c=r("./app/utils/discover/eventView.tsx"),u=r("./app/utils/tokenizeSearch.tsx");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e){return e.reduce((function(e,t){var r=t.filename,o=t.repoName,s=t.author,n=t.type;return e.hasOwnProperty(o)||(e[o]={}),e[o].hasOwnProperty(r)||(e[o][r]={authors:{},types:new Set}),s.email&&(e[o][r].authors[s.email]=s),e[o][r].types.add(n),e}),{})}function f(e){return e.reduce((function(e,t){var r,o,s=null!==(r=null===(o=t.repository)||void 0===o?void 0:o.name)&&void 0!==r?r:(0,l.t)("unknown");return e.hasOwnProperty(s)||(e[s]=[]),e[s].push(t),e}),{})}function v(e){var t=e.location,r=e.perPage,s=void 0===r?40:r,n=e.activeRepository,l=h(h({},i()(t.query,[].concat((0,o.Z)(Object.values(a.nF)),["cursor"]))),{},{per_page:s});return n?h(h({},l),{},{repo_name:n.name}):l}function b(e,t){return t?[t.name]:e}function y(e,t,r){var o=e.projects,s=e.environments,n=e.datetime,i=n.start,a=n.end,d=n.period,h={id:void 0,version:2,name:"".concat((0,l.t)("Release Apdex")),fields:["apdex(".concat(r.apdexThreshold,")")],query:(0,u.gZ)(new u.an(["release:".concat(t),"event.type:transaction","count():>0"])),range:d,environment:s,projects:o,start:i?(0,p.v5)(i):void 0,end:a?(0,p.v5)(a):void 0};return c.ZP.fromSavedQuery(h)}},"./app/views/releases/detail/withReleaseRepos.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>D});var o=r("../node_modules/@babel/runtime/helpers/esm/extends.js"),s=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),p=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=r("../node_modules/@babel/runtime/regenerator/index.js"),h=r.n(d),m=r("../node_modules/react/index.js"),f=r("../node_modules/@sentry/minimal/esm/index.js"),v=r("./app/actionCreators/indicator.tsx"),b=r("./app/components/button.tsx"),y=r("./app/components/layouts/thirds.tsx"),g=r("./app/components/loadingIndicator.tsx"),j=r("./app/components/panels/index.tsx"),Z=r("./app/icons/index.tsx"),w=r("./app/locale.tsx"),R=r("./app/utils/getDisplayName.tsx"),O=r("./app/utils/withApi.tsx"),x=r("./app/utils/withOrganization.tsx"),P=r("./app/utils/withRepositories.tsx"),_=r("./app/views/settings/components/emptyMessage.tsx"),S=r("./app/views/releases/detail/index.tsx"),k=r("../node_modules/@emotion/core/dist/core.browser.esm.js");const D=function(e){var t,r;return(0,O.Z)((0,x.Z)((0,P.Z)((r=t=function(t){(0,l.Z)(O,t);var r,d,m,R=(d=O,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(d);if(m){var r=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,p.Z)(this,e)});function O(){var e;(0,n.Z)(this,O);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=R.call.apply(R,[this].concat(r)),(0,u.Z)((0,a.Z)(e),"state",{releaseRepos:[],isLoading:!0}),e}return(0,i.Z)(O,[{key:"componentDidMount",value:function(){this.fetchReleaseRepos()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setActiveReleaseRepo(e)}},{key:"componentDidUpdate",value:function(e,t){!e.repositoriesLoading||this.props.repositoriesLoading?t.releaseRepos.length!==this.state.releaseRepos.length&&this.setActiveReleaseRepo(this.props):this.fetchReleaseRepos()}},{key:"setActiveReleaseRepo",value:function(e){var t,r=this.state,o=r.releaseRepos,s=r.activeReleaseRepo;if(o.length){var n,i=null===(t=e.location.query)||void 0===t?void 0:t.activeRepo;if(i){if(i!==(null==s?void 0:s.name)){var a=o.find((function(e){return e.name===i}));a?this.setState({activeReleaseRepo:a}):(0,v.Iw)((0,w.t)("The repository you were looking for was not found."))}}else this.setState({activeReleaseRepo:null!==(n=o[0])&&void 0!==n?n:null})}}},{key:"fetchReleaseRepos",value:(r=(0,s.Z)(h().mark((function e(){var t,r,o,s,n,i,a,l,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,r=t.params,o=t.api,s=t.repositories,void 0!==(n=t.repositoriesLoading)&&!0!==n){e.next=3;break}return e.abrupt("return");case 3:if(null!=s&&s.length){e.next=6;break}return this.setState({isLoading:!1}),e.abrupt("return");case 6:return i=r.release,a=r.orgId,l=this.context.project,this.setState({isLoading:!0}),e.prev=9,e.next=12,o.requestPromise("/projects/".concat(a,"/").concat(l.slug,"/releases/").concat(encodeURIComponent(i),"/repositories/"));case 12:p=e.sent,this.setState({releaseRepos:p,isLoading:!1}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),f.Tb(e.t0),(0,v.Iw)((0,w.t)("An error occured while trying to fetch the repositories of the release: %s",i));case 20:case"end":return e.stop()}}),e,this,[[9,16]])}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var t=this.state,r=t.isLoading,s=t.activeReleaseRepo,n=t.releaseRepos,i=this.props,a=i.repositoriesLoading,l=i.repositories,p=i.params,c=i.router,u=i.location,d=i.organization;if(r||a)return(0,k.tZ)(g.Z,null);if(null==l||!l.length){var h=p.orgId;return(0,k.tZ)(y.uT,null,(0,k.tZ)(y.or,{fullWidth:!0},(0,k.tZ)(j.s_,{dashedBorder:!0},(0,k.tZ)(_.Z,{icon:(0,k.tZ)(Z.J3,{size:"xl"}),title:(0,w.t)("Releases are better with commit data!"),description:(0,w.t)("Connect a repository to see commit info, files changed, and authors involved in future releases."),action:(0,k.tZ)(b.ZP,{priority:"primary",to:"/settings/".concat(h,"/repos/")},(0,w.t)("Connect a repository"))}))))}if(!n.length)return(0,k.tZ)(y.uT,null,(0,k.tZ)(y.or,{fullWidth:!0},(0,k.tZ)(j.s_,{dashedBorder:!0},(0,k.tZ)(_.Z,{icon:(0,k.tZ)(Z.J3,{size:"xl"}),title:(0,w.t)("Releases are better with commit data!"),description:(0,w.t)("No commits associated with this release have been found.")}))));if(void 0===s)return(0,k.tZ)(g.Z,null);var m=p.release,f=d.slug;return(0,k.tZ)(e,(0,o.Z)({},this.props,{orgSlug:f,projectSlug:this.context.project.slug,release:m,router:c,location:u,releaseRepos:n,activeReleaseRepo:s}))}}]),O}(m.Component),(0,u.Z)(t,"displayName","withReleaseRepos(".concat((0,R.Z)(e),")")),(0,u.Z)(t,"contextType",S.ReleaseContext),r))))}}}]);
//# sourceMappingURL=app_views_releases_detail_emptyState_tsx-app_views_releases_detail_repositorySwitcher_tsx-app-d8bc44.js.map