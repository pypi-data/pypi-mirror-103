(self.webpackChunk=self.webpackChunk||[]).push([["GroupEvents"],{"./app/components/acl/role.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),i=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=r("../node_modules/react/index.js"),l=r("./app/stores/configStore.tsx"),c=r("../node_modules/js-cookie/src/js.cookie.js"),p=r.n(c),d=r("./app/utils/isRenderFunc.tsx"),f=r("./app/utils/withOrganization.tsx");var m=function(e){(0,o.Z)(c,e);var t,r,u=(t=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,i.Z)(t);if(r){var s=(0,i.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function c(){return(0,n.Z)(this,c),u.apply(this,arguments)}return(0,s.Z)(c,[{key:"hasRole",value:function(){var e,t=l.Z.get("user"),r=this.props,n=r.organization,s=r.role,o=n.availableRoles,a=null!==(e=n.role)&&void 0!==e?e:"";if(!t)return!1;if((l.Z.get("user")||{}).isSuperuser&&(p().set("su","test"),void 0===p().get("su")))return!0;if(!Array.isArray(o))return!1;var i=o.map((function(e){return e.id}));if(!i.includes(s)||!i.includes(a))return!1;var u=i.indexOf(s);return i.indexOf(a)>=u}},{key:"render",value:function(){var e=this.props.children,t=this.hasRole();return(0,d.l)(e)?e({hasRole:t}):t&&e?e:null}}]),c}(u.Component);m.displayName="Role";const h=(0,f.Z)(m)},"./app/components/deviceName.tsx":(e,t,r)=>{"use strict";r.d(t,{qW:()=>h,f:()=>y,ZP:()=>Z});var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),p=r("../node_modules/@babel/runtime/regenerator/index.js"),d=r.n(p),f=r("../node_modules/react/index.js"),m=r("../node_modules/@emotion/core/dist/core.browser.esm.js");function h(e,t){var r=e.split(" ")[0],n=e.split(" ").splice(1).join(" "),s=t.generationByIdentifier(r);return void 0===s?e:s+" "+n}function y(){return v.apply(this,arguments)}function v(){return(v=(0,c.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e("iOSDeviceList").then(r.t.bind(r,"../node_modules/ios-device-list/dist/ios-device-list.min.js",23)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=function(e){(0,a.Z)(p,e);var t,r,c=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var s=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function p(e){var t;return(0,n.Z)(this,p),t=c.call(this,e),(0,l.Z)((0,o.Z)(t),"_isMounted",void 0),t.state={iOSDeviceList:null},t}return(0,s.Z)(p,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,y().then((function(t){e._isMounted&&e.setState({iOSDeviceList:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props,t=e.value,r=e.children,n=this.state.iOSDeviceList;if(!t)return null;if(!n)return t;var s=h(t,n);return(0,m.tZ)("span",{"data-test-id":"loaded-device-name"},r?r(s):s)}}]),p}(f.Component);Z.displayName="DeviceName"},"./app/components/fileSize.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i}),r("../node_modules/react/index.js");var n=r("./app/utils.tsx"),s=r("./app/utils/getDynamicText.tsx"),o=r("../node_modules/@emotion/core/dist/core.browser.esm.js");function a(e){var t=e.className,r=e.bytes;return(0,o.tZ)("span",{className:t},(0,s.Z)({value:(0,n.F)(r),fixed:"xx KB"}))}a.displayName="FileSize";const i=a},"./app/components/searchBar.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=r("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),p=r("../node_modules/react/index.js"),d=r("../node_modules/classnames/index.js"),f=r.n(d),m=r("./app/components/button.tsx"),h=r("./app/icons/index.tsx"),y=r("./app/icons/iconClose.tsx"),v=r("./app/locale.tsx"),Z=r("./app/utils/callIfFunction.tsx"),b=r("./app/views/settings/components/forms/controls/input.tsx"),g=r("../node_modules/@emotion/core/dist/core.browser.esm.js");var j=function(e){(0,a.Z)(d,e);var t,r,c=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var s=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function d(){var e;(0,n.Z)(this,d);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=c.call.apply(c,[this].concat(r)),(0,l.Z)((0,o.Z)(e),"state",{query:e.props.query||e.props.defaultQuery,dropdownVisible:!1}),(0,l.Z)((0,o.Z)(e),"searchInputRef",p.createRef()),(0,l.Z)((0,o.Z)(e),"blur",(function(){e.searchInputRef.current&&e.searchInputRef.current.blur()})),(0,l.Z)((0,o.Z)(e),"onSubmit",(function(t){t.preventDefault(),e.blur(),e.props.onSearch(e.state.query)})),(0,l.Z)((0,o.Z)(e),"clearSearch",(function(){e.setState({query:e.props.defaultQuery},(function(){e.props.onSearch(e.state.query),(0,Z.g)(e.props.onChange,e.state.query)}))})),(0,l.Z)((0,o.Z)(e),"onQueryFocus",(function(){e.setState({dropdownVisible:!0})})),(0,l.Z)((0,o.Z)(e),"onQueryBlur",(function(){e.setState({dropdownVisible:!1})})),(0,l.Z)((0,o.Z)(e),"onQueryChange",(function(t){var r=t.target.value;e.setState({query:r}),(0,Z.g)(e.props.onChange,r)})),e}return(0,s.Z)(d,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.query!==this.props.query&&this.setState({query:e.query})}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.width;return(0,g.tZ)("div",{className:f()("search",t)},(0,g.tZ)("form",{className:"form-horizontal",onSubmit:this.onSubmit},(0,g.tZ)("div",null,(0,g.tZ)(x,{type:"text",className:"search-input",placeholder:this.props.placeholder,name:"query",ref:this.searchInputRef,autoComplete:"off",value:this.state.query,onBlur:this.onQueryBlur,onChange:this.onQueryChange,width:r}),(0,g.tZ)(R,{className:"search-input-icon",size:"sm",color:"gray300"}),this.state.query!==this.props.defaultQuery&&(0,g.tZ)(_,{type:"button",className:"search-clear-form",priority:"link",onClick:this.clearSearch,size:"xsmall",icon:(0,g.tZ)(y.b,null),label:(0,v.t)("Clear")}))))}}]),d}(p.PureComponent);j.displayName="SearchBar",(0,l.Z)(j,"defaultProps",{query:"",defaultQuery:"",onSearch:function(){}});var x=(0,c.Z)(b.Z,{target:"e4xnwji0",label:"StyledInput"})("width:",(function(e){return e.width?e.width:void 0}),";&.focus-visible{box-shadow:inset 0 2px 0 rgba(0,0,0,0.04),0 0 6px rgba(177,171,225,0.3);border-color:#a598b2;outline:none;}"),R=(0,c.Z)(h.jV,{target:"e4xnwji1",label:"StyledIconSearch"})({name:"nte755",styles:"position:absolute;top:50%;transform:translateY(-50%);left:14px;"}),_=(0,c.Z)(m.ZP,{target:"e4xnwji2",label:"SearchClearButton"})("position:absolute;top:50%;height:16px;transform:translateY(-50%);right:10px;font-size:",(function(e){return e.theme.fontSizeLarge}),";color:",(function(e){return e.theme.gray200}),";&:hover{color:",(function(e){return e.theme.gray300}),";}");const k=j},"./app/utils/attachmentUrl.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),i=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=r("../node_modules/react/index.js"),l=r("./app/components/acl/role.tsx"),c=r("./app/utils/withOrganization.tsx"),p=r("../node_modules/@emotion/core/dist/core.browser.esm.js");var d=function(e){(0,o.Z)(c,e);var t,r,u=(t=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,i.Z)(t);if(r){var s=(0,i.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function c(){return(0,n.Z)(this,c),u.apply(this,arguments)}return(0,s.Z)(c,[{key:"getDownloadUrl",value:function(){var e=this.props,t=e.attachment,r=e.organization,n=e.eventId,s=e.projectId;return"/api/0/projects/".concat(r.slug,"/").concat(s,"/events/").concat(n,"/attachments/").concat(t.id,"/")}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.organization;return(0,p.tZ)(l.Z,{role:n.attachmentsRole},(function(t){var n=t.hasRole;return r(n?e.getDownloadUrl():null)}))}}]),c}(u.PureComponent);d.displayName="AttachmentUrl";const f=(0,c.Z)(d)},"./app/views/organizationGroupDetails/groupEvents.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GroupEvents:()=>D,default:()=>E});var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=r("../node_modules/react/index.js"),p=r("../node_modules/react-router/es/index.js"),d=r("../node_modules/lodash/pick.js"),f=r.n(d),m=r("./app/components/emptyStateWarning.tsx"),h=r("./app/components/avatar/userAvatar.tsx"),y=r("./app/components/dateTime.tsx"),v=r("./app/components/deviceName.tsx"),Z=r("./app/components/fileSize.tsx"),b=r("./app/components/globalSelectionLink.tsx"),g=r("./app/utils/attachmentUrl.tsx"),j=r("./app/utils/withOrganization.tsx"),x=r("../node_modules/@emotion/core/dist/core.browser.esm.js");var R=function(e){(0,a.Z)(l,e);var t,r,o=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var s=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function l(){return(0,n.Z)(this,l),o.apply(this,arguments)}return(0,s.Z)(l,[{key:"renderCrashFileLink",value:function(){var e=this.props,t=e.event,r=e.projectId;if(!t.crashFile)return null;var n="event.minidump"===t.crashFile.type?"Minidump":"Crash file";return(0,x.tZ)(g.Z,{projectId:r,eventId:t.id,attachment:t.crashFile},(function(e){var r,s;return e&&(0,x.tZ)("small",null,n,": ",(0,x.tZ)("a",{href:"".concat(e,"?download=1")},null===(r=t.crashFile)||void 0===r?void 0:r.name)," (",(0,x.tZ)(Z.Z,{bytes:(null===(s=t.crashFile)||void 0===s?void 0:s.size)||0}),")")}))}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.event,n=e.orgId,s=e.groupId,o=e.tagList,a=e.hasUser,i={};r.tags.forEach((function(e){i[e.key]=e.value}));var u="/organizations/".concat(n,"/issues/").concat(s,"/events/").concat(r.id,"/");return(0,x.tZ)("tr",{key:r.id,className:t},(0,x.tZ)("td",null,(0,x.tZ)("h5",null,(0,x.tZ)(b.Z,{to:u},(0,x.tZ)(y.Z,{date:r.dateCreated})),(0,x.tZ)("small",null,r.title.substr(0,100)),this.renderCrashFileLink())),a&&(0,x.tZ)("td",{className:"event-user table-user-info"},r.user?(0,x.tZ)("div",null,(0,x.tZ)(h.Z,{user:r.user,size:24,className:"avatar",gravatar:!1}),r.user.email):(0,x.tZ)("span",null,"—")),o.map((function(e){return(0,x.tZ)("td",{key:e.key},(0,x.tZ)("div",null,"device"===e.key?(0,x.tZ)(v.ZP,{value:i[e.key]}):i[e.key]))})))}}]),l}(c.Component);R.displayName="EventsTableRow";const _=(0,j.Z)(R);var k=r("./app/locale.tsx");var S=function(e){(0,a.Z)(l,e);var t,r,o=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var s=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function l(){return(0,n.Z)(this,l),o.apply(this,arguments)}return(0,s.Z)(l,[{key:"render",value:function(){var e=this.props,t=e.events,r=e.tagList,n=e.orgId,s=e.projectId,o=e.groupId,a=!!t.find((function(e){return e.user}));return(0,x.tZ)("table",{className:"table events-table"},(0,x.tZ)("thead",null,(0,x.tZ)("tr",null,(0,x.tZ)("th",null,(0,k.t)("ID")),a&&(0,x.tZ)("th",null,(0,k.t)("User")),r.map((function(e){return(0,x.tZ)("th",{key:e.key},e.name)})))),(0,x.tZ)("tbody",null,t.map((function(e){return(0,x.tZ)(_,{key:e.id,event:e,orgId:n,projectId:s,groupId:o,tagList:r,hasUser:a})}))))}}]),l}(c.Component);S.displayName="EventsTable";const C=S;var w=r("./app/components/loadingError.tsx"),O=r("./app/components/loadingIndicator.tsx"),q=r("./app/components/pagination.tsx"),I=r("./app/components/panels/index.tsx"),N=r("./app/components/searchBar.tsx"),P=r("./app/utils/parseApiError.tsx"),B=r("./app/utils/withApi.tsx");function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=function(e){(0,a.Z)(d,e);var t,r,c=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var s=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function d(e){var t;(0,n.Z)(this,d),t=c.call(this,e),(0,l.Z)((0,o.Z)(t),"handleSearch",(function(e){var r=L({},t.props.location.query);r.query=e;var n=t.props.params,s=n.groupId,o=n.orgId;p.browserHistory.push({pathname:"/organizations/".concat(o,"/issues/").concat(s,"/events/"),query:r})})),(0,l.Z)((0,o.Z)(t),"fetchData",(function(){t.setState({loading:!0,error:!1});var e=L(L({},f()(t.props.location.query,["cursor","environment"])),{},{limit:50,query:t.state.query});t.props.api.request("/issues/".concat(t.props.params.groupId,"/events/"),{query:e,method:"GET",success:function(e,r,n){var s;t.setState({eventList:e,error:!1,loading:!1,pageLinks:null!==(s=null==n?void 0:n.getResponseHeader("Link"))&&void 0!==s?s:""})},error:function(e){t.setState({error:(0,P.Z)(e),loading:!1})}})}));var r=t.props.location.query;return t.state={eventList:[],loading:!0,error:!1,pageLinks:"",query:r.query||""},t}return(0,s.Z)(d,[{key:"UNSAFE_componentWillMount",value:function(){this.fetchData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.props.location.search!==e.location.search){var t=e.location.query;this.setState({query:t.query},this.fetchData)}}},{key:"renderNoQueryResults",value:function(){return(0,x.tZ)(m.Z,null,(0,x.tZ)("p",null,(0,k.t)("Sorry, no events match your search query.")))}},{key:"renderEmpty",value:function(){return(0,x.tZ)(m.Z,null,(0,x.tZ)("p",null,(0,k.t)("There don't seem to be any events yet.")))}},{key:"renderResults",value:function(){var e=this.props,t=e.group,r=e.params,n=t.tags.filter((function(e){return"user"!==e.key}))||[];return(0,x.tZ)(C,{tagList:n,events:this.state.eventList,orgId:r.orgId,projectId:t.project.slug,groupId:r.groupId})}},{key:"renderBody",value:function(){return this.state.loading?(0,x.tZ)(O.Z,null):this.state.error?(0,x.tZ)(w.Z,{message:this.state.error,onRetry:this.fetchData}):this.state.eventList.length>0?this.renderResults():this.state.query&&""!==this.state.query?this.renderNoQueryResults():this.renderEmpty()}},{key:"render",value:function(){return(0,x.tZ)("div",null,(0,x.tZ)("div",{style:{marginBottom:20}},(0,x.tZ)(N.Z,{defaultQuery:"",placeholder:(0,k.t)("search event id, message, or tags"),query:this.state.query,onSearch:this.handleSearch})),(0,x.tZ)(I.s_,{className:"event-list"},(0,x.tZ)(I.N,null,this.renderBody())),(0,x.tZ)(q.Z,{pageLinks:this.state.pageLinks}))}}]),d}(c.Component);D.displayName="GroupEvents";const E=(0,B.Z)(D)}}]);
//# sourceMappingURL=GroupEvents.js.map