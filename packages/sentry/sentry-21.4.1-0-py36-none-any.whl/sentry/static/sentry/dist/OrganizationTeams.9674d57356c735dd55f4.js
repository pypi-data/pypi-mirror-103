(self.webpackChunk=self.webpackChunk||[]).push([["OrganizationTeams"],{"./app/actionCreators/teams.tsx":(e,t,n)=>{"use strict";n.d(t,{eM:()=>l,z_:()=>u,fs:()=>m,um:()=>d,s:()=>p,Cm:()=>f,tT:()=>g});var a=n("./app/actionCreators/indicator.tsx"),r=n("./app/actions/teamActions.tsx"),s=n("./app/locale.tsx"),o=n("./app/utils/callIfFunction.tsx"),i=n("./app/utils/guid.tsx"),c=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];o.g.apply(void 0,[e[t]].concat(a))};function l(e,t,n){return r.Z.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:function(e){r.Z.fetchDetailsSuccess(t.teamId,e),c(n,"success",e)},error:function(e){r.Z.fetchDetailsError(t.teamId,e),c(n,"error",e)}})}function u(e,t){r.Z.updateSuccess(e,t)}function m(e,t,n){var a="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return r.Z.update(t.teamId,t.data),e.request(a,{method:"PUT",data:t.data,success:function(e){u(t.teamId,e),c(n,"success",e)},error:function(e){r.Z.updateError(t.teamId,e),c(n,"error",e)}})}function d(e,t,n){var a,s="/organizations/".concat(t.orgId,"/members/").concat(null!==(a=t.memberId)&&void 0!==a?a:"me","/teams/").concat(t.teamId,"/"),o=(0,i.E)();return r.Z.update(o,t.teamId),e.request(s,{method:"POST",success:function(e){r.Z.updateSuccess(t.teamId,e),c(n,"success",e)},error:function(e){r.Z.updateError(o,t.teamId,e),c(n,"error",e)}})}function p(e,t,n){var a="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),s=(0,i.E)();return r.Z.update(s,t.teamId),e.request(a,{method:"DELETE",success:function(e){r.Z.updateSuccess(t.teamId,e),c(n,"success",e)},error:function(e){r.Z.updateError(s,t.teamId,e),c(n,"error",e)}})}function f(e,t,n){return r.Z.createTeam(t),e.requestPromise("/organizations/".concat(n.orgId,"/teams/"),{method:"POST",data:t}).then((function(e){return r.Z.createTeamSuccess(e),(0,a.S9)((0,s._N)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:n.orgId})),e}),(function(e){throw r.Z.createTeamError(t.slug,e),(0,a.Iw)((0,s._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:n.orgId})),e}))}function g(e,t){return r.Z.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((function(e){return r.Z.removeTeamSuccess(t.teamId,e),(0,a.S9)((0,s._N)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}),(function(e){throw r.Z.removeTeamError(t.teamId,e),(0,a.Iw)((0,s._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},"./app/components/sentryDocumentTitle.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i}),n("../node_modules/react/index.js");var a=n("../node_modules/react-document-title/index.js"),r=n.n(a),s=n("../node_modules/@emotion/core/dist/core.browser.esm.js");function o(e){var t=e.title,n=e.orgSlug,a=e.projectSlug,o=e.children,i=n||a?n&&a?"".concat(t," - ").concat(n," - ").concat(a):n?"".concat(t," - ").concat(n):"".concat(t," - ").concat(a):t;return(0,s.tZ)(r(),{title:"".concat(i," - Sentry")},o)}o.displayName="SentryDocumentTitle";const i=o},"./app/utils/recreateRoute.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n("../node_modules/lodash/findLastIndex.js"),r=n.n(a),s=n("./app/utils/replaceRouterParams.tsx");function o(e,t){var n,a,o,i,c=t.routes,l=t.params,u=t.location,m=t.stepBack,d=c.map((function(e){return e.path||""}));"string"!=typeof e?(i=c.indexOf(e)+1,o=r()(d.slice(0,i),(function(e){return"/"===e[0]}))):o=r()(d,(function(e){return"/"===e[0]}));var p=d.slice(o,i);void 0!==m&&(p=p.slice(0,m));var f=null!==(n=null==u?void 0:u.search)&&void 0!==n?n:"",g=null!==(a=null==u?void 0:u.hash)&&void 0!==a?a:"",Z="".concat(p.join("")).concat("string"!=typeof e?"":e).concat(f).concat(g);return(0,s.Z)(Z,l)}},"./app/utils/withTeams.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n("../node_modules/@babel/runtime/helpers/esm/extends.js"),r=(n("../node_modules/react/index.js"),n("../node_modules/create-react-class/index.js")),s=n.n(r),o=n("../node_modules/reflux/src/index.js"),i=n.n(o),c=n("./app/stores/teamStore.tsx"),l=n("./app/utils/getDisplayName.tsx"),u=n("../node_modules/@emotion/core/dist/core.browser.esm.js");const m=function(e){return s()({displayName:"withTeams(".concat((0,l.Z)(e),")"),mixins:[i().listenTo(c.Z,"onTeamUpdate")],getInitialState:function(){return{teams:c.Z.getAll()}},onTeamUpdate:function(){this.setState({teams:c.Z.getAll()})},render:function(){return(0,u.tZ)(e,(0,a.Z)({},this.props,{teams:this.state.teams}))}})}},"./app/views/settings/components/settingsPageHeader.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var a=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),m=n("../node_modules/react/index.js"),d=n("./app/styles/organization.tsx"),p=n("./app/styles/space.tsx"),f=n("../node_modules/@emotion/core/dist/core.browser.esm.js");var g=function(e){(0,o.Z)(u,e);var t,n,l=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function u(){return(0,r.Z)(this,u),l.apply(this,arguments)}return(0,s.Z)(u,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.subtitle,s=e.action,o=e.tabs,i=e.noTitleStyles,c=e.body,l=(0,a.Z)(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),u=!r;return(0,f.tZ)("div",l,(0,f.tZ)(Z,{isNarrow:u},(0,f.tZ)(h,null,t&&(0,f.tZ)(y,null,t),n&&(0,f.tZ)(b,{tabs:o,styled:i},(0,f.tZ)(d.Gh,null,n),r&&(0,f.tZ)(v,null,r))),s&&(0,f.tZ)(x,{isNarrow:u},s)),c&&(0,f.tZ)(z,null,c),o&&(0,f.tZ)(I,null,o))}}]),u}(m.Component);g.displayName="UnstyledSettingsPageHeader",(0,l.Z)(g,"defaultProps",{noTitleStyles:!1});var Z=(0,u.Z)("div",{target:"e1nr98yc0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),h=(0,u.Z)("div",{target:"e1nr98yc1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),b=(0,u.Z)("div",{target:"e1nr98yc2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",(0,p.Z)(4)," ",(0,p.Z)(2)," ",(0,p.Z)(3)," 0;"),v=(0,u.Z)("div",{target:"e1nr98yc3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,p.Z)(1.5)," 0 0;"),y=(0,u.Z)("div",{target:"e1nr98yc4",label:"Icon"})("margin-right:",(0,p.Z)(1),";"),x=(0,u.Z)("div",{target:"e1nr98yc5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":(0,p.Z)(4)}),";"),T=(0,u.Z)(g,{target:"e1nr98yc6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",(0,p.Z)(4),";"),z=(0,u.Z)("div",{target:"e1nr98yc7",label:"BodyWrapper"})("flex:1;margin:0 0 ",(0,p.Z)(3),";"),I=(0,u.Z)("div",{target:"e1nr98yc8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});const _=T},"./app/views/settings/organizationTeams/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{OrganizationTeamsContainer:()=>G,default:()=>V});var a=n("../node_modules/@babel/runtime/helpers/esm/extends.js"),r=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("../node_modules/react/index.js"),u=n("./app/actionCreators/projects.tsx"),m=n("./app/utils.tsx"),d=n("./app/utils/withApi.tsx"),p=n("./app/utils/withOrganization.tsx"),f=n("./app/utils/withTeams.tsx"),g=n("./app/actionCreators/modal.tsx"),Z=n("./app/components/button.tsx"),h=n("./app/components/panels/index.tsx"),b=n("./app/components/sentryDocumentTitle.tsx"),v=n("./app/icons/index.tsx"),y=n("./app/locale.tsx"),x=n("./app/utils/recreateRoute.tsx"),T=n("./app/views/settings/components/settingsPageHeader.tsx"),z=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),I=n("./app/views/settings/components/emptyMessage.tsx"),_=n("./app/views/settings/components/text/textBlock.tsx"),j=n("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),w=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),S=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),P=n("../node_modules/@babel/runtime/regenerator/index.js"),C=n.n(P),N=n("../node_modules/react-router/es/index.js"),k=n("./app/actionCreators/indicator.tsx"),R=n("./app/actionCreators/teams.tsx"),M=n("./app/components/idBadge/index.tsx"),q=n("./app/styles/space.tsx"),A=n("../node_modules/@emotion/core/dist/core.browser.esm.js");var E=function(e){(0,o.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function l(){var e;(0,r.Z)(this,l);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=a.call.apply(a,[this].concat(n)),(0,S.Z)((0,w.Z)(e),"state",{loading:!1,error:!1}),(0,S.Z)((0,w.Z)(e),"handleRequestAccess",(0,j.Z)(C().mark((function t(){var n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props.team;try{e.joinTeam({successMessage:(0,y._N)("You have requested access to [team]",{team:"#".concat(n.slug)}),errorMessage:(0,y._N)("Unable to request access to [team]",{team:"#".concat(n.slug)})})}catch(e){}case 2:case"end":return t.stop()}}),t)})))),(0,S.Z)((0,w.Z)(e),"handleJoinTeam",(function(){var t=e.props.team;e.joinTeam({successMessage:(0,y._N)("You have joined [team]",{team:"#".concat(t.slug)}),errorMessage:(0,y._N)("Unable to join [team]",{team:"#".concat(t.slug)})})})),(0,S.Z)((0,w.Z)(e),"joinTeam",(function(t){var n=t.successMessage,a=t.errorMessage,r=e.props,s=r.api,o=r.organization,i=r.team;return e.setState({loading:!0}),new Promise((function(t,r){return(0,R.um)(s,{orgId:o.slug,teamId:i.slug},{success:function(){e.setState({loading:!1,error:!1}),(0,k.S9)(n),t()},error:function(){e.setState({loading:!1,error:!0}),(0,k.Iw)(a),r(new Error("Unable to join team"))}})}))})),(0,S.Z)((0,w.Z)(e),"handleLeaveTeam",(function(){var t=e.props,n=t.api,a=t.organization,r=t.team;e.setState({loading:!0}),(0,R.s)(n,{orgId:a.slug,teamId:r.slug},{success:function(){e.setState({loading:!1,error:!1}),(0,k.S9)((0,y._N)("You have left [team]",{team:"#".concat(r.slug)}))},error:function(){e.setState({loading:!1,error:!0}),(0,k.Iw)((0,y._N)("Unable to leave [team]",{team:"#".concat(r.slug)}))}})})),e}return(0,s.Z)(l,[{key:"render",value:function(){var e=this.props,t=e.team,n=e.urlPrefix,a=e.openMembership,r=(0,A.tZ)(M.Z,{team:t,avatarSize:36,description:(0,y.tn)("%s Member","%s Members",t.memberCount)}),s=t.hasAccess;return(0,A.tZ)(B,null,(0,A.tZ)(U,null,s?(0,A.tZ)(L,{to:"".concat(n,"teams/").concat(t.slug,"/")},r):r),(0,A.tZ)(D,null,this.state.loading?(0,A.tZ)(Z.ZP,{size:"small",disabled:!0},"..."):t.isMember?(0,A.tZ)(Z.ZP,{size:"small",onClick:this.handleLeaveTeam},(0,y.t)("Leave Team")):t.isPending?(0,A.tZ)(Z.ZP,{size:"small",disabled:!0},(0,y.t)("Request Pending")):a?(0,A.tZ)(Z.ZP,{size:"small",onClick:this.handleJoinTeam},(0,y.t)("Join Team")):(0,A.tZ)(Z.ZP,{size:"small",onClick:this.handleRequestAccess},(0,y.t)("Request Access"))))}}]),l}(l.Component);E.displayName="AllTeamsRow";var L=(0,z.Z)(N.Link,{target:"epi3l7t0",label:"TeamLink"})("display:inline-block;&.focus-visible{margin:-",(0,q.Z)(1),";padding:",(0,q.Z)(1),";background:#f2eff5;border-radius:3px;outline:none;}");const O=(0,d.Z)(E);var B=(0,z.Z)(h.Lv,{target:"epi3l7t1",label:"TeamPanelItem"})({name:"chq20z",styles:"padding:0;align-items:center;"}),D=(0,z.Z)("div",{target:"epi3l7t2",label:"Spacer"})("padding:",(0,q.Z)(2),";"),U=(0,z.Z)(D,{target:"epi3l7t3",label:"TeamNameWrapper"})({name:"1rr4qq7",styles:"flex:1;"});function Y(e){var t=e.organization,n=e.urlPrefix,a=e.openMembership,r=e.teamList,s=e.access,o=r.map((function(e){return(0,A.tZ)(O,{urlPrefix:n,team:e,organization:t,openMembership:a,key:e.slug})}));if(!o.length){var i=s.has("project:admin");return(0,A.tZ)(I.Z,null,(0,y._N)("No teams here. [teamCreate]",{root:(0,A.tZ)(_.Z,{noMargin:!0}),teamCreate:i?(0,y._N)("You can always [link:create one].",{link:(0,A.tZ)(H,{priority:"link",onClick:function(){return(0,g.openCreateTeamModal)({organization:t})}})}):null}))}return(0,A.tZ)(l.Fragment,null,o)}Y.displayName="AllTeamsList";const W=Y;var H=(0,z.Z)(Z.ZP,{target:"e10i0msm0",label:"StyledButton"})("font-size:",(function(e){return e.theme.fontSizeLarge}),";");function J(e){var t=e.allTeams,n=e.activeTeams,a=e.organization,r=e.access,s=e.features,o=e.routes,i=e.params;if(!a)return null;var c=r.has("project:admin"),l=(0,A.tZ)(Z.ZP,{priority:"primary",size:"small",disabled:!c,title:c?void 0:(0,y.t)("You do not have permission to create teams"),onClick:function(){return(0,g.openCreateTeamModal)({organization:a})},icon:(0,A.tZ)(v.N_,{size:"xs",isCircled:!0})},(0,y.t)("Create Team")),u=o.find((function(e){return"teams/"===e.path})),m=u?(0,x.Z)(u,{routes:o,params:i,stepBack:-2}):"",d=new Set(n.map((function(e){return e.id}))),p=t.filter((function(e){return!d.has(e.id)})),f=(0,y.t)("Teams");return(0,A.tZ)("div",{"data-test-id":"team-list"},(0,A.tZ)(b.Z,{title:f,orgSlug:a.slug}),(0,A.tZ)(T.Z,{title:f,action:l}),(0,A.tZ)(h.s_,null,(0,A.tZ)(h.V9,null,(0,y.t)("Your Teams")),(0,A.tZ)(h.N,null,(0,A.tZ)(W,{urlPrefix:m,organization:a,teamList:n,access:r,openMembership:!1}))),(0,A.tZ)(h.s_,null,(0,A.tZ)(h.V9,null,(0,y.t)("Other Teams")),(0,A.tZ)(h.N,null,(0,A.tZ)(W,{urlPrefix:m,organization:a,teamList:p,access:r,openMembership:!(!s.has("open-membership")&&!r.has("org:write"))}))))}J.displayName="OrganizationTeams";const F=J;var G=function(e){(0,o.Z)(d,e);var t,n,l=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function d(){return(0,r.Z)(this,d),l.apply(this,arguments)}return(0,s.Z)(d,[{key:"componentDidMount",value:function(){this.fetchStats()}},{key:"fetchStats",value:function(){(0,u.Nh)(this.props.api,{orgId:this.props.params.orgId,query:{since:((new Date).getTime()/1e3-86400).toString(),stat:"generated",group:"project"}})}},{key:"render",value:function(){var e=this.props,t=e.organization,n=e.teams;if(!t)return null;var r=(0,m.qr)(n,(function(e){return e.name})),s=r.filter((function(e){return e.isMember}));return(0,A.tZ)(F,(0,a.Z)({},this.props,{access:new Set(t.access),features:new Set(t.features),organization:t,allTeams:r,activeTeams:s}))}}]),d}(l.Component);G.displayName="OrganizationTeamsContainer";const V=(0,d.Z)((0,p.Z)((0,f.Z)(G)))}}]);
//# sourceMappingURL=OrganizationTeams.js.map