(self.webpackChunk=self.webpackChunk||[]).push([["ProjectAlertsCreate"],{"./app/views/settings/projectAlerts/create.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U});var n=r("../node_modules/@babel/runtime/helpers/esm/extends.js"),s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=r("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),d=r("../node_modules/react/index.js"),m=r("./app/components/layouts/thirds.tsx"),f=r("./app/components/sentryDocumentTitle.tsx"),Z=r("./app/locale.tsx"),h=r("./app/styles/space.tsx"),g=r("./app/utils/analytics.tsx"),y=r("./app/utils/discover/eventView.tsx"),v=r("./app/utils/guid.tsx"),b=r("./app/views/alerts/builder/builderBreadCrumbs.tsx"),w=r("./app/views/alerts/wizard/options.tsx"),x=r("./app/views/alerts/wizard/utils.tsx"),j=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),C=r("./app/utils/withTeams.tsx"),T=r("./app/views/settings/incidentRules/constants.tsx"),_=r("./app/views/settings/incidentRules/ruleForm/index.tsx"),S=r("../node_modules/@emotion/core/dist/core.browser.esm.js");function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=function(e){(0,a.Z)(d,e);var t,r,p=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var s=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function d(){var e;(0,s.Z)(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,c.Z)((0,i.Z)(e),"handleSubmitSuccess",(function(){var t=e.props.router,r=e.props.params.orgId;g.oF.endTransaction({name:"saveAlertRule"}),t.push("/organizations/".concat(r,"/alerts/rules/"))})),e}return(0,o.Z)(d,[{key:"render",value:function(){var e=this.props,t=e.project,r=e.eventView,s=e.wizardTemplate,o=e.sessionId,i=e.teams,a=(0,j.Z)(e,["project","eventView","wizardTemplate","sessionId","teams"]),l=r?(0,T.H9)(r):s?(0,T.Q6)(s):(0,T.ep)(),u=i.filter((function(e){return e.isMember})).map((function(e){return e.id})),c=new Set(u);if(a.organization.features.includes("team-alerts-ownership")){var p,d=new Set(t.teams.map((function(e){return e.id}))),m=null!==(p=u.find((function(e){return d.has(e)})))&&void 0!==p?p:null;l.owner=m&&"team:".concat(m)}return(0,S.tZ)(_.Z,(0,n.Z)({onSubmitSuccess:this.handleSubmitSuccess,rule:A(A({},l),{},{projects:[t.slug]}),sessionId:o,project:t,userTeamIds:c},a))}}]),d}(d.Component);I.displayName="IncidentRulesCreate";const O=(0,C.Z)(I);var R=r("./app/views/settings/projectAlerts/issueRuleEditor/index.tsx"),k=r("./app/components/acl/feature.tsx"),N=r("./app/components/card.tsx"),F=r("./app/components/list/index.tsx"),P=r("./app/components/list/listItem.tsx"),E=r("./app/components/radio.tsx"),D=r("./app/components/tooltip.tsx"),V=r("./app/styles/text.tsx"),q=function(e){var t=e.children;return(0,S.tZ)(D.Z,{title:(0,Z.t)("A metric is the value of an aggregate function like count() or avg()\n       applied to your events over time")},(0,S.tZ)("abbr",null,t))};q.displayName="MetricsTooltip";var B=function(e){var t=e.children;return(0,S.tZ)(D.Z,{title:(0,Z.t)("Sentry groups similar events into an Issue based on their stack trace\n       and other factors.")},(0,S.tZ)("abbr",null,t))};B.displayName="IssuesTooltip";var M=function(e){var t=e.onChange,r=e.organization,n=e.selected,s=function(e){(0,g.ec)({eventKey:"alert_chooser_cards.select",eventName:"Alert Chooser Cards: Select",organization_id:r.id,type:e}),t(e)};return(0,S.tZ)(K,null,(0,S.tZ)(L,{interactive:!0,onClick:function(){return s("metric")}},(0,S.tZ)(W,null,(0,S.tZ)(E.Z,{"aria-label":"metric",checked:"metric"===n,onChange:function(){return s("metric")}}),(0,Z.t)("Metric Alert")),(0,S.tZ)(k.Z,{requireAll:!0,features:["organizations:performance-view"]},(function(e){return e.hasFeature?(0,S.tZ)(d.Fragment,null,(0,S.tZ)("p",null,(0,Z._N)("Notifies you when a [tooltip:metric] crosses a threshold.",{tooltip:(0,S.tZ)(q,null)})),!n&&(0,S.tZ)(d.Fragment,null,(0,S.tZ)(H,null,(0,Z.t)("For Example:")),(0,S.tZ)(F.Z,{symbol:"bullet"},(0,S.tZ)(P.Z,null,(0,Z.t)("Performance metrics like latency and apdex")),(0,S.tZ)(P.Z,null,(0,Z.t)("Frequency of error events or users affected in the project"))))):(0,S.tZ)(d.Fragment,null,(0,S.tZ)("p",null,(0,Z._N)("Notifies you when a [tooltip:metric] like frequency of events or users affected in\n                   the project crosses a threshold.",{tooltip:(0,S.tZ)(q,null)})),!n&&(0,S.tZ)(d.Fragment,null,(0,S.tZ)(H,null,(0,Z.t)("For Example:")),(0,S.tZ)(F.Z,{symbol:"bullet"},(0,S.tZ)(P.Z,null,(0,Z.t)("Total events in the project exceed 1000/minute")),(0,S.tZ)(P.Z,null,(0,Z._N)('Events with tag [code:database] and "API" in the title exceed 100/minute',{code:(0,S.tZ)("code",null)})))))}))),(0,S.tZ)(L,{interactive:!0,onClick:function(){return s("issue")}},(0,S.tZ)(W,null,(0,S.tZ)(E.Z,{"aria-label":"issue",checked:"issue"===n,onChange:function(){return s("issue")}}),(0,Z.t)("Issue Alert")),(0,S.tZ)("p",null,(0,Z._N)("Notifies you when individual [tooltip:Sentry Issues] trigger your\n           alerting criteria.",{tooltip:(0,S.tZ)(B,null)})),!n&&(0,S.tZ)(d.Fragment,null,(0,S.tZ)(H,null,(0,Z.t)("For Example:")),(0,S.tZ)(F.Z,{symbol:"bullet"},(0,S.tZ)(P.Z,null,(0,Z.t)("New Issues or regressions")),(0,S.tZ)(P.Z,null,(0,Z.t)("Frequency of individual Issues exceeds 100/minute"))))))};M.displayName="TypeChooser";var W=(0,p.Z)("label",{target:"e1y238530",label:"RadioLabel"})("cursor:pointer;margin-bottom:",(0,h.Z)(3),";display:grid;grid-auto-flow:column;grid-auto-columns:max-content;align-items:center;grid-gap:",(0,h.Z)(2),";"),H=(0,p.Z)("div",{target:"e1y238531",label:"ExampleHeading"})("text-transform:uppercase;font-size:",(function(e){return e.theme.fontSizeSmall}),";font-weight:bold;color:",(function(e){return e.theme.subText}),";margin-bottom:",(0,h.Z)(2),";"),K=(0,p.Z)("div",{target:"e1y238532",label:"Container"})("display:grid;grid-template-columns:1fr 1fr;grid-gap:",(0,h.Z)(3),";"),L=(0,p.Z)(N.Z,{target:"e1y238533",label:"TypeCard"})("cursor:pointer;padding:",(0,h.Z)(4),";margin-bottom:",(0,h.Z)(3),";",V.Z,";");const Q=M;var G=function(e){(0,a.Z)(h,e);var t,r,p=(t=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var s=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function h(){var e;(0,s.Z)(this,h);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=p.call.apply(p,[this].concat(r)),(0,c.Z)((0,i.Z)(e),"state",{eventView:void 0,alertType:e.props.location.pathname.includes("/alerts/rules/")?"issue":e.props.location.pathname.includes("/alerts/metric-rules/")?"metric":null}),(0,c.Z)((0,i.Z)(e),"sessionId",(0,v.E)()),(0,c.Z)((0,i.Z)(e),"handleChangeAlertType",(function(t){e.setState({alertType:t})})),e}return(0,o.Z)(h,[{key:"componentDidMount",value:function(){var e=this.props,t=e.organization,r=e.location,n=e.project;if((0,g.ec)({eventKey:"new_alert_rule.viewed",eventName:"New Alert Rule: Viewed",organization_id:t.id,project_id:n.id,session_id:this.sessionId}),null!=r&&r.query){var s=r.query,o=s.createFromDiscover,i=s.createFromWizard;if(o){var a=y.ZP.fromLocation(r);this.setState({alertType:"metric",eventView:a})}else if(i){var l=s.aggregate,u=s.dataset,c=s.eventTypes;l&&u&&c?this.setState({alertType:"metric",wizardTemplate:{aggregate:l,dataset:u,eventTypes:c}}):this.setState({alertType:"issue"})}}}},{key:"render",value:function(){var e,t,r=this.props,s=r.hasMetricAlerts,o=r.organization,i=r.project,a=r.params.projectId,l=r.location,u=this.state,c=u.alertType,p=u.eventView,h=u.wizardTemplate,g=o.features.includes("alert-wizard"),y=s&&!g;null!=l&&null!==(e=l.query)&&void 0!==e&&e.createFromWizard&&(t=h?(0,x.k)(h):"issues");var v=(0,Z.t)("New Alert Rule");return(0,S.tZ)(d.Fragment,null,(0,S.tZ)(f.Z,{title:v,projectSlug:a}),(0,S.tZ)(m.h4,null,(0,S.tZ)(m.oB,null,(0,S.tZ)(b.Z,{hasMetricAlerts:s,orgSlug:o.slug,alertName:t&&w.gb[t],title:t?(0,Z.t)("Create Alert Rule"):v,projectSlug:a}),(0,S.tZ)(m.Dx,null,t?(0,Z.t)("Set Alert Conditions"):v))),(0,S.tZ)(J,null,(0,S.tZ)(m.or,{fullWidth:!0},y&&(0,S.tZ)(Q,{organization:o,selected:c,onChange:this.handleChangeAlertType}),(!s||"issue"===c)&&(0,S.tZ)(R.Z,(0,n.Z)({},this.props,{project:i})),s&&"metric"===c&&(0,S.tZ)(O,(0,n.Z)({},this.props,{eventView:p,wizardTemplate:h,sessionId:this.sessionId,project:i})))))}}]),h}(d.Component);G.displayName="Create";var J=(0,p.Z)(m.uT,{target:"es9d0800",label:"AlertConditionsBody"})("margin-bottom:-",(0,h.Z)(3),";*:not(img){max-width:1000px;}");const U=G}}]);
//# sourceMappingURL=ProjectAlertsCreate.js.map