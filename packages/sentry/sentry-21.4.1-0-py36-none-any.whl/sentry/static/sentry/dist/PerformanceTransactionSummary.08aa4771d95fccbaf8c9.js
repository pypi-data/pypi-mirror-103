(self.webpackChunk=self.webpackChunk||[]).push([["PerformanceTransactionSummary"],{"./app/views/performance/breadcrumb.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),s=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../node_modules/react/index.js"),u=n("./app/components/breadcrumbs.tsx"),p=n("./app/locale.tsx"),d=n("./app/utils/queryString.tsx"),m=n("./app/views/performance/transactionSummary/utils.tsx"),f=n("./app/views/performance/transactionVitals/utils.tsx"),g=n("./app/views/performance/vitalDetail/utils.tsx"),v=n("./app/views/performance/utils.tsx"),y=n("../node_modules/@emotion/core/dist/core.browser.esm.js");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e){(0,i.Z)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var a=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function c(){return(0,a.Z)(this,c),r.apply(this,arguments)}return(0,o.Z)(c,[{key:"getCrumbs",value:function(){var e=[],t=this.props,n=t.organization,r=t.location,a=t.transactionName,o=t.vitalName,i=t.eventSlug,s=t.traceSlug,l=t.transactionComparison,c=t.realUserMonitoring,u={pathname:(0,v.de)(n),query:b(b({},r.query),{},{transaction:void 0})};if(e.push({to:u,label:(0,p.t)("Performance"),preserveGlobalSelection:!0}),o){var y=(0,g.i4)({orgSlug:n.slug,vitalName:"fcp",projectID:(0,d.ro)(r.query.project),query:r.query});e.push({to:y,label:(0,p.t)("Vital Detail"),preserveGlobalSelection:!0})}else if(a)if(c){var h=(0,f.Pl)({orgSlug:n.slug,transaction:a,projectID:(0,d.ro)(r.query.project),query:r.query});e.push({to:h,label:(0,p.t)("Web Vitals"),preserveGlobalSelection:!0})}else{var Z=(0,m.e1)({orgSlug:n.slug,transaction:a,projectID:(0,d.ro)(r.query.project),query:r.query});e.push({to:Z,label:(0,p.t)("Transaction Summary"),preserveGlobalSelection:!0})}return a&&i?e.push({to:"",label:(0,p.t)("Event Details")}):l?e.push({to:"",label:(0,p.t)("Compare to Baseline")}):s&&e.push({to:"",label:(0,p.t)("Trace View")}),e}},{key:"render",value:function(){return(0,y.tZ)(u.Z,{crumbs:this.getCrumbs()})}}]),c}(c.Component);Z.displayName="Breadcrumb";const x=Z},"./app/views/performance/transactionSummary/header.tsx":(e,t,n)=>{"use strict";n.d(t,{O:()=>z,Z:()=>I});var r=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),s=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),p=n("../node_modules/react/index.js"),d=n("./app/components/acl/feature.tsx"),m=n("./app/components/button.tsx"),f=n("./app/components/buttonBar.tsx"),g=n("./app/components/createAlertButton.tsx"),v=n("./app/components/layouts/thirds.tsx"),y=n("./app/components/links/listLink.tsx"),h=n("./app/components/navTabs.tsx"),b=n("./app/icons/index.tsx"),Z=n("./app/locale.tsx"),x=n("./app/utils/analytics.tsx"),w=n("./app/utils/queryString.tsx"),j=n("./app/views/performance/breadcrumb.tsx"),O=n("./app/views/performance/transactionVitals/utils.tsx"),k=n("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),P=n("./app/actionCreators/performance.tsx"),S=n("./app/utils/withApi.tsx"),C=n("../node_modules/@emotion/core/dist/core.browser.esm.js");var T=function(e){(0,i.Z)(p,e);var t,n,u=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var a=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function p(){var e;(0,r.Z)(this,p);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=u.call.apply(u,[this].concat(n)),(0,c.Z)((0,o.Z)(e),"state",{isLoading:!0,keyFetchID:void 0,error:null,isKeyTransaction:!1}),(0,c.Z)((0,o.Z)(e),"fetchData",(function(){var t=e.props,n=t.organization,r=t.eventView,a=t.transactionName,o=r.project;if(1===o.length){var i="/organizations/".concat(n.slug,"/is-key-transactions/"),s=Symbol("keyFetchID");e.setState({isLoading:!0,keyFetchID:s}),e.props.api.requestPromise(i,{method:"GET",includeAllArgs:!0,query:{project:o.map((function(e){return String(e)})),transaction:a}}).then((function(t){var n=(0,k.Z)(t,3),r=n[0];n[1],n[2],e.state.keyFetchID===s&&e.setState({isLoading:!1,keyFetchID:void 0,error:null,isKeyTransaction:!(null==r||!r.isKey)})})).catch((function(t){var n,r;e.setState({isLoading:!1,keyFetchID:void 0,error:null!==(n=null===(r=t.responseJSON)||void 0===r?void 0:r.detail)&&void 0!==n?n:null,isKeyTransaction:!1})}))}})),(0,c.Z)((0,o.Z)(e),"toggleKeyTransactionHandler",(function(){var t=e.props,n=t.eventView,r=t.api,a=t.organization,o=t.transactionName,i=e.state.isKeyTransaction,s=n.project;(0,x.ec)({eventName:"Performance Views: Key Transaction toggle",eventKey:"performance_views.key_transaction.toggle",orgId:parseInt(a.id,10),action:i?"remove":"add"}),(0,P.F)(r,i,a.slug,s,o).then((function(){e.setState({isKeyTransaction:!i})}))})),e}return(0,a.Z)(p,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=e.organization.slug!==this.props.organization.slug,n=1===e.eventView.project.length&&1===this.props.eventView.project.length&&e.eventView.project[0]!==this.props.eventView.project[0];(t||n)&&this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.isKeyTransaction,n=e.isLoading;return 1!==this.props.eventView.project.length||n?null:(0,C.tZ)(m.ZP,{icon:t?(0,C.tZ)(b.GK,{color:"yellow300",isSolid:!0}):(0,C.tZ)(b.GK,null),onClick:this.toggleKeyTransactionHandler},(0,Z.t)("Key Transaction"))}}]),p}(p.Component);T.displayName="KeyTransactionButton";const V=(0,S.Z)(T);var z,D=n("./app/views/performance/transactionSummary/utils.tsx");!function(e){e[e.TransactionSummary=0]="TransactionSummary",e[e.RealUserMonitoring=1]="RealUserMonitoring"}(z||(z={}));var q=function(e){(0,i.Z)(h,e);var t,n,u=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var a=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function h(){var e;(0,r.Z)(this,h);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=u.call.apply(u,[this].concat(n)),(0,c.Z)((0,o.Z)(e),"trackVitalsTabClick",(function(){var t=e.props.organization;(0,x.ec)({eventKey:"performance_views.vitals.vitals_tab_clicked",eventName:"Performance Views: Vitals tab clicked",organization_id:t.id})})),(0,c.Z)((0,o.Z)(e),"handleIncompatibleQuery",(function(t,n){var r,a;e.trackAlertClick(n),null===(r=(a=e.props).handleIncompatibleQuery)||void 0===r||r.call(a,t,n)})),(0,c.Z)((0,o.Z)(e),"handleCreateAlertSuccess",(function(){e.trackAlertClick()})),e}return(0,a.Z)(h,[{key:"trackAlertClick",value:function(e){var t=this.props.organization;(0,x.ec)({eventKey:"performance_views.summary.create_alert_clicked",eventName:"Performance Views: Create alert clicked",organization_id:t.id,status:e?"error":"success",errors:e,url:window.location.href})}},{key:"renderCreateAlertButton",value:function(){var e=this.props,t=e.eventView,n=e.organization,r=e.projects;return(0,C.tZ)(g.K,{eventView:t,organization:n,projects:r,onIncompatibleQuery:this.handleIncompatibleQuery,onSuccess:this.handleCreateAlertSuccess,referrer:"performance"})}},{key:"renderKeyTransactionButton",value:function(){var e=this.props,t=e.eventView,n=e.organization,r=e.transactionName;return(0,C.tZ)(V,{transactionName:r,eventView:t,organization:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.organization,r=t.location,a=t.transactionName,o=t.currentTab,i=t.hasWebVitals,s=(0,D.e1)({orgSlug:n.slug,transaction:a,projectID:(0,w.ro)(r.query.project),query:r.query}),l=(0,O.Pl)({orgSlug:n.slug,transaction:a,projectID:(0,w.ro)(r.query.project),query:r.query});return(0,C.tZ)(v.h4,null,(0,C.tZ)(v.oB,null,(0,C.tZ)(j.Z,{organization:n,location:r,transactionName:a,realUserMonitoring:o===z.RealUserMonitoring}),(0,C.tZ)(v.Dx,null,a)),(0,C.tZ)(v.kP,null,(0,C.tZ)(f.Z,{gap:1},(0,C.tZ)(d.Z,{organization:n,features:["incidents"]},(function(t){return t.hasFeature&&e.renderCreateAlertButton()})),this.renderKeyTransactionButton(),(0,C.tZ)(m.ZP,{href:"/settings/".concat(n.slug,"/performance/"),icon:(0,C.tZ)(b.iC,null),"aria-label":"Settings"}))),(0,C.tZ)(p.Fragment,null,(0,C.tZ)(_,null,(0,C.tZ)(y.Z,{to:s,isActive:function(){return o===z.TransactionSummary}},(0,Z.t)("Overview")),i&&(0,C.tZ)(y.Z,{to:l,isActive:function(){return o===z.RealUserMonitoring},onClick:this.trackVitalsTabClick},(0,Z.t)("Web Vitals")))))}}]),h}(p.Component);q.displayName="TransactionHeader";var _=(0,u.Z)(h.Z,{target:"ega7at50",label:"StyledNavTabs"})({name:"n8i8z8",styles:"margin-bottom:0;width:100%;"});const I=q},"./app/views/performance/transactionSummary/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Rt});var r=n("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),a=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),s=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),d=n("../node_modules/react/index.js"),m=n("../node_modules/react-router/es/index.js"),f=n("../node_modules/lodash/isEqual.js"),g=n.n(f),v=n("./app/actionCreators/tags.tsx"),y=n("./app/components/lightWeightNoProjectMessage.tsx"),h=n("./app/components/organizations/globalSelectionHeader/index.tsx"),b=n("./app/components/sentryDocumentTitle.tsx"),Z=n("./app/locale.tsx"),x=n("./app/styles/organization.tsx"),w=n("./app/utils/discover/discoverQuery.tsx"),j=n("./app/utils/discover/eventView.tsx"),O=n("./app/utils/discover/fields.tsx"),k=n("./app/utils/performance/histogram/index.tsx"),P=n("./app/utils/queryString.tsx"),S=n("./app/utils/tokenizeSearch.tsx"),C=n("./app/utils/withApi.tsx"),T=n("./app/utils/withGlobalSelection.tsx"),V=n("./app/utils/withOrganization.tsx"),z=n("./app/utils/withProjects.tsx"),D=n("./app/views/performance/transactionVitals/constants.tsx"),q=n("./app/views/performance/utils.tsx"),_=n("../node_modules/@babel/runtime/helpers/esm/extends.js"),I=n("../node_modules/lodash/omit.js"),N=n.n(I),L=n("./app/components/acl/feature.tsx"),A=n("./app/components/discover/transactionsList.tsx"),R=n("./app/components/events/searchBar.tsx"),E=n("./app/components/globalSdkUpdateAlert.tsx"),F=n("./app/components/layouts/thirds.tsx"),B=n("./app/components/organizations/globalSelectionHeader/getParams.tsx"),K=n("./app/constants/index.tsx"),M=n("./app/styles/space.tsx"),W=n("./app/utils.tsx"),U=n("./app/utils/analytics.tsx"),H=n("./app/utils/discover/urls.tsx"),Q=n("./app/views/eventsV2/table/cellAction.tsx"),$=n("./app/views/eventsV2/tags.tsx"),G=n("./app/views/performance/traceDetails/utils.tsx"),J=n("./app/views/performance/transactionSummary/charts.tsx"),Y=n("./app/views/performance/transactionSummary/filter.tsx"),X=n("./app/views/performance/transactionSummary/header.tsx"),ee=n("../node_modules/lodash/pick.js"),te=n.n(ee),ne=n("./app/components/button.tsx"),re=n("./app/components/charts/styles.tsx"),ae=n("./app/components/emptyStateWarning.tsx"),oe=n("./app/components/issues/groupList.tsx"),ie=n("./app/components/panels/index.tsx"),se=n("./app/constants/globalSelectionHeader.tsx"),le=n("../node_modules/@emotion/core/dist/core.browser.esm.js");function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(e){(0,s.Z)(m,e);var t,n,p=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function m(){var e;(0,a.Z)(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=p.call.apply(p,[this].concat(n)),(0,u.Z)((0,i.Z)(e),"handleOpenClick",(function(){var t=e.props.organization;(0,U.ec)({eventKey:"performance_views.summary.open_issues",eventName:"Performance Views: Open issues from transaction summary",organization_id:parseInt(t.id,10)})})),(0,u.Z)((0,i.Z)(e),"renderEmptyMessage",(function(){var t=e.props.statsPeriod,n=t&&K.wh[t],r=n?n.toLowerCase():(0,Z.t)("given timeframe");return(0,le.tZ)(ie.s_,null,(0,le.tZ)(ie.N,null,(0,le.tZ)(ae.Z,null,(0,le.tZ)("p",null,(0,Z._N)("No new issues for this transaction for the [timePeriod].",{timePeriod:r})))))})),e}return(0,o.Z)(m,[{key:"getIssuesEndpoint",value:function(){var e=this.props,t=e.transaction,n=e.organization,a=e.start,o=e.end,i=e.statsPeriod,s=e.location,l=ue({start:a,end:o,statsPeriod:i,limit:5,sort:"new"},te()(s.query,[].concat((0,r.Z)(Object.values(se.nF)),["cursor"]))),c=(0,S.aI)((0,P.ro)(s.query.query,""));return c.getTagKeys().forEach((function(e){(e.match(/\w+\(.*\)/)||O.J8.includes(e)||"event.type"===e)&&c.removeTag(e)})),c.addQuery("is:unresolved").setTagValues("transaction",[t]),{path:"/organizations/".concat(n.slug,"/issues/"),queryParams:ue(ue({},l),{},{query:(0,S.gZ)(c)})}}},{key:"render",value:function(){var e=this.props.organization,t=this.getIssuesEndpoint(),n=t.path,r=t.queryParams,a={pathname:"/organizations/".concat(e.slug,"/issues/"),query:r};return(0,le.tZ)(d.Fragment,null,(0,le.tZ)(de,null,(0,le.tZ)(re.OT,null,(0,Z.t)("Related Issues")),(0,le.tZ)(ne.ZP,{"data-test-id":"issues-open",size:"small",to:a,onClick:this.handleOpenClick},(0,Z.t)("Open in Issues"))),(0,le.tZ)(me,null,(0,le.tZ)(oe.Z,{orgId:e.slug,endpointPath:n,queryParams:r,query:"",canSelectGroups:!1,renderEmptyMessage:this.renderEmptyMessage,withChart:!1,withPagination:!1})))}}]),m}(d.Component);pe.displayName="RelatedIssues";var de=(0,p.Z)("div",{target:"epdyig70",label:"ControlsWrapper"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,M.Z)(1),";"),me=(0,p.Z)("div",{target:"epdyig71",label:"TableWrapper"})("margin-bottom:",(0,M.Z)(4),";",ie.s_,"{margin-bottom:-",(0,M.Z)(1),";}");const fe=pe;var ge=n("../node_modules/emotion-theming/dist/emotion-theming.browser.esm.js"),ve=n("./app/components/charts/chartZoom.tsx"),ye=n("./app/components/charts/errorPanel.tsx"),he=n("./app/components/charts/eventsRequest.tsx"),be=n("./app/components/charts/lineChart.tsx"),Ze=n("./app/components/charts/transitionChart.tsx"),xe=n("./app/components/charts/transparentLoadingMask.tsx"),we=n("./app/components/charts/utils.tsx"),je=n("./app/components/placeholder.tsx"),Oe=n("./app/components/questionTooltip.tsx"),ke=n("./app/icons/index.tsx"),Pe=n("./app/utils/dates.tsx"),Se=n("./app/utils/discover/charts.tsx"),Ce=n("./app/utils/formatters.tsx"),Te=n("./app/views/performance/data.tsx");function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e){var t=e.theme,n=e.api,r=e.location,a=e.eventView,o=e.organization,i=e.router,s=e.isLoading,l=e.error,c=e.totals,u=a.statsPeriod,p=a.start?(0,Pe.hC)(a.start):void 0,d=a.end?(0,Pe.hC)(a.end):void 0,m=(0,B.Q)(r.query).utc,f=t.charts.getColorPalette(3),g={scale:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},v={height:480,grid:[{top:"60px",left:"10px",right:"10px",height:"100px"},{top:"220px",left:"10px",right:"10px",height:"100px"},{top:"380px",left:"10px",right:"10px",height:"120px"}],axisPointer:{link:[{xAxisIndex:[0,1,2]}]},xAxes:Array.from(new Array(3)).map((function(e,t){return{gridIndex:t,type:"time",show:!1}})),yAxes:[ze({gridIndex:0,interval:.2,axisLabel:{formatter:function(e){return(0,Ce.$1)(e,1)},color:t.chartLabel}},g),ze({gridIndex:1,splitNumber:4,interval:.5,max:1,axisLabel:{formatter:function(e){return(0,Ce.rl)(e,0)},color:t.chartLabel}},g),ze({gridIndex:2,splitNumber:4,axisLabel:{formatter:Ce.Du,color:t.chartLabel}},g)],utc:"true"===m,isGroupedByDate:!0,showTimeInTooltip:!0,colors:[f[0],f[1],f[2]],tooltip:{trigger:"axis",truncate:80,valueFormatter:Se.CX,nameFormatter:function(e){return"epm()"===e?"tpm()":e}}},y={start:p||null,end:d||null,period:u},h=a.project,b=a.environment,x=o.apdexThreshold;return(0,le.tZ)(_e,null,(0,le.tZ)(Ne,{top:"0px"},(0,le.tZ)(Ie,null,(0,Z.t)("Apdex"),(0,le.tZ)(Oe.Z,{position:"top",title:(0,Te.$r)(o,Te.V$.APDEX),size:"sm"})),(0,le.tZ)(qe,{isLoading:s,error:l,value:c?(0,Ce.$1)(c["apdex_".concat(x)],4):null})),(0,le.tZ)(Ne,{top:"160px"},(0,le.tZ)(Ie,null,(0,Z.t)("Failure Rate"),(0,le.tZ)(Oe.Z,{position:"top",title:(0,Te.$r)(o,Te.V$.FAILURE_RATE),size:"sm"})),(0,le.tZ)(qe,{isLoading:s,error:l,value:c?(0,Ce.rl)(c.failure_rate):null})),(0,le.tZ)(Ne,{top:"320px"},(0,le.tZ)(Ie,null,(0,Z.t)("TPM"),(0,le.tZ)(Oe.Z,{position:"top",title:(0,Te.$r)(o,Te.V$.TPM),size:"sm"})),(0,le.tZ)(qe,{isLoading:s,error:l,value:c?(0,Z._N)("[tpm] tpm",{tpm:(0,Ce.$1)(c.tpm,4)}):null})),(0,le.tZ)(ve.Z,{router:i,period:u,start:p,end:d,utc:"true"===m,xAxisIndex:[0,1,2]},(function(e){return(0,le.tZ)(he.Z,{api:n,organization:o,period:u,project:h,environment:b,start:p,end:d,interval:(0,we.ZS)(y),showLoading:!1,query:a.query,includePrevious:!1,yAxis:["apdex(".concat(o.apdexThreshold,")"),"failure_rate()","epm()"],partial:!0},(function(t){var n=t.results,r=t.errored,a=t.loading,o=t.reloading;if(r)return(0,le.tZ)(ye.Z,{height:"580px"},(0,le.tZ)(ke.FC,{color:"gray300",size:"lg"}));var i=n?n.map((function(e,t){return ze(ze({},e),{},{yAxisIndex:t,xAxisIndex:t})})):[];return(0,le.tZ)(Ze.Z,{loading:a,reloading:o,height:"580px"},(0,le.tZ)(xe.Z,{visible:o}),(0,le.tZ)(be.Z,(0,_.Z)({},e,v,{series:i})))}))})))}function qe(e){var t=e.error,n=e.isLoading,r=e.value;return t?(0,le.tZ)("div",null,"—"):n?(0,le.tZ)(je.Z,{height:"24px"}):(0,le.tZ)(Le,null,r)}De.displayName="SidebarCharts";var _e=(0,p.Z)("div",{target:"e9e62cr0",label:"RelativeBox"})({name:"79elbk",styles:"position:relative;"}),Ie=(0,p.Z)(re.OT,{target:"e9e62cr1",label:"ChartTitle"})({name:"1uk1gs8",styles:"margin:0;"}),Ne=(0,p.Z)("div",{target:"e9e62cr2",label:"ChartLabel"})("position:absolute;top:",(function(e){return e.top}),";z-index:1;"),Le=(0,p.Z)("div",{target:"e9e62cr3",label:"ChartValue"})("font-size:",(function(e){return e.theme.fontSizeExtraLarge}),";");const Ae=(0,C.Z)((0,ge.Zz)(m.withRouter(De)));function Re(e){var t=e.data,n=t.reduce((function(e,t){return t.value+e}),0);return(0,le.tZ)(Fe,null,t.map((function(e,t){return(0,le.tZ)(d.Fragment,{key:"".concat(t,":").concat(e.label)},(0,le.tZ)(Be,null,(0,Ce.rl)(e.value/n,0)),(0,le.tZ)(Ke,null,(0,le.tZ)(We,{style:{width:"".concat((e.value/n*100).toFixed(2),"%")}}),(0,le.tZ)(Me,null,e.label)))})))}Re.displayName="BreakdownBars";const Ee=Re;var Fe=(0,p.Z)("div",{target:"e1yzi37b0",label:"BreakdownGrid"})("display:grid;grid-template-columns:min-content auto;column-gap:",(0,M.Z)(1),";row-gap:",(0,M.Z)(1),";"),Be=(0,p.Z)("div",{target:"e1yzi37b1",label:"Percentage"})("font-size:",(function(e){return e.theme.fontSizeExtraLarge}),";text-align:right;"),Ke=(0,p.Z)("div",{target:"e1yzi37b2",label:"BarContainer"})("padding-left:",(0,M.Z)(1),";padding-right:",(0,M.Z)(1),";position:relative;"),Me=(0,p.Z)("span",{target:"e1yzi37b3",label:"Label"})("position:relative;color:",(function(e){return e.theme.textColor}),";z-index:2;font-size:",(function(e){return e.theme.fontSizeSmall}),";"),We=(0,p.Z)("div",{target:"e1yzi37b4",label:"Bar"})("border-radius:2px;background-color:",(function(e){return e.theme.border}),";position:absolute;top:0;left:0;z-index:1;height:100%;width:0%;");function Ue(e){var t=e.eventView,n=e.location,r=e.organization,a=t.withColumns([{kind:"function",function:["count","",""]},{kind:"field",field:"transaction.status"}]).withSorts([{kind:"desc",field:"count"}]);return(0,le.tZ)(d.Fragment,null,(0,le.tZ)(re.OT,null,(0,Z.t)("Status Breakdown"),(0,le.tZ)(Oe.Z,{position:"top",title:(0,Te.$r)(r,Te.V$.STATUS_BREAKDOWN),size:"sm"})),(0,le.tZ)(w.Z,{eventView:a,location:n,orgSlug:r.slug,referrer:"api.performance.status-breakdown"},(function(e){var t=e.isLoading,n=e.error,r=e.tableData;if(t)return(0,le.tZ)(je.Z,{height:"124px"});if(n)return(0,le.tZ)(ye.Z,{height:"124px"},(0,le.tZ)(ke.FC,{color:"gray300",size:"lg"}));if(!r||0===r.data.length)return(0,le.tZ)(He,{small:!0},(0,Z.t)("No statuses found"));var a=r.data.map((function(e){return{label:String(e["transaction.status"]),value:parseInt(String(e.count),10)}}));return(0,le.tZ)(Ee,{data:a})})))}Ue.displayName="StatusBreakdown";var He=(0,p.Z)(ae.Z,{target:"elqhyan0",label:"EmptyStatusBreakdown"})({name:"1qyswh1",styles:"height:124px;padding:50px 15%;"});const Qe=Ue;var $e=n("./app/components/dropdownButton.tsx"),Ge=n("./app/components/dropdownControl.tsx"),Je=n("./app/components/gridEditable/index.tsx"),Ye=n("./app/components/links/link.tsx"),Xe=n("./app/components/pagination.tsx"),et=n("./app/components/tooltip.tsx"),tt=n("./app/utils/discover/genericDiscoverQuery.tsx");function nt(e,t){return e.aggregateColumn!==t.aggregateColumn}function rt(e){return e.map((function(e){var t=e.topValues[0];return e.tagValue=t,e.aggregate=t.aggregate,e.frequency=t.count,e.comparison=t.comparison,e.totalTimeLost=t.sumdelta,e}))}function at(e){return(0,le.tZ)(tt.Z,(0,_.Z)({route:"events-facets-performance",getRequestPayload:(t=e,n=t.aggregateColumn,function(e){var t=e.eventView.getEventsAPIPayload(e.location);return t.aggregateColumn=n,t}),shouldRefetchData:nt,afterFetch:rt},e));var t,n}at.displayName="SegmentExplorerQuery";const ot=(0,C.Z)(at);function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt=[{key:"key",name:"Key",width:-1,column:{kind:"field"}},{key:"tagValue",name:"Tag Values",width:-1,column:{kind:"field"}},{key:"aggregate",name:"Avg Duration",width:-1,column:{kind:"field"}},{key:"frequency",name:"Frequency",width:-1,column:{kind:"field"}},{key:"comparison",name:"Comparison To Avg",width:-1,column:{kind:"field"}},{key:"totalTimeLost",name:"Total Time Lost",width:-1,column:{kind:"field"}}],ct=[{label:"transaction.duration",value:"duration"},{label:"measurements.lcp",value:"measurements[lcp]"},{label:"spans.browser",value:"span_op_breakdowns[ops.browser]"},{label:"spans.db",value:"span_op_breakdowns[ops.db]"},{label:"spans.http",value:"span_op_breakdowns[ops.http]"},{label:"spans.resource",value:"span_op_breakdowns[ops.resource]"}];function ut(e){var t=e.value;return(0,le.tZ)("div",null,t.name)}ut.displayName="TagValue";var pt=function(e){(0,s.Z)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function p(){var e;(0,a.Z)(this,p);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),(0,u.Z)((0,i.Z)(e),"state",{aggregateColumn:ct[0].value}),e}return(0,o.Z)(p,[{key:"setAggregateColumn",value:function(e){this.setState({aggregateColumn:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.eventView,r=t.organization,a=t.location,o=this.state.aggregateColumn,i=function(){},s=ct,l=s.find((function(e){return e.value===o}))||s[0];return(0,le.tZ)(ot,{eventView:n,orgSlug:r.slug,location:a,aggregateColumn:o,limit:5},(function(t){var n,r=t.isLoading,o=t.tableData,c=t.pageLinks;return(0,le.tZ)(d.Fragment,null,(0,le.tZ)(dt,{selectedColumn:l,columnOptions:s,handleColumnDropdownChange:function(t){return e.setAggregateColumn(t)}}),(0,le.tZ)(Je.ZP,{isLoading:r,data:o||[],columnOrder:lt,columnSortBy:[],grid:{renderBodyCell:(n=e.props,function(e,t){return function(e,t,n){var r=n[t.key],a=e.location;if("tagValue"===t.key){var o=n.tagValue;return(0,le.tZ)(Ye.Z,{to:"",onClick:function(){return function(e,t,n){var r=(0,P.ro)(e.query.query),a=(0,S.aI)(r||"");a.addTagValues(t,[n]);var o=(0,S.gZ)(a);m.browserHistory.push({pathname:e.pathname,query:st(st({},e.query),{},{query:String(o).trim()})})}(a,n.key,o.value)}},(0,le.tZ)(ut,{value:o}))}if("frequency"===t.key){var i=n.frequency;return(0,Ce.rl)(i,0)}if("comparison"===t.key){var s=n.comparison,l="";if(s>1){var c=(0,Ce.rl)(s-1,0);l="+".concat(c," slower")}else{var u=(0,Ce.rl)(s-1,0);l="".concat(u," faster")}return(0,le.tZ)(et.Z,{title:(0,q.Xr)({milliseconds:n.aggregate})},(0,Z.t)(l))}return"aggregate"===t.key?(0,le.tZ)(q.Xr,{abbreviation:!0,milliseconds:n.aggregate}):"totalTimeLost"===t.key?(0,le.tZ)(q.Xr,{abbreviation:!0,milliseconds:n.totalTimeLost}):r}(n,e,t)})},location:a}),(0,le.tZ)(vt,{pageLinks:c,onCursor:i,size:"small"}))}))}}]),p}(d.Component);function dt(e){var t=e.selectedColumn,n=e.columnOptions,r=e.handleColumnDropdownChange;return(0,le.tZ)(ft,null,(0,le.tZ)(mt,null,(0,Z.t)("Suspect Tags")),(0,le.tZ)(Ge.ZP,{"data-test-id":"tag-column-performance",button:function(e){var n=e.isOpen,r=e.getActorProps;return(0,le.tZ)(gt,(0,_.Z)({},r(),{isOpen:n,prefix:(0,Z.t)("Column"),size:"small"}),t.label)}},n.map((function(e){var n=e.value,a=e.label;return(0,le.tZ)(Ge.hP,{"data-test-id":"option-".concat(n),key:n,onSelect:r,eventKey:n,isActive:n===t.value},a)}))))}pt.displayName="_TagExplorer",dt.displayName="TagsHeader";var mt=(0,p.Z)("h4",{target:"euaybo30",label:"SectionHeading"})("display:inline-grid;grid-auto-flow:column;grid-gap:",(0,M.Z)(1),";align-items:center;color:",(function(e){return e.theme.subText}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:",(0,M.Z)(1)," 0;line-height:1.3;"),ft=(0,p.Z)("div",{target:"euaybo31",label:"Header"})("display:flex;justify-content:space-between;align-items:center;margin:0 0 ",(0,M.Z)(1)," 0;"),gt=(0,p.Z)($e.Z,{target:"euaybo32",label:"StyledDropdownButton"})({name:"65q47m",styles:"min-width:145px;"}),vt=(0,p.Z)(Xe.Z,{target:"euaybo33",label:"StyledPagination"})("margin:0 0 ",(0,M.Z)(3)," 0;"),yt=pt,ht=n("./app/components/userMisery.tsx"),bt=n("./app/views/performance/transactionSummary/utils.tsx"),Zt=n("./app/views/performance/transactionVitals/utils.tsx"),xt=n("./app/views/performance/vitalDetail/vitalInfo.tsx");function wt(e){var t=e.eventView,n=e.isLoading,r=e.hasWebVitals,a=e.error,o=e.totals,i=e.location,s=e.organization,l=e.transactionName,c=null!==a?(0,le.tZ)("div",null,"—"):(0,le.tZ)(je.Z,{height:"34px"}),u=s.apdexThreshold;if(!n&&null===a&&o){var p=o["count_miserable_user_".concat(u)],m=o["user_misery_".concat(u)],f=o.count_unique_user;c=(0,le.tZ)(ht.Z,{bars:40,barHeight:30,userMisery:m,miseryLimit:u,totalUsers:f,miserableUsers:p})}var g=(0,Zt.Pl)({orgSlug:s.slug,transaction:l,projectID:(0,P.ro)(i.query.project),query:i.query});return(0,le.tZ)(d.Fragment,null,r&&(0,le.tZ)(d.Fragment,null,(0,le.tZ)(jt,null,(0,le.tZ)(re.OT,null,(0,Z.t)("Web Vitals"),(0,le.tZ)(Oe.Z,{position:"top",title:(0,Z.t)('Web Vitals with p75 better than the "poor" threshold, as defined by Google Web Vitals.'),size:"sm"})),(0,le.tZ)(Ye.Z,{to:g},(0,le.tZ)(ke.V$,null))),(0,le.tZ)(xt.Z,{eventView:t,organization:s,location:i,vital:[O.Zl.FCP,O.Zl.LCP,O.Zl.FID,O.Zl.CLS],hideVitalPercentNames:!0,hideDurationDetail:!0}),(0,le.tZ)(bt.uI,null)),(0,le.tZ)(re.OT,null,(0,Z.t)("User Misery"),(0,le.tZ)(Oe.Z,{position:"top",title:(0,Te.$r)(s,Te.V$.USER_MISERY),size:"sm"})),c,(0,le.tZ)(bt.uI,null))}wt.displayName="UserStats";var jt=(0,p.Z)("div",{target:"eix0aq80",label:"VitalsHeading"})({name:"69i1ev",styles:"display:flex;justify-content:space-between;align-items:center;"});const Ot=wt;function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var St=function(e){(0,s.Z)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function p(){var e;(0,a.Z)(this,p);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),(0,u.Z)((0,i.Z)(e),"state",{incompatibleAlertNotice:null}),(0,u.Z)((0,i.Z)(e),"handleSearch",(function(t){var n=e.props.location,r=(0,B.Q)(Pt(Pt({},n.query||{}),{},{query:t})),a=N()(r,"cursor");m.browserHistory.push({pathname:n.pathname,query:a})})),(0,u.Z)((0,i.Z)(e),"generateTagUrl",(function(t,n){var r=e.props.location,a=(0,W.ZT)(r.query,{key:t,value:n});return Pt(Pt({},r),{},{query:a})})),(0,u.Z)((0,i.Z)(e),"handleIncompatibleQuery",(function(t,n){var r=t((function(){return e.setState({incompatibleAlertNotice:null})}));e.setState({incompatibleAlertNotice:r})})),(0,u.Z)((0,i.Z)(e),"handleCellAction",(function(t){return function(n,r){var a=e.props,o=a.eventView,i=a.location,s=(0,S.aI)(o.query);s.removeTag("event.type"),s.removeTag("transaction"),(0,Q.rh)(s,n,t,r),m.browserHistory.push({pathname:i.pathname,query:Pt(Pt({},i.query),{},{cursor:void 0,query:(0,S.gZ)(s)})})}})),(0,u.Z)((0,i.Z)(e),"handleTransactionsListSortChange",(function(t){var n=e.props.location,r={pathname:n.pathname,query:Pt(Pt({},n.query),{},{showTransactions:t,transactionCursor:void 0})};m.browserHistory.push(r)})),(0,u.Z)((0,i.Z)(e),"handleDiscoverViewClick",(function(){var t=e.props.organization;(0,U.ec)({eventKey:"performance_views.summary.view_in_discover",eventName:"Performance Views: View in Discover from Transaction Summary",organization_id:parseInt(t.id,10)})})),(0,u.Z)((0,i.Z)(e),"handleViewDetailsClick",(function(t){var n=e.props.organization;(0,U.ec)({eventKey:"performance_views.summary.view_details",eventName:"Performance Views: View Details from Transaction Summary",organization_id:parseInt(n.id,10)})})),e}return(0,o.Z)(p,[{key:"render",value:function(){var e,t=this.props.eventView,n=this.props,r=n.transactionName,a=n.location,o=n.organization,i=n.projects,s=n.isLoading,l=n.error,c=n.totalValues,u=n.onChangeFilter,p=n.spanOperationBreakdownFilter,m=this.state.incompatibleAlertNotice,f=(0,P.ro)(a.query.query,""),g=null===c?null:c.count,v=(0,Y.Is)(p);v&&((t=t.clone()).query="".concat(t.query," ").concat(v).trim());var y,h=null!==c&&D.PE.some((function(e){return e.vitals.some((function(e){var t=(0,O.LY)("percentile(".concat(e,", ").concat(D.GW,")"));return Number.isFinite(c[t])}))})),b=p===Y.f1.None?(0,Z.t)("duration"):"".concat(p," duration");return(0,le.tZ)(d.Fragment,null,(0,le.tZ)(X.Z,{eventView:t,location:a,organization:o,projects:i,transactionName:r,currentTab:X.O.TransactionSummary,hasWebVitals:h,handleIncompatibleQuery:this.handleIncompatibleQuery}),(0,le.tZ)(F.uT,null,(0,le.tZ)(zt,null),m&&(0,le.tZ)(F.or,{fullWidth:!0},m),(0,le.tZ)(F.or,null,(0,le.tZ)(Tt,null,(0,le.tZ)(Y.ZP,{organization:o,currentFilter:p,onChangeFilter:u}),(0,le.tZ)(Vt,{organization:o,projectIds:t.project,query:f,fields:t.fields,onSearch:this.handleSearch,maxQueryLength:K.dI})),(0,le.tZ)(J.Z,{organization:o,location:a,eventView:t,totalValues:g,currentFilter:p}),(0,le.tZ)(A.Z,(0,_.Z)({location:a,organization:o,eventView:t,titles:o.features.includes("trace-view-summary")?[(0,Z.t)("event id"),(0,Z.t)("user"),b,(0,Z.t)("trace id"),(0,Z.t)("timestamp")]:[(0,Z.t)("event id"),(0,Z.t)("user"),b,(0,Z.t)("timestamp")],handleDropdownChange:this.handleTransactionsListSortChange,generateLink:{id:Ct(r),trace:(y=t.normalizeDateSelection(a),function(e,t,n){var r="".concat(t.trace);return r?(0,G.YA)(e,r,y,{}):{}})},baseline:r,handleBaselineClick:this.handleViewDetailsClick,handleCellAction:this.handleCellAction,handleOpenInDiscoverClick:this.handleDiscoverViewClick},function(e,t){var n=function(e){var t=e.p95,n=e.spanOperationBreakdownFilter;if(n===Y.f1.None)return[{sort:{kind:"asc",field:"transaction.duration"},value:bt.K0.FASTEST,label:(0,Z.t)("Fastest Transactions")},{query:[["transaction.duration","<=".concat(t.toFixed(0))]],sort:{kind:"desc",field:"transaction.duration"},value:bt.K0.SLOW,label:(0,Z.t)("Slow Transactions (p95)")},{sort:{kind:"desc",field:"transaction.duration"},value:bt.K0.OUTLIER,label:(0,Z.t)("Outlier Transactions (p100)")},{sort:{kind:"desc",field:"timestamp"},value:bt.K0.RECENT,label:(0,Z.t)("Recent Transactions")}];var r=(0,Y.T$)(n),a=n;return[{sort:{kind:"asc",field:r},value:bt.K0.FASTEST,label:(0,Z.t)("Fastest %s Operations",a)},{query:[["transaction.duration","<=".concat(t.toFixed(0))]],sort:{kind:"desc",field:r},value:bt.K0.SLOW,label:(0,Z.t)("Slow %s Operations (p95)",a)},{sort:{kind:"desc",field:r},value:bt.K0.OUTLIER,label:(0,Z.t)("Outlier %s Operations (p100)",a)},{sort:{kind:"desc",field:"timestamp"},value:bt.K0.RECENT,label:(0,Z.t)("Recent Transactions")}]}(t),r=(0,P.ro)(e.query.showTransactions,bt.K0.SLOW);return{selected:n.find((function(e){return e.value===r}))||n[0],options:n}}(a,{p95:null!==(e=null==c?void 0:c.p95)&&void 0!==e?e:0,spanOperationBreakdownFilter:p}),{forceLoading:s})),(0,le.tZ)(L.Z,{features:["performance-tag-explorer"]},(0,le.tZ)(yt,{eventView:t,organization:o,location:a,projects:i,transactionName:r})),(0,le.tZ)(fe,{organization:o,location:a,transaction:r,start:t.start,end:t.end,statsPeriod:t.statsPeriod})),(0,le.tZ)(F.MF,null,(0,le.tZ)(Ot,{organization:o,location:a,isLoading:s,hasWebVitals:h,error:l,totals:c,transactionName:r,eventView:t}),(0,le.tZ)(Qe,{eventView:t,organization:o,location:a}),(0,le.tZ)(bt.uI,null),(0,le.tZ)(Ae,{organization:o,isLoading:s,error:l,totals:c,eventView:t}),(0,le.tZ)(bt.uI,null),(0,le.tZ)($.Z,{generateUrl:this.generateTagUrl,totalValues:g,eventView:t,organization:o,location:a}))))}}]),p}(d.Component);function Ct(e){return function(t,n,r){var a=(0,H.JE)(n);return(0,q.DD)(t,a,e,r)}}St.displayName="SummaryContent";var Tt=(0,p.Z)("div",{target:"e5y9lom0",label:"Search"})("display:flex;width:100%;margin-bottom:",(0,M.Z)(3),";"),Vt=(0,p.Z)(R.Z,{target:"e5y9lom1",label:"StyledSearchBar"})({name:"i9gxme",styles:"flex-grow:1;"}),zt=(0,p.Z)(E.Z,{target:"e5y9lom2",label:"StyledSdkUpdatesAlert"})("@media (min-width:",(function(e){return e.theme.breakpoints[1]}),"){margin-bottom:0;}");zt.defaultProps={Wrapper:function(e){return(0,le.tZ)(F.or,(0,_.Z)({fullWidth:!0},e))}};const Dt=(0,z.Z)(St);var qt=n("./app/views/performance/transactionSummary/latencyChart.tsx");function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nt=function(e){(0,s.Z)(d,e);var t,n,p=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function d(){var e;(0,a.Z)(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=p.call.apply(p,[this].concat(n)),(0,u.Z)((0,i.Z)(e),"state",{spanOperationBreakdownFilter:(0,Y.q0)(e.props.location),eventView:At(e.props.location,(0,q.JY)(e.props.location),e.props.organization)}),(0,u.Z)((0,i.Z)(e),"onChangeFilter",(function(t){var n=e.props.location,r=It(It({},(0,k.V)(n,[qt.Oo,qt.mo])),(0,Y.bz)(t));t===Y.f1.None&&delete r.breakdown,m.browserHistory.push({pathname:n.pathname,query:r})})),e}return(0,o.Z)(d,[{key:"componentDidMount",value:function(){var e=this.props,t=e.api,n=e.organization,r=e.selection;(0,v.QK)(t,n.slug,r),(0,q.n4)(r)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.api,r=t.organization,a=t.selection;g()(e.selection.projects,a.projects)&&g()(e.selection.datetime,a.datetime)||((0,v.QK)(n,r.slug,a),(0,q.n4)(a))}},{key:"getDocumentTitle",value:function(){var e=(0,q.JY)(this.props.location);return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,Z.t)("Performance")].join(" - "):[(0,Z.t)("Summary"),(0,Z.t)("Performance")].join(" - ")}},{key:"getTotalsEventView",value:function(e,t){var n=e.apdexThreshold.toString(),a=D.PE.map((function(e){return e.vitals})).reduce((function(e,t){return t.forEach((function(t){return e.push(t)})),e}),[]);return t.withColumns([{kind:"function",function:["apdex",n,void 0]},{kind:"function",function:["count_miserable","user",n]},{kind:"function",function:["p95","",void 0]},{kind:"function",function:["count","",void 0]},{kind:"function",function:["count_unique","user",void 0]},{kind:"function",function:["failure_rate","",void 0]},{kind:"function",function:["tpm","",void 0]},{kind:"function",function:["user_misery",n,void 0]}].concat((0,r.Z)(a.map((function(e){return{kind:"function",function:["percentile",e,D.GW.toString()]}})))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.organization,r=t.projects,a=t.location,o=this.state.eventView,i=(0,q.JY)(a);if(!o||void 0===i)return m.browserHistory.replace({pathname:"/organizations/".concat(n.slug,"/performance/"),query:It({},a.query)}),null;var s=this.getTotalsEventView(n,o),l=1===o.project.length,c=l?r.find((function(e){return parseInt(e.id,10)===o.project[0]})):void 0,u=o.project.map((function(e){return r.find((function(t){return parseInt(t.id,10)===e}))})).filter((function(e){return void 0!==e})).map((function(e){return e.slug}));return(0,le.tZ)(b.Z,{title:this.getDocumentTitle(),orgSlug:n.slug,projectSlug:null==c?void 0:c.slug},(0,le.tZ)(h.Z,{lockedMessageSubject:(0,Z.t)("transaction"),shouldForceProject:l,forceProject:c,specificProjectSlugs:u,disableMultipleProjectSelection:!0,showProjectSettingsLink:!0},(0,le.tZ)(Lt,null,(0,le.tZ)(y.Z,{organization:n},(0,le.tZ)(w.Z,{eventView:s,orgSlug:n.slug,location:a,referrer:"api.performance.transaction-summary"},(function(t){var r,s,l=t.isLoading,c=t.error,u=t.tableData,p=null!==(r=null==u||null===(s=u.data)||void 0===s?void 0:s[0])&&void 0!==r?r:null;return(0,le.tZ)(Dt,{location:a,organization:n,eventView:o,transactionName:i,isLoading:l,error:c,totalValues:p,onChangeFilter:e.onChangeFilter,spanOperationBreakdownFilter:e.state.spanOperationBreakdownFilter})}))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return It(It({},t),{},{spanOperationBreakdownFilter:(0,Y.q0)(e.location),eventView:At(e.location,(0,q.JY)(e.location),e.organization)})}}]),d}(d.Component);Nt.displayName="TransactionSummary";var Lt=(0,p.Z)(x.JH,{target:"e1kqes0c0",label:"StyledPageContent"})({name:"y8aj3r",styles:"padding:0;"});function At(e,t,n){if(void 0!==t){var r=(0,P.ro)(e.query.query,""),a=(0,S.aI)(r);a.setTagValues("event.type",["transaction"]).setTagValues("transaction",[t]);var o=(0,Y.q0)(e);Object.keys(a.tagValues).forEach((function(e){(0,O.h1)(e)&&a.removeTag(e)}));var i="transaction.duration";o!==Y.f1.None&&(i=(0,Y.T$)(o));var s=n.features.includes("trace-view-summary")?["id","user.display",i,"trace","timestamp"]:["id","user.display",i,"timestamp"];return o!==Y.f1.None&&s.push("transaction.duration"),j.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:t,fields:s,query:(0,S.gZ)(a),projects:[]},e)}}const Rt=(0,C.Z)((0,T.Z)((0,z.Z)((0,V.Z)(Nt))))},"./app/views/performance/transactionVitals/constants.tsx":(e,t,n)=>{"use strict";n.d(t,{sE:()=>u,GW:()=>p,PE:()=>f,QB:()=>g});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=n("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),o=n("./app/utils/discover/fields.tsx"),i=n("./app/utils/performance/vitals/constants.tsx"),s=n("./app/utils/theme.tsx");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=100,p=.75,d=[{vitals:[o.Zl.FP,o.Zl.FCP,o.Zl.LCP],min:0},{vitals:[o.Zl.FID],min:0,precision:2},{vitals:[o.Zl.CLS],min:0,precision:2}],m=(0,a.Z)(s.ZP.charts.getColorPalette(d.reduce((function(e,t){return e+t.vitals.length}),0)-1)).reverse(),f=d.map((function(e){return c(c({},e),{},{colors:m.splice(0,e.vitals.length)})})),g=d.reduce((function(e,t){return t.vitals.forEach((function(t){var n=i.r[t].slug;e.push("".concat(n,"Start")),e.push("".concat(n,"End"))})),e}),[])},"./app/views/performance/transactionVitals/utils.tsx":(e,t,n)=>{"use strict";n.d(t,{Pl:()=>a,oZ:()=>o,eH:()=>i,L0:()=>s,jb:()=>l});var r=n("./app/utils/performance/histogram/utils.tsx");function a(e){var t,n=e.orgSlug,r=e.transaction,a=e.projectID,o=e.query;return{pathname:(t={orgSlug:n},"/organizations/".concat(t.orgSlug,"/performance/summary/vitals/")),query:{transaction:r,project:a,environment:o.environment,statsPeriod:o.statsPeriod,start:o.start,end:o.end,query:o.query}}}function o(e,t){var n=(0,r.te)(e);return!e.length||t>=e[e.length-1].bin+n?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/n)}function i(e){if(e.length<2)return null;for(var t=0;t<e.length;t++)for(var n=e[t],r=t+1;r<e.length;r++){var a=e[r];if(n.bin!==a.bin&&n.count!==a.count)return{point1:{x:t,y:Math.min(n.count,a.count)},point2:{x:r,y:Math.max(n.count,a.count)}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function s(e,t){var n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(null==n?void 0:n[0])||isNaN(null==n?void 0:n[1]))return null;var r=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(null==r?void 0:r[0])||isNaN(null==r?void 0:r[1])?null:{point1:{x:n[0],y:n[1]},point2:{x:r[0],y:r[1]}}}function l(e,t,n){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||n.point1.x===n.point2.x||n.point1.y===n.point2.y)return null;var r=(e.x-t.point1.x)/(t.point2.x-t.point1.x),a=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:n.point1.x+(n.point2.x-n.point1.x)*r,y:n.point1.y+(n.point2.y-n.point1.y)*a}}},"./app/views/performance/vitalDetail/vitalInfo.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i}),n("../node_modules/react/index.js");var r=n("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),a=n("./app/views/performance/landing/vitalsCards.tsx"),o=n("../node_modules/@emotion/core/dist/core.browser.esm.js");function i(e){var t=e.vital,n=e.eventView,i=e.organization,s=e.location,l=e.hideBar,c=e.hideStates,u=e.hideVitalPercentNames,p=e.hideDurationDetail;return(0,o.tZ)(r.Z,{eventView:n,orgSlug:i.slug,location:s,vitals:Array.isArray(t)?t:[t]},(function(e){var n=e.isLoading,r=e.vitalsData;return(0,o.tZ)(a.JO,{isLoading:n,data:r,vital:t,showBar:!l,showStates:!c,showVitalPercentNames:!u,showDurationDetail:!p})}))}i.displayName="vitalInfo"}}]);
//# sourceMappingURL=PerformanceTransactionSummary.js.map