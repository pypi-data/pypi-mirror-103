(self.webpackChunk=self.webpackChunk||[]).push([["AdminOverview"],{"./app/views/admin/adminOverview/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var n=s("../node_modules/react/index.js"),r=s("../node_modules/react-document-title/index.js"),a=s.n(r),o=s("./app/components/panels/index.tsx"),i=s("./app/locale.tsx"),l=s("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),c=s("../node_modules/@babel/runtime/helpers/esm/createClass.js"),u=s("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),p=s("../node_modules/@babel/runtime/helpers/esm/inherits.js"),d=s("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),h=s("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),f=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),v=s("./app/components/charts/miniBarChart.tsx"),m=s("./app/components/loadingError.tsx"),Z=s("./app/components/loadingIndicator.tsx"),x=s("./app/utils/theme.tsx"),y=s("./app/utils/withApi.tsx"),w=s("../node_modules/@emotion/core/dist/core.browser.esm.js");var g={error:!1,loading:!0,rawData:{"client-api.all-versions.responses.2xx":[],"client-api.all-versions.responses.4xx":[],"client-api.all-versions.responses.5xx":[]}},b=function(e){(0,p.Z)(r,e);var t,s,n=(t=r,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,h.Z)(t);if(s){var r=(0,h.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function r(){var e;(0,l.Z)(this,r);for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e=n.call.apply(n,[this].concat(s)),(0,f.Z)((0,u.Z)(e),"state",g),(0,f.Z)((0,u.Z)(e),"fetchData",(function(){["client-api.all-versions.responses.2xx","client-api.all-versions.responses.4xx","client-api.all-versions.responses.5xx"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(s){e.setState((function(e){var n=e.rawData;return n[t]=s,{rawData:n}}),e.requestFinished)},error:function(){e.setState({error:!0})}})}))})),(0,f.Z)((0,u.Z)(e),"requestFinished",(function(){var t=e.state.rawData;t["client-api.all-versions.responses.2xx"]&&t["client-api.all-versions.responses.4xx"]&&t["client-api.all-versions.responses.5xx"]&&e.setState({loading:!1})})),e}return(0,c.Z)(r,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){this.props.since!==e.since&&this.setState(g,this.fetchData)}},{key:"processRawSeries",value:function(e){return e.map((function(e){return{name:1e3*e[0],value:e[1]}}))}},{key:"getChartSeries",value:function(){var e=this.state.rawData;return[{seriesName:"2xx",data:this.processRawSeries(e["client-api.all-versions.responses.2xx"]),color:x.ZP.green200},{seriesName:"4xx",data:this.processRawSeries(e["client-api.all-versions.responses.4xx"]),color:x.ZP.blue300},{seriesName:"5xx",data:this.processRawSeries(e["client-api.all-versions.responses.5xx"]),color:x.ZP.red200}]}},{key:"render",value:function(){var e=this.state,t=e.loading,s=e.error;if(t)return(0,w.tZ)(Z.Z,null);if(s)return(0,w.tZ)(m.Z,{onRetry:this.fetchData});var n=this.getChartSeries(),r=n.map((function(e){return e.color}));return(0,w.tZ)(v.Z,{series:n,colors:r,height:110,stacked:!0,isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0})}}]),r}(n.Component);b.displayName="ApiChart";const k=(0,y.Z)(b);var D={error:!1,loading:!0,rawData:{"events.total":[],"events.dropped":[]},stats:{received:[],rejected:[]}},R=function(e){(0,p.Z)(r,e);var t,s,n=(t=r,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,h.Z)(t);if(s){var r=(0,h.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,d.Z)(this,e)});function r(){var e;(0,l.Z)(this,r);for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e=n.call.apply(n,[this].concat(s)),(0,f.Z)((0,u.Z)(e),"state",D),(0,f.Z)((0,u.Z)(e),"fetchData",(function(){["events.total","events.dropped"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(s){e.setState((function(e){var n=e.rawData;return n[t]=s,{rawData:n}}),e.requestFinished)},error:function(){e.setState({error:!0})}})}))})),e}return(0,c.Z)(r,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){this.props.since!==e.since&&this.setState(D,this.fetchData)}},{key:"requestFinished",value:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData()}},{key:"processOrgData",value:function(){var e=this.state.rawData,t={},s={},n=[0,0];e["events.total"].forEach((function(r,a){var o,i=r[1],l=null===(o=e["events.dropped"][a])||void 0===o?void 0:o[1],c=r[0];void 0===t[c]?(t[c]=i,s[c]=l):(t[c]+=i,s[c]+=l),i>0&&(n[0]+=i,n[1]+=1)})),this.setState({stats:{rejected:Object.keys(s).map((function(e){return{name:1e3*parseInt(e,10),value:s[e]||0}})),accepted:Object.keys(t).map((function(e){return{name:1e3*parseInt(e,10),value:t[e]-s[e]}}))},loading:!1})}},{key:"getChartSeries",value:function(){var e=this.state.stats;return[{seriesName:(0,i.t)("Accepted"),data:e.accepted,color:x.ZP.blue300},{seriesName:(0,i.t)("Dropped"),data:e.rejected,color:x.ZP.red200}]}},{key:"render",value:function(){var e=this.state,t=e.loading,s=e.error;if(t)return(0,w.tZ)(Z.Z,null);if(s)return(0,w.tZ)(m.Z,{onRetry:this.fetchData});var n=this.getChartSeries(),r=n.map((function(e){return e.color}));return(0,w.tZ)(v.Z,{series:n,colors:r,height:110,stacked:!0,isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0})}}]),r}(n.Component);R.displayName="EventChart";const S=(0,y.Z)(R);var j=function(){var e=(new Date).getTime()/1e3-604800;return(0,w.tZ)(a(),{title:"Admin Overview - Sentry"},(0,w.tZ)(n.Fragment,null,(0,w.tZ)("h3",null,(0,i.t)("System Overview")),(0,w.tZ)(o.s_,{key:"events"},(0,w.tZ)(o.V9,null,(0,i.t)("Event Throughput")),(0,w.tZ)(o.N,{withPadding:!0},(0,w.tZ)(S,{since:e,resolution:"1h"}))),(0,w.tZ)(o.s_,{key:"api"},(0,w.tZ)(o.V9,null,(0,i.t)("API Responses")),(0,w.tZ)(o.N,{withPadding:!0},(0,w.tZ)(k,{since:e,resolution:"1h"})))))};j.displayName="AdminOverview";const C=j}}]);
//# sourceMappingURL=AdminOverview.js.map