(self.webpackChunk=self.webpackChunk||[]).push([["SentryAppDetailedView"],{"./app/actionCreators/sentryAppInstallations.tsx":(t,e,n)=>{"use strict";n.d(e,{G:()=>a,W:()=>o});var r=n("./app/actionCreators/indicator.tsx"),s=n("./app/locale.tsx");function a(t,e,n){(0,r.E3)();var a=t.requestPromise("/organizations/".concat(e,"/sentry-app-installations/"),{method:"POST",data:{slug:n.slug}});return a.then((function(){return(0,r.B8)()}),(function(){return(0,r.Iw)((0,s.t)("Unable to install ".concat(n.name)))})),a}function o(t,e){(0,r.E3)();var n=t.requestPromise("/sentry-app-installations/".concat(e.uuid,"/"),{method:"DELETE"});return n.then((function(){(0,r.S9)((0,s.t)("".concat(e.app.slug," successfully uninstalled.")))}),(function(){return(0,r.B8)()})),n}},"./app/utils/consolidatedScopes.tsx":(t,e,n)=>{"use strict";n.d(e,{A:()=>x,m:()=>Z});var r=n("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),s=n("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),a=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/lodash/groupBy.js"),i=n.n(o),l=n("../node_modules/lodash/invertBy.js"),u=n.n(l),c=n("../node_modules/lodash/pick.js"),p=n.n(c);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={read:0,write:1,admin:2},g={project:"Project",team:"Team",release:"Release",event:"Event",org:"Organization",member:"Member"},y={Project:"no-access",Team:"no-access",Release:"no-access",Event:"no-access",Organization:"no-access",Member:"no-access"},h="project:releases",b=function(t){var e=t.split(":")[1];return f[e]},v=function(t,e){return b(t)-b(e)};function Z(t){var e,n=m({},y),a=(0,s.Z)(t);return t.includes(h)&&(n.Release="admin",a=t.filter((function(t){return t!==h}))),(e=a,Object.values(i()(e,(function(t){return t.split(":")[0]}))).map((function(t){return t.sort(v)})).map((function(t){return t.pop()}))).forEach((function(t){if(t){var e=t.split(":"),s=(0,r.Z)(e,2),a=s[0],o=s[1];n[g[a]]=o}})),n}function x(t){var e=Z(t),n=p()(u()(e),["read","write","admin"]);return m(m({},{read:[],write:[],admin:[]}),n)}},"./app/views/organizationIntegrations/sentryAppDetailedView.tsx":(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>H});var r=n("../node_modules/@babel/runtime/helpers/esm/extends.js"),s=n("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),a=n("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),o=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=n("../node_modules/@babel/runtime/helpers/esm/get.js"),c=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),p=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),m=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),f=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),g=n("../node_modules/@babel/runtime/regenerator/index.js"),y=n.n(g),h=n("../node_modules/react/index.js"),b=n("./app/actionCreators/indicator.tsx"),v=n("./app/actionCreators/modal.tsx"),Z=n("./app/actionCreators/sentryAppInstallations.tsx"),x=n("./app/components/button.tsx"),j=n("./app/components/circleIndicator.tsx"),w=n("./app/components/confirm.tsx"),_=n("./app/icons/index.tsx"),k=n("./app/locale.tsx"),I=n("./app/styles/space.tsx"),A=n("./app/utils/consolidatedScopes.tsx"),C=n("./app/utils/integrationUtil.tsx"),O=n("./app/utils/queryString.tsx"),P=n("./app/utils/recordSentryAppInteraction.tsx"),S=n("./app/utils/withOrganization.tsx"),z=n("./app/views/organizationIntegrations/abstractIntegrationDetailedView.tsx"),E=n("./app/views/settings/components/forms/textCopyInput.tsx"),R=n("../node_modules/@emotion/core/dist/core.browser.esm.js");var B=function(t){(0,c.Z)(s,t);var e,n,r=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,d.Z)(e);if(n){var s=(0,d.Z)(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return(0,p.Z)(this,t)});function s(){var t;(0,o.Z)(this,s);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t=r.call.apply(r,[this].concat(n)),(0,m.Z)((0,l.Z)(t),"onCopy",(0,a.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t.props.installationId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),(0,m.Z)((0,l.Z)(t),"handleContinue",(function(){t.onCopy(),(0,b.S9)("Copied to clipboard"),setTimeout((function(){window.open("https://app.split.io/org/admin/integrations")}),2e3)})),t}return(0,i.Z)(s,[{key:"render",value:function(){var t=this.props,e=t.installationId,n=t.closeModal;return(0,R.tZ)("div",null,(0,R.tZ)(U,null,"Copy this Installation ID and click to continue. You will use it to finish setup on Split.io."),(0,R.tZ)(U,null,(0,R.tZ)(E.Z,{onCopy:this.onCopy},e)),(0,R.tZ)(D,null,(0,R.tZ)(x.ZP,{size:"small",onClick:n},"Close"),(0,R.tZ)(x.ZP,{size:"small",priority:"primary",onClick:this.handleContinue},"Copy and Open Link")))}}]),s}(h.Component);B.displayName="SplitInstallationIdModal";var U=(0,f.Z)("div",{target:"e1xepmaa0",label:"ItemHolder"})({name:"eaeacs",styles:"margin:10px;"}),D=(0,f.Z)(U,{target:"e1xepmaa1",label:"ButtonHolder"})({name:"99h030",styles:"text-align:right;& button{margin:5px;}"});var T=function(t){(0,c.Z)(f,t);var e,n,r=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,d.Z)(e);if(n){var s=(0,d.Z)(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return(0,p.Z)(this,t)});function f(){var t;(0,o.Z)(this,f);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t=r.call.apply(r,[this].concat(n)),(0,m.Z)((0,l.Z)(t),"tabs",["overview"]),(0,m.Z)((0,l.Z)(t),"redirectUser",(function(e){var n=t.props.organization,r=t.state.sentryApp,s={installationId:e.uuid,code:e.code,orgSlug:n.slug};if(r.redirectUrl){var a=(0,O.Yi)(r.redirectUrl,s);window.location.assign(a)}})),(0,m.Z)((0,l.Z)(t),"handleInstall",(0,a.Z)(y().mark((function e(){var n,r,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.organization,r=t.state.sentryApp,t.trackIntegrationEvent("integrations.installation_start",{integration_status:r.status}),e.next=5,(0,Z.G)(t.api,n.slug,r);case 5:"installed"===(a=e.sent).status&&t.trackIntegrationEvent("integrations.installation_complete",{integration_status:r.status}),r.redirectUrl?t.redirectUser(a):((0,b.S9)((0,k.t)("".concat(r.slug," successfully installed."))),t.setState({appInstalls:[a].concat((0,s.Z)(t.state.appInstalls))}),["split","split-dev","split-testing"].includes(r.slug)&&(0,v.openModal)((function(t){var e=t.closeModal;return(0,R.tZ)(B,{installationId:a.uuid,closeModal:e})})));case 8:case"end":return e.stop()}}),e)})))),(0,m.Z)((0,l.Z)(t),"handleUninstall",function(){var e=(0,a.Z)(y().mark((function e(n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Z.W)(t.api,n);case 3:return t.trackIntegrationEvent("integrations.uninstall_completed",{integration_status:t.sentryApp.status}),r=t.state.appInstalls.filter((function(e){return e.app.slug!==t.sentryApp.slug})),e.abrupt("return",t.setState({appInstalls:r}));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",(0,b.Iw)((0,k.t)("Unable to uninstall ".concat(t.sentryApp.name))));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),(0,m.Z)((0,l.Z)(t),"recordUninstallClicked",(function(){var e=t.sentryApp;t.trackIntegrationEvent("integrations.uninstall_clicked",{integration_status:e.status})})),t}return(0,i.Z)(f,[{key:"getEndpoints",value:function(){var t=this.props,e=t.organization,n=t.params.integrationSlug;return[["sentryApp","/sentry-apps/".concat(n,"/")],["featureData","/sentry-apps/".concat(n,"/features/")],["appInstalls","/organizations/".concat(e.slug,"/sentry-app-installations/")]]}},{key:"onLoadAllEndpointsSuccess",value:function(){var t=this.props,e=t.organization,n=t.params.integrationSlug,r=t.router;"internal"!==this.sentryApp.status?((0,u.Z)((0,d.Z)(f.prototype),"onLoadAllEndpointsSuccess",this).call(this),(0,P.E)(n,"sentry_app_viewed")):r.push("/settings/".concat(e.slug,"/developer-settings/").concat(n,"/"))}},{key:"integrationType",get:function(){return"sentry_app"}},{key:"sentryApp",get:function(){return this.state.sentryApp}},{key:"description",get:function(){return this.state.sentryApp.overview||""}},{key:"author",get:function(){return this.sentryApp.author}},{key:"resourceLinks",get:function(){return"published"!==this.sentryApp.status?[]:[{title:"Documentation",url:"https://docs.sentry.io/product/integrations/".concat(this.integrationSlug,"/")}]}},{key:"permissions",get:function(){return(0,A.A)(this.sentryApp.scopes)}},{key:"installationStatus",get:function(){return(0,C.Az)(this.install)}},{key:"integrationName",get:function(){return this.sentryApp.name}},{key:"featureData",get:function(){return this.state.featureData}},{key:"install",get:function(){var t=this;return this.state.appInstalls.find((function(e){return e.app.slug===t.sentryApp.slug}))}},{key:"renderPermissions",value:function(){var t=this.permissions;return Object.keys(t).some((function(e){return t[e].length>0}))?(0,R.tZ)(N,null,(0,R.tZ)(q,null,"Permissions"),t.read.length>0&&(0,R.tZ)(L,null,(0,R.tZ)(W,null),(0,R.tZ)(M,{key:"read"},(0,k._N)("[read] access to [resources] resources",{read:(0,R.tZ)("strong",null,"Read"),resources:t.read.join(", ")}))),t.write.length>0&&(0,R.tZ)(L,null,(0,R.tZ)(W,null),(0,R.tZ)(M,{key:"write"},(0,k._N)("[read] and [write] access to [resources] resources",{read:(0,R.tZ)("strong",null,"Read"),write:(0,R.tZ)("strong",null,"Write"),resources:t.write.join(", ")}))),t.admin.length>0&&(0,R.tZ)(L,null,(0,R.tZ)(W,null),(0,R.tZ)(M,{key:"admin"},(0,k._N)("[admin] access to [resources] resources",{admin:(0,R.tZ)("strong",null,"Admin"),resources:t.admin.join(", ")})))):null}},{key:"renderTopButton",value:function(t,e){var n=this,r=this.install;return r?(0,R.tZ)(w.Z,{disabled:!e,message:(0,k._N)("Are you sure you want to remove the [slug] installation?",{slug:this.integrationSlug}),onConfirm:function(){return n.handleUninstall(r)},onConfirming:this.recordUninstallClicked,priority:"danger"},(0,R.tZ)(V,{size:"small","data-test-id":"sentry-app-uninstall"},(0,R.tZ)(_.JZ,{isCircled:!0,style:{marginRight:(0,I.Z)(.75)}}),(0,k.t)("Uninstall"))):e?(0,R.tZ)(G,{"data-test-id":"install-button",disabled:t,onClick:function(){return n.handleInstall()},priority:"primary",size:"small",style:{marginLeft:(0,I.Z)(1)}},(0,k.t)("Accept & Install")):this.renderRequestIntegrationButton()}},{key:"renderConfigurations",value:function(){return null}}]),f}(z.Z),M=(0,f.Z)("p",{target:"ev1fx9x0",label:"Text"})({name:"1y1i75n",styles:"margin:0px 6px;"}),L=(0,f.Z)("div",{target:"ev1fx9x1",label:"Permission"})({name:"k008qs",styles:"display:flex;"}),N=(0,f.Z)("div",{target:"ev1fx9x2",label:"PermissionWrapper"})("padding-bottom:",(0,I.Z)(2),";"),q=(0,f.Z)("p",{target:"ev1fx9x3",label:"Title"})("margin-bottom:",(0,I.Z)(1),";font-weight:bold;"),W=(0,f.Z)((function(t){return(0,R.tZ)(j.Z,(0,r.Z)({size:7},t))}),{target:"ev1fx9x4",label:"Indicator"})("margin-top:3px;color:",(function(t){return t.theme.success}),";"),G=(0,f.Z)(x.ZP,{target:"ev1fx9x5",label:"InstallButton"})("margin-left:",(0,I.Z)(1),";"),V=(0,f.Z)(x.ZP,{target:"ev1fx9x6",label:"StyledUninstallButton"})("color:",(function(t){return t.theme.gray300}),";background:",(function(t){return t.theme.background}),";border:",(function(t){return"1px solid ".concat(t.theme.gray300)}),";box-sizing:border-box;box-shadow:0px 2px 1px rgba(0,0,0,0.08);border-radius:4px;");const H=(0,S.Z)(T)},"../node_modules/lodash/_baseInverter.js":(t,e,n)=>{var r=n("../node_modules/lodash/_baseForOwn.js");t.exports=function(t,e,n,s){return r(t,(function(t,r,a){e(s,n(t),r,a)})),s}},"../node_modules/lodash/_createInverter.js":(t,e,n)=>{var r=n("../node_modules/lodash/_baseInverter.js");t.exports=function(t,e){return function(n,s){return r(n,t,e(s),{})}}},"../node_modules/lodash/invertBy.js":(t,e,n)=>{var r=n("../node_modules/lodash/_baseIteratee.js"),s=n("../node_modules/lodash/_createInverter.js"),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,l=s((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=i.call(e)),o.call(t,e)?t[e].push(n):t[e]=[n]}),r);t.exports=l}}]);
//# sourceMappingURL=SentryAppDetailedView.js.map