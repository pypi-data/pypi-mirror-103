(self.webpackChunk=self.webpackChunk||[]).push([["TeamSettings"],{"./app/actionCreators/teams.tsx":(e,t,r)=>{"use strict";r.d(t,{eM:()=>l,z_:()=>u,fs:()=>d,um:()=>m,s:()=>p,Cm:()=>f,tT:()=>h});var n=r("./app/actionCreators/indicator.tsx"),s=r("./app/actions/teamActions.tsx"),o=r("./app/locale.tsx"),a=r("./app/utils/callIfFunction.tsx"),i=r("./app/utils/guid.tsx"),c=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];a.g.apply(void 0,[e[t]].concat(n))};function l(e,t,r){return s.Z.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:function(e){s.Z.fetchDetailsSuccess(t.teamId,e),c(r,"success",e)},error:function(e){s.Z.fetchDetailsError(t.teamId,e),c(r,"error",e)}})}function u(e,t){s.Z.updateSuccess(e,t)}function d(e,t,r){var n="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return s.Z.update(t.teamId,t.data),e.request(n,{method:"PUT",data:t.data,success:function(e){u(t.teamId,e),c(r,"success",e)},error:function(e){s.Z.updateError(t.teamId,e),c(r,"error",e)}})}function m(e,t,r){var n,o="/organizations/".concat(t.orgId,"/members/").concat(null!==(n=t.memberId)&&void 0!==n?n:"me","/teams/").concat(t.teamId,"/"),a=(0,i.E)();return s.Z.update(a,t.teamId),e.request(o,{method:"POST",success:function(e){s.Z.updateSuccess(t.teamId,e),c(r,"success",e)},error:function(e){s.Z.updateError(a,t.teamId,e),c(r,"error",e)}})}function p(e,t,r){var n="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),o=(0,i.E)();return s.Z.update(o,t.teamId),e.request(n,{method:"DELETE",success:function(e){s.Z.updateSuccess(t.teamId,e),c(r,"success",e)},error:function(e){s.Z.updateError(o,t.teamId,e),c(r,"error",e)}})}function f(e,t,r){return s.Z.createTeam(t),e.requestPromise("/organizations/".concat(r.orgId,"/teams/"),{method:"POST",data:t}).then((function(e){return s.Z.createTeamSuccess(e),(0,n.S9)((0,o._N)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:r.orgId})),e}),(function(e){throw s.Z.createTeamError(t.slug,e),(0,n.Iw)((0,o._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:r.orgId})),e}))}function h(e,t){return s.Z.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((function(e){return s.Z.removeTeamSuccess(t.teamId,e),(0,n.S9)((0,o._N)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}),(function(e){throw s.Z.removeTeamError(t.teamId,e),(0,n.Iw)((0,o._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},"./app/data/forms/teamSettingsFields.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{route:()=>o,default:()=>a});var n=r("./app/locale.tsx"),s=r("./app/utils/slugify.tsx"),o="/settings/:orgId/teams/:teamId/settings/";const a=[{title:"Team Settings",fields:[{name:"slug",type:"string",required:!0,label:(0,n.t)("Name"),placeholder:"e.g. api-team",help:(0,n.t)("A unique ID used to identify the team"),disabled:function(e){return!e.access.has("team:write")},transformInput:s.Z,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:(0,n.t)("You will be redirected to the new team slug after saving")}]}]},"./app/utils/slugify.tsx":(e,t,r)=>{"use strict";function n(e){return"string"==typeof e?e.toLowerCase().replace(" ","-"):""}r.d(t,{Z:()=>n})},"./app/views/asyncView.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),i=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=(r("../node_modules/react/index.js"),r("../node_modules/react-document-title/index.js")),l=r.n(c),u=r("./app/components/asyncComponent.tsx"),d=r("../node_modules/@emotion/core/dist/core.browser.esm.js");var m=function(e){(0,o.Z)(u,e);var t,r,c=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,i.Z)(t);if(r){var s=(0,i.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function u(){return(0,n.Z)(this,u),c.apply(this,arguments)}return(0,s.Z)(u,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,d.tZ)(l(),{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),u}(u.Z);m.displayName="AsyncView"},"./app/views/settings/components/forms/formPanel.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r("../node_modules/@babel/runtime/helpers/esm/extends.js"),s=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),c=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=r("../node_modules/react/index.js"),d=r("./app/components/panels/index.tsx"),m=r("./app/utils/sanitizeQuerySelector.tsx"),p=r("./app/views/settings/components/forms/fieldFromConfig.tsx"),f=r("../node_modules/@emotion/core/dist/core.browser.esm.js");var h=function(e){(0,i.Z)(h,e);var t,r,u=(t=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(r){var s=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function h(){return(0,o.Z)(this,h),u.apply(this,arguments)}return(0,a.Z)(h,[{key:"render",value:function(){var e=this,t=this.props,r=t.title,o=t.fields,a=t.access,i=t.disabled,c=t.additionalFieldProps,l=t.renderFooter,u=t.renderHeader,h=(0,s.Z)(t,["title","fields","access","disabled","additionalFieldProps","renderFooter","renderHeader"]);return(0,f.tZ)(d.s_,{id:"string"==typeof r?(0,m.m)(r):void 0},r&&(0,f.tZ)(d.V9,null,r),(0,f.tZ)(d.N,null,"function"==typeof u&&u({title:r,fields:o}),o.map((function(t){if("function"==typeof t)return t();t.defaultValue;var r=(0,s.Z)(t,["defaultValue"]);return!0===i&&(r.disabled=!0,r.disabledReason=void 0),(0,f.tZ)(p.Z,(0,n.Z)({access:a,disabled:i,key:t.name},h,c,{field:r,highlighted:e.props.highlighted==="#".concat(t.name)}))})),"function"==typeof l&&l({title:r,fields:o})))}}]),h}(u.Component);h.displayName="FormPanel"},"./app/views/settings/components/forms/jsonForm.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r("../node_modules/@babel/runtime/helpers/esm/extends.js"),s=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=r("../node_modules/react/index.js"),p=r("../node_modules/@sentry/minimal/esm/index.js"),f=r("../node_modules/prop-types/index.js"),h=r.n(f),g=r("../node_modules/reflexbox/dist/index.js"),b=r("../node_modules/scroll-to-element/index.js"),v=r.n(b),y=r("./app/utils.tsx"),Z=r("./app/utils/sanitizeQuerySelector.tsx"),x=r("./app/views/settings/components/forms/formPanel.tsx"),j=r("../node_modules/@emotion/core/dist/core.browser.esm.js");function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=function(e){(0,c.Z)(h,e);var t,r,f=(t=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(r){var s=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function h(){var e;(0,o.Z)(this,h);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=f.call.apply(f,[this].concat(r)),(0,d.Z)((0,i.Z)(e),"state",{highlighted:T(e.props,e.context).hash}),e}return(0,a.Z)(h,[{key:"componentDidMount",value:function(){this.scrollToHash()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(T(this.props,this.context).hash!==T(e,this.context).hash){var t=T(e,this.context).hash;this.scrollToHash(t),this.setState({highlighted:t})}}},{key:"scrollToHash",value:function(e){var t=e||T(this.props,this.context).hash;if(t)try{v()((0,Z.m)(decodeURIComponent(t)),{align:"middle",offset:-100})}catch(e){p.Tb(e)}}},{key:"shouldDisplayForm",value:function(e){var t=e.filter((function(e){return"function"!=typeof e&&(0,y.ri)(null==e?void 0:e.visible)}));if(e.length===t.length){var r=this.props,n=r.additionalFieldProps,o=(0,s.Z)(r,["additionalFieldProps"]);return!t.every((function(e){return"function"==typeof e.visible?!e.visible(_(_({},o),n)):!e.visible}))}return!0}},{key:"renderForm",value:function(e){var t=e.fields,r=e.formPanelProps,s=e.title;return this.shouldDisplayForm(t)||null!=r&&r.renderFooter||null!=r&&r.renderHeader?(0,j.tZ)(x.Z,(0,n.Z)({title:s,fields:t},r)):null}},{key:"render",value:function(){var e=this,t=this.props,r=t.access,n=t.fields,o=t.title,a=t.forms,i=t.disabled,c=t.features,l=t.additionalFieldProps,u=t.renderFooter,d=t.renderHeader,p=(t.location,(0,s.Z)(t,["access","fields","title","forms","disabled","features","additionalFieldProps","renderFooter","renderHeader","location"])),f={access:r,disabled:i,features:c,additionalFieldProps:l,renderFooter:u,renderHeader:d,highlighted:this.state.highlighted};return(0,j.tZ)(g.xu,p,void 0!==a&&a.map((function(t,r){return(0,j.tZ)(m.Fragment,{key:r},e.renderForm(_({formPanelProps:f},t)))})),void 0===a&&void 0!==n&&this.renderForm({fields:n,formPanelProps:f,title:o}))}}]),h}(m.Component);P.displayName="JsonForm",(0,d.Z)(P,"contextTypes",{location:h().object}),(0,d.Z)(P,"defaultProps",{additionalFieldProps:{}});const w=P;function T(e,t){return e.location||t.location||{}}},"./app/views/settings/organizationTeams/teamSettings/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>F});var n=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),c=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=r("../node_modules/@babel/runtime/regenerator/index.js"),m=r.n(d),p=r("../node_modules/react/index.js"),f=r("../node_modules/prop-types/index.js"),h=r.n(f),g=r("./app/actionCreators/indicator.tsx"),b=r("./app/actionCreators/teams.tsx"),v=r("./app/components/button.tsx"),y=r("./app/components/confirm.tsx"),Z=r("./app/components/panels/index.tsx"),x=r("./app/data/forms/teamSettingsFields.tsx"),j=r("./app/icons/index.tsx"),I=r("./app/locale.tsx"),_=r("./app/sentryTypes.tsx"),P=r("./app/views/asyncView.tsx"),w=r("./app/views/settings/components/forms/field/index.tsx"),T=r("./app/views/settings/components/forms/form.tsx"),R=r("./app/views/settings/components/forms/jsonForm.tsx");const S=function(e){(0,i.Z)(d,e);var t,r,n=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(r){var s=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function d(e,t){var r;return(0,s.Z)(this,d),r=n.call(this),(0,u.Z)((0,a.Z)(r),"orgId",void 0),(0,u.Z)((0,a.Z)(r),"teamId",void 0),r.orgId=e,r.teamId=t,r}return(0,o.Z)(d,[{key:"doApiRequest",value:function(e){var t=this,r=e.data;return new Promise((function(e,n){return(0,b.fs)(t.api,{orgId:t.orgId,teamId:t.teamId,data:r},{success:e,error:n})}))}}]),d}(r("./app/views/settings/components/forms/model.tsx").Z);var C=r("../node_modules/@emotion/core/dist/core.browser.esm.js");var F=function(e){(0,i.Z)(f,e);var t,r,d=(t=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(r){var s=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function f(){var e;(0,s.Z)(this,f);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=d.call.apply(d,[this].concat(r)),(0,u.Z)((0,a.Z)(e),"model",new S(e.props.params.orgId,e.props.params.teamId)),(0,u.Z)((0,a.Z)(e),"handleSubmitSuccess",(function(t,r,n){(0,b.z_)(t.slug,t),"slug"===n&&((0,g.S9)((0,I.t)("Team name changed")),e.props.router.replace("/settings/".concat(e.props.params.orgId,"/teams/").concat(r.getValue(n),"/settings/")),e.setState({loading:!0}))})),(0,u.Z)((0,a.Z)(e),"handleRemoveTeam",(0,n.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.tT)(e.api,e.props.params);case 2:e.props.router.replace("/settings/".concat(e.props.params.orgId,"/teams/"));case 3:case"end":return t.stop()}}),t)})))),e}return(0,o.Z)(f,[{key:"getTitle",value:function(){return"Team Settings"}},{key:"getEndpoints",value:function(){return[]}},{key:"renderBody",value:function(){var e=this.context,t=e.location,r=e.organization,n=this.props.team,s=new Set(r.access);return(0,C.tZ)(p.Fragment,null,(0,C.tZ)(T.Z,{model:this.model,apiMethod:"PUT",saveOnBlur:!0,allowUndo:!0,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:function(){return(0,g.Iw)((0,I.t)("Unable to save change"))},initialData:{name:n.name,slug:n.slug}},(0,C.tZ)(R.Z,{access:s,location:t,forms:x.default})),(0,C.tZ)(Z.s_,null,(0,C.tZ)(Z.V9,null,(0,I.t)("Remove Team")),(0,C.tZ)(w.Z,{help:(0,I.t)("This may affect team members' access to projects and associated alert delivery.")},(0,C.tZ)("div",null,(0,C.tZ)(y.Z,{disabled:!s.has("team:admin"),onConfirm:this.handleRemoveTeam,priority:"danger",message:(0,I._N)("Are you sure you want to remove the team [team]?",{team:"#".concat(n.slug)})},(0,C.tZ)(v.ZP,{icon:(0,C.tZ)(j.Fz,null),priority:"danger",disabled:!s.has("team:admin")},(0,I.t)("Remove Team")))))))}}]),f}(P.Z);(0,u.Z)(F,"contextTypes",{router:h().object,location:h().object,organization:_.ZP.Organization})}}]);
//# sourceMappingURL=TeamSettings.js.map