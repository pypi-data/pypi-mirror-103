(self.webpackChunk=self.webpackChunk||[]).push([["app_components_events_interfaces_spans_dividerHandlerManager_tsx-app_components_events_interf-7203f7"],{"./app/components/events/interfaces/spans/context.tsx":(e,t,n)=>{"use strict";n.d(t,{z:()=>a,$:()=>s});var r=n("../node_modules/react/index.js").createContext({getViewChildTransactionTarget:function(){}}),a=r.Provider,s=r.Consumer},"./app/components/events/interfaces/spans/dividerHandlerManager.tsx":(e,t,n)=>{"use strict";n.d(t,{z:()=>g,$:()=>b});var r=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=n("../node_modules/react/index.js"),u=n("./app/components/waterfallTree/utils.tsx"),d=n("./app/utils/userselect.tsx"),m=n("../node_modules/@emotion/core/dist/core.browser.esm.js");var f=.4,v=function(e,t){e.forEach((function(e){e.current&&t(e.current)}))},h=p.createContext({dividerPosition:f,onDragStart:function(){},setHover:function(){},addDividerLineRef:function(){return p.createRef()},addGhostDividerLineRef:function(){return p.createRef()}}),g=function(e){(0,i.Z)(b,e);var t,n,g=(t=b,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var a=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,o.Z)(this,e)});function b(){var e;(0,r.Z)(this,b);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=g.call.apply(g,[this].concat(n)),(0,c.Z)((0,s.Z)(e),"state",{dividerPosition:f}),(0,c.Z)((0,s.Z)(e),"previousUserSelect",null),(0,c.Z)((0,s.Z)(e),"dividerHandlePosition",f),(0,c.Z)((0,s.Z)(e),"isDragging",!1),(0,c.Z)((0,s.Z)(e),"dividerLineRefs",[]),(0,c.Z)((0,s.Z)(e),"ghostDividerLineRefs",[]),(0,c.Z)((0,s.Z)(e),"hasInteractiveLayer",(function(){return!!e.props.interactiveLayerRef.current})),(0,c.Z)((0,s.Z)(e),"addDividerLineRef",(function(){var t=p.createRef();return e.dividerLineRefs.push(t),t})),(0,c.Z)((0,s.Z)(e),"addGhostDividerLineRef",(function(){var t=p.createRef();return e.ghostDividerLineRefs.push(t),t})),(0,c.Z)((0,s.Z)(e),"setHover",(function(t){e.isDragging||v(e.dividerLineRefs,(function(e){t?e.classList.add("hovering"):e.classList.remove("hovering")}))})),(0,c.Z)((0,s.Z)(e),"onDragStart",(function(t){!e.isDragging&&"mousedown"===t.type&&e.hasInteractiveLayer()&&(t.stopPropagation(),e.previousUserSelect=(0,d.l)({userSelect:"none",MozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none"}),window.addEventListener("mousemove",e.onDragMove),window.addEventListener("mouseup",e.onDragEnd),e.setHover(!0),e.isDragging=!0,v(e.dividerLineRefs,(function(e){e.style.backgroundColor="rgba(73,80,87,0.75)",e.style.cursor="col-resize"})),v(e.ghostDividerLineRefs,(function(e){e.style.cursor="col-resize";var t=e.parentNode;t&&(t.style.display="block")})))})),(0,c.Z)((0,s.Z)(e),"onDragMove",(function(t){if(e.isDragging&&"mousemove"===t.type&&e.hasInteractiveLayer()){var n=(0,u.FV)(e.props.interactiveLayerRef.current),r=(t.pageX-n.x)/n.width;e.dividerHandlePosition=(0,u.uZ)(r,0,1);var a=(0,u.yI)(e.dividerHandlePosition);v(e.ghostDividerLineRefs,(function(e){var t=e.parentNode;t&&(t.style.width="calc(".concat(a," + 0.5px)"))}))}})),(0,c.Z)((0,s.Z)(e),"onDragEnd",(function(t){e.isDragging&&"mouseup"===t.type&&e.hasInteractiveLayer()&&(e.cleanUpListeners(),e.previousUserSelect&&((0,d.l)(e.previousUserSelect),e.previousUserSelect=null),e.isDragging=!1,e.setHover(!1),v(e.dividerLineRefs,(function(e){e.style.backgroundColor="",e.style.cursor=""})),v(e.ghostDividerLineRefs,(function(e){e.style.cursor="";var t=e.parentNode;t&&(t.style.display="none")})),e.setState({dividerPosition:e.dividerHandlePosition}))})),(0,c.Z)((0,s.Z)(e),"cleanUpListeners",(function(){e.isDragging&&(window.removeEventListener("mousemove",e.onDragMove),window.removeEventListener("mouseup",e.onDragEnd))})),e}return(0,a.Z)(b,[{key:"componentWillUnmount",value:function(){this.cleanUpListeners()}},{key:"render",value:function(){var e={dividerPosition:this.state.dividerPosition,setHover:this.setHover,onDragStart:this.onDragStart,addDividerLineRef:this.addDividerLineRef,addGhostDividerLineRef:this.addGhostDividerLineRef};return(0,m.tZ)(h.Provider,{value:e},this.props.children)}}]),b}(p.Component);g.displayName="Provider";var b=h.Consumer},"./app/components/events/interfaces/spans/spanDetail.tsx":(e,t,n)=>{"use strict";n.d(t,{X2:()=>ne,wh:()=>J,iF:()=>K,$G:()=>re,ZP:()=>ae});var r=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),u=n("../node_modules/react/index.js"),d=n("../node_modules/@sentry/minimal/esm/index.js"),m=n("../node_modules/lodash/map.js"),f=n.n(m),v=n("./app/components/alert.tsx"),h=n("./app/components/dateTime.tsx"),g=n("./app/components/discoverButton.tsx"),b=n("./app/components/fileSize.tsx"),y=n("./app/components/links/externalLink.tsx"),Z=n("./app/components/links/link.tsx"),S=n("./app/components/loadingIndicator.tsx"),w=n("./app/components/organizations/globalSelectionHeader/getParams.tsx"),x=n("./app/components/pill.tsx"),T=n("./app/components/pills.tsx"),_=n("./app/constants/globalSelectionHeader.tsx"),k=n("./app/icons/index.tsx"),D=n("./app/locale.tsx"),j=n("./app/styles/space.tsx"),R=n("./app/types/utils.tsx"),E=n("./app/utils/discover/eventView.tsx"),I=n("./app/utils/discover/urls.tsx"),P=n("./app/utils/getDynamicText.tsx"),O=n("./app/utils/withApi.tsx"),C=n("./app/components/events/interfaces/spans/context.tsx"),L=n("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),z=n("../node_modules/@babel/runtime/regenerator/index.js"),M=n.n(z),N=n("./app/actionCreators/projects.tsx"),V=n("../node_modules/@emotion/core/dist/core.browser.esm.js");var U=function(e){(0,i.Z)(u,e);var t,n,p=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var a=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,o.Z)(this,e)});function u(){var e;(0,r.Z)(this,u);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=p.call.apply(p,[this].concat(n)),(0,c.Z)((0,s.Z)(e),"state",{loading:!0,html:void 0,link:void 0}),(0,c.Z)((0,s.Z)(e),"fetchData",(0,L.Z)(M().mark((function t(){var n,r,a,s,i,o,l,c,p;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.platform,a=n.api,s=n.orgSlug,i=n.projectSlug,r){t.next=3;break}return t.abrupt("return");case 3:e.setState({loading:!0}),t.t0=r,t.next="sentry.python"===t.t0?7:"sentry.javascript.node"===t.t0?9:11;break;case 7:return o="python-tracing",t.abrupt("break",13);case 9:return o="node-tracing",t.abrupt("break",13);case 11:return e.setState({loading:!1}),t.abrupt("return");case 13:return t.prev=13,t.next=16,(0,N.iC)(a,s,i,o);case 16:l=t.sent,c=l.html,p=l.link,e.setState({html:c,link:p}),t.next=26;break;case 22:t.prev=22,t.t1=t.catch(13),d.Tb(t.t1),e.setState({html:void 0,link:void 0});case 26:e.setState({loading:!1});case 27:case"end":return t.stop()}}),t,null,[[13,22]])})))),e}return(0,a.Z)(u,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return this.props.platform?this.state.loading?(0,V.tZ)("div",null,(0,V.tZ)(S.Z,null)):this.state.html?(0,V.tZ)("div",null,(0,V.tZ)("h4",null,(0,D.t)("Requires Manual Instrumentation")),(0,V.tZ)(A,{dangerouslySetInnerHTML:{__html:this.state.html}}),(0,V.tZ)("p",null,(0,D._N)("For in-depth instructions on setting up tracing, view [docLink:our documentation].",{docLink:(0,V.tZ)("a",{href:this.state.link})}))):(0,V.tZ)("div",null,(0,V.tZ)("h4",null,(0,D.t)("Requires Manual Instrumentation")),(0,V.tZ)("p",null,(0,D._N)("To manually instrument certain regions of your code, view [docLink:our documentation].",{docLink:(0,V.tZ)("a",{href:"https://docs.sentry.io/product/performance/getting-started/"})}))):null}}]),u}(u.Component);U.displayName="InlineDocs";var A=(0,p.Z)("div",{target:"e1p2d0fm0",label:"DocumentationWrapper"})({name:"196c2e",styles:"p{line-height:1.5;}pre{word-break:break-all;white-space:pre-wrap;}"});const B=(0,O.Z)(U);var H=n("./app/components/events/interfaces/spans/types.tsx"),q=n("./app/components/events/interfaces/spans/utils.tsx");function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=["Encoded Body Size","Decoded Body Size","Transfer Size"],Q=function(e){(0,i.Z)(m,e);var t,n,p=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var a=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,o.Z)(this,e)});function m(){var e;(0,r.Z)(this,m);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=p.call.apply(p,[this].concat(n)),(0,c.Z)((0,s.Z)(e),"state",{transactionResults:void 0}),e}return(0,a.Z)(m,[{key:"componentDidMount",value:function(){var e=this,t=this.props.span;(0,q.hw)(t)||this.fetchSpanDescendents(t.span_id,t.trace_id).then((function(t){t.data&&Array.isArray(t.data)&&e.setState({transactionResults:t.data})})).catch((function(e){d.Tb(e)}))}},{key:"fetchSpanDescendents",value:function(e,t){var n,r=this.props,a=r.api,s=r.organization,i=r.quickTrace,o=r.trace,l=r.event;if(!s.features.includes("discover-basic"))return Promise.resolve({data:[]});if(null!=i&&null!==(n=i.trace)&&void 0!==n&&n.length)return Promise.resolve({data:i.trace.filter((function(t){return t.parent_span_id===e})).map((function(e){return{"project.name":e.project_slug,transaction:e.transaction,"trace.span":e.span_id,id:e.event_id}}))});var c="/organizations/".concat(s.slug,"/eventsv2/"),p=(0,w.Q)((0,q.TC)({start:o.traceStartTimestamp,end:o.traceEndTimestamp})),u=p.start,d=p.end,m={field:["transaction","id","trace.span"],sort:["-id"],query:"event.type:transaction trace:".concat(t," trace.parent_span:").concat(e),project:s.features.includes("global-views")?[_.mP]:[Number(l.projectID)],referrer:"api.trace-view.span-detail",start:u,end:d};return a.requestPromise(c,{method:"GET",query:m})}},{key:"renderTraversalButton",value:function(){if(!this.state.transactionResults)return(0,V.tZ)(Y,{size:"xsmall",disabled:!0},(0,V.tZ)($,{size:12}));if(this.state.transactionResults.length<=0)return(0,V.tZ)(Y,{size:"xsmall",disabled:!0},(0,D.t)("No Children"));var e=this.props,t=e.span,n=e.orgId,r=e.trace,a=e.event,s=e.organization;if((0,R.hu)(!(0,q.hw)(t)),1===this.state.transactionResults.length)return null;var i=new Set(s.features),o=(0,q.TC)({start:r.traceStartTimestamp,end:r.traceEndTimestamp}),l=o.start,c=o.end,p=E.ZP.fromSavedQuery({id:void 0,name:"Children from Span ID ".concat(t.span_id),fields:["transaction","project","trace.span","transaction.duration","timestamp"],orderby:"-timestamp",query:"event.type:transaction trace:".concat(t.trace_id," trace.parent_span:").concat(t.span_id),projects:i.has("global-views")?[_.mP]:[Number(a.projectID)],version:2,start:l,end:c});return(0,V.tZ)(Y,{"data-test-id":"view-child-transactions",size:"xsmall",to:p.getResultsViewUrlTarget(n)},(0,D.t)("View Children"))}},{key:"renderSpanChild",value:function(){var e=this;if(!this.state.transactionResults||1!==this.state.transactionResults.length)return null;var t,n=(t=this.state.transactionResults[0],(0,I.JE)({id:t.id,"project.name":t["project.name"]})),r=(0,V.tZ)(C.$,null,(function(t){var r=(0,t.getViewChildTransactionTarget)(W(W({},e.state.transactionResults[0]),{},{eventSlug:n}));return r?(0,V.tZ)(Y,{"data-test-id":"view-child-transaction",size:"xsmall",to:r},(0,D.t)("View Transaction")):null})),a=this.state.transactionResults[0];return(0,V.tZ)(ne,{title:"Child Transaction",extra:r},"".concat(a.transaction," (").concat(a["project.name"],")"))}},{key:"renderTraceButton",value:function(){var e=this.props,t=e.span,n=e.orgId,r=e.organization,a=e.trace,s=e.event,i=(0,q.TC)({start:a.traceStartTimestamp,end:a.traceEndTimestamp}),o=i.start,l=i.end;if((0,q.hw)(t))return null;var c=new Set(r.features),p=E.ZP.fromSavedQuery({id:void 0,name:"Transactions with Trace ID ".concat(t.trace_id),fields:["transaction","project","trace.span","transaction.duration","timestamp"],orderby:"-timestamp",query:"event.type:transaction trace:".concat(t.trace_id),projects:c.has("global-views")?[_.mP]:[Number(s.projectID)],version:2,start:o,end:l});return(0,V.tZ)(Y,{size:"xsmall",to:p.getResultsViewUrlTarget(n)},(0,D.t)("Search by Trace"))}},{key:"renderOrphanSpanMessage",value:function(){var e=this.props.span;return(0,q.ro)(e)?(0,V.tZ)(v.Z,{system:!0,type:"info",icon:(0,V.tZ)(k.FC,{size:"md"})},(0,D.t)("This is a span that has no parent span within this transaction. It has been attached to the transaction root span by default.")):null}},{key:"renderSpanErrorMessage",value:function(){var e=this.props,t=e.orgId,n=e.spanErrors,r=e.totalNumberOfErrors,a=e.span,s=e.trace,i=e.organization,o=e.event;if(0===n.length||0===r||(0,q.hw)(a))return null;var l=(0,I.JE)(n[0]),c=(0,q.TC)({start:s.traceStartTimestamp,end:s.traceEndTimestamp}),p=c.start,u=c.end,d=new Set(i.features),m=E.ZP.fromSavedQuery({id:void 0,name:"Error events associated with span ".concat(a.span_id),fields:["title","project","issue","timestamp"],orderby:"-timestamp",query:"event.type:error trace:".concat(a.trace_id," trace.span:").concat(a.span_id),projects:d.has("global-views")?[_.mP]:[Number(o.projectID)],version:2,start:p,end:u}),f=1===n.length?{pathname:(0,I.lS)({orgSlug:t,eventSlug:l})}:m.getResultsViewUrlTarget(t),h=1===r?(0,V.tZ)(Z.Z,{to:f},(0,V.tZ)("span",null,(0,D.t)("An error event occurred in this span."))):n.length===r?(0,V.tZ)("div",null,(0,D._N)("[link] occurred in this span.",{link:(0,V.tZ)(Z.Z,{to:f},(0,V.tZ)("span",null,(0,D.t)("%d error events",r)))})):(0,V.tZ)("div",null,(0,D._N)("[link] occurred in this span.",{link:(0,V.tZ)(Z.Z,{to:f},(0,V.tZ)("span",null,(0,D.t)("%d out of %d error events",n.length,r)))}));return(0,V.tZ)(v.Z,{system:!0,type:"error",icon:(0,V.tZ)(k.FC,{size:"md"})},h)}},{key:"partitionSizes",value:function(e){var t=G.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{}),n=W({},e);return G.forEach((function(e){return delete n[e]})),{sizeKeys:t,nonSizeKeys:n}}},{key:"renderSpanDetails",value:function(){var e,t,n,r=this.props,a=r.span,s=r.event,i=r.organization;if((0,q.hw)(a))return(0,V.tZ)(K,null,(0,V.tZ)(B,{platform:(null===(n=s.sdk)||void 0===n?void 0:n.name)||"",orgSlug:i.slug,projectSlug:s.projectSlug}));var o=a.start_timestamp,l=a.timestamp,c="".concat(Number((1e3*(l-o)).toFixed(3)).toLocaleString(),"ms"),p=Object.keys(a).filter((function(e){return!H.g.has(e)})),d=this.partitionSizes(null!==(e=null==a?void 0:a.data)&&void 0!==e?e:{}),m=d.sizeKeys,v=d.nonSizeKeys,g=G.map((function(e){return m[e]})).every((function(e){return 0===e}));return(0,V.tZ)(u.Fragment,null,this.renderOrphanSpanMessage(),this.renderSpanErrorMessage(),(0,V.tZ)(K,null,(0,V.tZ)("table",{className:"table key-value"},(0,V.tZ)("tbody",null,(0,V.tZ)(ne,{title:"Span ID",extra:this.renderTraversalButton()},a.span_id),(0,V.tZ)(ne,{title:"Parent Span ID"},a.parent_span_id||""),this.renderSpanChild(),(0,V.tZ)(ne,{title:"Trace ID",extra:this.renderTraceButton()},a.trace_id),(0,V.tZ)(ne,{title:"Description"},null!==(t=null==a?void 0:a.description)&&void 0!==t?t:""),(0,V.tZ)(ne,{title:"Status"},a.status||""),(0,V.tZ)(ne,{title:"Start Date"},(0,P.Z)({fixed:"Mar 16, 2020 9:10:12 AM UTC",value:(0,V.tZ)(u.Fragment,null,(0,V.tZ)(h.Z,{date:1e3*o})," (".concat(o,")"))})),(0,V.tZ)(ne,{title:"End Date"},(0,P.Z)({fixed:"Mar 16, 2020 9:10:13 AM UTC",value:(0,V.tZ)(u.Fragment,null,(0,V.tZ)(h.Z,{date:1e3*l})," (".concat(l,")"))})),(0,V.tZ)(ne,{title:"Duration"},c),(0,V.tZ)(ne,{title:"Operation"},a.op||""),(0,V.tZ)(ne,{title:"Same Process as Parent"},void 0!==a.same_process_as_parent?String(a.same_process_as_parent):null),(0,V.tZ)(re,{span:a}),g&&(0,V.tZ)(te,null,"The following sizes were not collected for security reasons. Check if the host serves the appropriate",(0,V.tZ)(y.Z,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Timing-Allow-Origin"},(0,V.tZ)("span",{className:"val-string"},"Timing-Allow-Origin")),"header. You may have to enable this collection manually."),f()(m,(function(e,t){return(0,V.tZ)(ne,{title:t,key:t},(0,V.tZ)(u.Fragment,null,(0,V.tZ)(b.Z,{bytes:e}),e>=1024&&(0,V.tZ)("span",null," (".concat(JSON.stringify(e,null,4)||""," B)"))))})),f()(v,(function(e,t){return(0,V.tZ)(ne,{title:t,key:t},JSON.stringify(e,null,4)||"")})),p.map((function(e){return(0,V.tZ)(ne,{title:e,key:e},JSON.stringify(a[e],null,4)||"")}))))))}},{key:"render",value:function(){return(0,V.tZ)(J,{"data-component":"span-detail",onClick:function(e){e.stopPropagation()}},this.renderSpanDetails())}}]),m}(u.Component);Q.displayName="SpanDetail";var Y=(0,p.Z)(g.Z,{target:"eb56mm20",label:"StyledDiscoverButton"})("position:absolute;top:",(0,j.Z)(.75),";right:",(0,j.Z)(.5),";"),J=(0,p.Z)("div",{target:"eb56mm21",label:"SpanDetailContainer"})("border-bottom:1px solid ",(function(e){return e.theme.border}),";cursor:auto;"),K=(0,p.Z)("div",{target:"eb56mm22",label:"SpanDetails"})("padding:",(0,j.Z)(2),";"),X=(0,p.Z)("td",{target:"eb56mm23",label:"ValueTd"})({name:"79elbk",styles:"position:relative;"}),$=(0,p.Z)(S.Z,{target:"eb56mm24",label:"StyledLoadingIndicator"})("display:flex;align-items:center;height:",(0,j.Z)(2),";margin:0;"),ee=(0,p.Z)("p",{target:"eb56mm25",label:"StyledText"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:",(0,j.Z)(2)," ",(0,j.Z)(0),";"),te=function(e){var t=e.children;return(0,V.tZ)("tr",null,(0,V.tZ)("td",{className:"key"}),(0,V.tZ)(X,{className:"value"},(0,V.tZ)(ee,null,t)))};te.displayName="TextTr";var ne=function(e){var t=e.title,n=e.keep,r=e.children,a=e.extra,s=void 0===a?null:a;return n||r?(0,V.tZ)("tr",null,(0,V.tZ)("td",{className:"key"},t),(0,V.tZ)(X,{className:"value"},(0,V.tZ)("pre",{className:"val"},(0,V.tZ)("span",{className:"val-string"},r)),s)):null};ne.displayName="Row";var re=function(e){var t=e.span,n=null==t?void 0:t.tags;if(!n)return null;var r=Object.keys(n);return r.length<=0?null:(0,V.tZ)("tr",null,(0,V.tZ)("td",{className:"key"},"Tags"),(0,V.tZ)("td",{className:"value"},(0,V.tZ)(T.Z,{style:{padding:"8px"}},r.map((function(e,t){return(0,V.tZ)(x.Z,{key:t,name:e,value:String(n[e])||""})})))))};re.displayName="Tags";const ae=(0,O.Z)(Q)},"./app/components/events/interfaces/spans/types.tsx":(e,t,n)=>{"use strict";n.d(t,{g:()=>a,t:()=>r});var r,a=new Set(["trace_id","parent_span_id","span_id","start_timestamp","timestamp","same_process_as_parent","op","description","status","data","tags"]);!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center"}(r||(r={}))},"./app/components/events/interfaces/spans/utils.tsx":(e,t,n)=>{"use strict";n.d(t,{IG:()=>y,n0:()=>Z,TC:()=>S,hw:()=>w,ro:()=>x,Rr:()=>T,yk:()=>_,j_:()=>k,PA:()=>D,k9:()=>j,yn:()=>E,h_:()=>I,PC:()=>P,o0:()=>O,is:()=>L,vu:()=>z});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=n("../node_modules/lodash/isNumber.js"),s=n.n(a),i=n("../node_modules/lodash/isString.js"),o=n.n(i),l=n("../node_modules/lodash/set.js"),c=n.n(l),p=n("../node_modules/moment/moment.js"),u=n.n(p),d=n("./app/types/event.tsx"),m=n("./app/types/utils.tsx"),f=n("./app/utils/performance/vitals/constants.tsx");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g,b=function(e){var t=e.startTimestamp,n=e.endTimestamp;return t>n?{startTimestamp:n,endTimestamp:t}:e};!function(e){e[e.Stable=0]="Stable",e[e.Reversed=1]="Reversed",e[e.Equal=2]="Equal"}(g||(g={}));var y=function(e){var t=e.viewStart,n=e.viewEnd,r=b({startTimestamp:e.traceStartTimestamp,endTimestamp:e.traceEndTimestamp}),a=r.startTimestamp,s=r.endTimestamp,i=s-a,o=a+t*i,l=s-(1-n)*i-o;return function(e){if(i<=0)return{type:"TRACE_TIMESTAMPS_EQUAL",isSpanVisibleInView:!0};if(l<=0)return{type:"INVALID_VIEW_WINDOW",isSpanVisibleInView:!0};var t=b(e),n=t.startTimestamp,r=t.endTimestamp,a=function(e){var t=e.startTimestamp,n=e.endTimestamp;return t<n?g.Stable:t===n?g.Equal:g.Reversed}(e),s=(n-o)/l,c=(r-o)/l,p=c>0&&s<1;switch(a){case g.Equal:return{type:"TIMESTAMPS_EQUAL",start:s,width:1,isSpanVisibleInView:c>=0&&s<=1};case g.Reversed:return{type:"TIMESTAMPS_REVERSED",start:s,end:c,isSpanVisibleInView:p};case g.Stable:return{type:"TIMESTAMPS_STABLE",start:s,end:c,isSpanVisibleInView:p};default:return a}}};function Z(e){return{trace_id:e.traceID,span_id:e.rootSpanID,parent_span_id:e.parentSpanID,start_timestamp:e.traceStartTimestamp,timestamp:e.traceEndTimestamp,op:e.op,description:e.description,data:{},status:e.rootSpanStatus}}function S(e){return{start:u().unix(e.start).subtract(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS"),end:u().unix(e.end).add(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS")}}function w(e){return"type"in e&&"gap"===e.type}function x(e){if("type"in e){if("orphan"===e.type)return!0;if("gap"===e.type)return e.isOrphan}return!1}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return w(e)?t:e.span_id}function _(e){if(!w(e))return e.op}function k(e){return w(e)?"gap-span":e.trace_id}function D(e){var t;return null==e||null===(t=e.contexts)||void 0===t?void 0:t.trace}function j(e){var t,n=e.entries.find((function(e){return e.type===d.U.SPANS})),r=null!==(t=null==n?void 0:n.data)&&void 0!==t?t:[],a=D(e),i=a&&a.trace_id||"",l=a&&a.span_id||"",p=a&&a.op||"transaction",u=a&&a.description,f=a&&a.parent_span_id,v=a&&a.status;if(!n||r.length<=0)return{op:p,childSpans:{},traceStartTimestamp:e.startTimestamp,traceEndTimestamp:e.endTimestamp,traceID:i,rootSpanID:l,rootSpanStatus:v,parentSpanID:f,numOfSpans:0,spans:[],description:u};var g=new Set(r.map((function(e){return e.span_id})));g.add(l);var b={op:p,childSpans:{},traceStartTimestamp:e.startTimestamp,traceEndTimestamp:e.endTimestamp,traceID:i,rootSpanID:l,rootSpanStatus:v,parentSpanID:f,numOfSpans:r.length,spans:r,description:u},y=r.reduce((function(e,t){var n,r,a=t,i=function(e){return w(e)?"gap-span":e.parent_span_id}(a),p=i&&g.has(i);r=i,o()(r)&&r.length>0&&p||(a.parent_span_id=l,a=h({type:"orphan"},a)),(0,m.hu)(a.parent_span_id);var u=null!==(n=e.childSpans[a.parent_span_id])&&void 0!==n?n:[];u.push(a),c()(e.childSpans,a.parent_span_id,u),(!e.traceStartTimestamp||a.start_timestamp<e.traceStartTimestamp)&&(e.traceStartTimestamp=a.start_timestamp);var d=s()(a.timestamp);return e.traceEndTimestamp?d&&a.timestamp>e.traceEndTimestamp?(e.traceEndTimestamp=a.timestamp,e):(a.start_timestamp>e.traceEndTimestamp&&(e.traceEndTimestamp=a.start_timestamp),e):d?(e.traceEndTimestamp=a.timestamp,e):(e.traceEndTimestamp=a.start_timestamp,e)}),b);return Object.values(y.childSpans).forEach((function(e){e.sort(R)})),y}function R(e,t){return x(e)&&!x(t)?1:!x(e)&&x(t)||e.start_timestamp<t.start_timestamp?-1:e.start_timestamp===t.start_timestamp?0:1}function E(e){return"number"!=typeof e&&"orphan"===(null==e?void 0:e.type)}function I(e){return E(e)?e.depth:e}function P(e){var t,n=null===(t=e.sdk)||void 0===t?void 0:t.name;return!!n&&["sentry.javascript.browser","sentry.javascript.react","sentry.javascript.gatsby","sentry.javascript.ember","sentry.javascript.vue","sentry.javascript.angular"].includes(n.toLowerCase())}var O=["mark","paint"];function C(e){var t=Object.keys(e);return Object.values(f.r).filter((function(e){return t.includes(e.slug)})).some((function(t){var n=e[t.slug];return"number"==typeof n&&n>=t.poorThreshold}))}function L(e){if(!e.measurements)return new Map;var t=Object.keys(e.measurements).filter((function(e){return e.startsWith("mark.")})).map((function(t){var n=t.slice("mark.".length),r=e.measurements[n];return{name:t,timestamp:e.measurements[t].value,value:r?r.value:void 0}})),n=new Map;return t.forEach((function(e){var t=e.name.slice("mark.".length),a=e.value;if(n.has(e.timestamp)){var s=n.get(e.timestamp);return s.marks=h(h({},s.marks),{},(0,r.Z)({},t,a)),s.failedThreshold||(s.failedThreshold=C(s.marks)),void n.set(e.timestamp,s)}var i=(0,r.Z)({},t,a);n.set(e.timestamp,{marks:i,failedThreshold:C(i)})})),n}function z(e,t){var n=t({startTimestamp:e,endTimestamp:e});switch(n.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:n.start,width:1e-5,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:n.start,width:n.end-n.start,isSpanVisibleInView:n.isSpanVisibleInView};default:return n}}},"./app/components/fileSize.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>o}),n("../node_modules/react/index.js");var r=n("./app/utils.tsx"),a=n("./app/utils/getDynamicText.tsx"),s=n("../node_modules/@emotion/core/dist/core.browser.esm.js");function i(e){var t=e.className,n=e.bytes;return(0,s.tZ)("span",{className:t},(0,a.Z)({value:(0,r.F)(n),fixed:"xx KB"}))}i.displayName="FileSize";const o=i},"./app/components/waterfallTree/row.tsx":(e,t,n)=>{"use strict";n.d(t,{X2:()=>i,Qc:()=>o,E5:()=>l});var r=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),a=n("./app/components/waterfallTree/constants.tsx"),s=n("./app/components/waterfallTree/utils.tsx"),i=(0,r.Z)("div",{target:"e1bn97b00",label:"Row"})("display:",(function(e){return e.visible?"block":"none"}),";border-top:",(function(e){return e.showBorder?"1px solid ".concat(e.theme.border):null}),";margin-top:",(function(e){return e.showBorder?"-1px":null}),";position:relative;overflow:hidden;min-height:",a.d,"px;cursor:",(function(e){var t;return null!==(t=e.cursor)&&void 0!==t?t:"pointer"}),";transition:background-color 0.15s ease-in-out;&:last-child{& > [data-component='span-detail']{border-bottom:none !important;}}"),o=(0,r.Z)("div",{target:"e1bn97b01",label:"RowCellContainer"})("display:flex;position:relative;height:",a.d,"px;overflow:hidden;user-select:none;&:hover > div[data-type='span-row-cell']{background-color:",(function(e){return e.showDetail?e.theme.textColor:e.theme.backgroundSecondary}),";}"),l=(0,r.Z)("div",{target:"e1bn97b02",label:"RowCell"})("position:relative;height:100%;overflow:hidden;background-color:",(function(e){return(0,s.dF)(e)}),";transition:background-color 125ms ease-in-out;color:",(function(e){return e.showDetail?e.theme.background:"inherit"}),";")},"./app/components/waterfallTree/rowDivider.tsx":(e,t,n)=>{"use strict";n.d(t,{x:()=>a,H:()=>s});var r=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),a=(0,r.Z)("div",{target:"e1rk97990",label:"DividerLine"})("background-color:",(function(e){return e.showDetail?e.theme.textColor:e.theme.border}),";position:absolute;height:100%;width:1px;transition:background-color 125ms ease-in-out;z-index:",(function(e){return e.theme.zIndex.traceView.dividerLine}),";&:after{content:'';z-index:-1;position:absolute;left:-2px;top:0;width:5px;height:100%;}&.hovering{background-color:",(function(e){return e.theme.textColor}),";width:3px;transform:translateX(-1px);margin-right:-2px;cursor:ew-resize;&:after{left:-2px;width:7px;}}"),s=(0,r.Z)("div",{target:"e1rk97991",label:"DividerLineGhostContainer"})({name:"b4kcmh",styles:"position:absolute;width:100%;height:100%;"})},"./app/components/waterfallTree/rowTitle.tsx":(e,t,n)=>{"use strict";n.d(t,{mw:()=>s,Wh:()=>i,fI:()=>o});var r=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),a=n("./app/components/waterfallTree/constants.tsx"),s=(0,r.Z)("div",{target:"e1wk9tyo0",label:"RowTitleContainer"})("display:flex;align-items:center;height:",a.d,"px;position:absolute;left:0;top:0;width:100%;user-select:none;"),i=(0,r.Z)("div",{target:"e1wk9tyo1",label:"RowTitle"})("position:relative;height:100%;font-size:",(function(e){return e.theme.fontSizeSmall}),";white-space:nowrap;display:flex;flex:1;align-items:center;"),o=(0,r.Z)("span",{target:"e1wk9tyo2",label:"OperationName"})("color:",(function(e){return e.spanErrors.length?e.theme.error:"inherit"}),";")},"./app/components/waterfallTree/treeConnector.tsx":(e,t,n)=>{"use strict";n.d(t,{Ll:()=>l,UV:()=>c,DN:()=>p,U1:()=>u,rw:()=>d,Oq:()=>m});var r=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),a=n("./app/components/waterfallTree/constants.tsx"),s=n("./app/components/waterfallTree/utils.tsx"),i=n("./app/icons/index.tsx"),o=n("./app/styles/space.tsx"),l=46,c=(0,r.Z)("div",{target:"enpv6dr0",label:"ConnectorBar"})("height:250%;border-left:1px ",(function(e){return e.orphanBranch?"dashed":"solid"})," ",(function(e){return e.theme.border}),";top:-5px;position:absolute;"),p=(0,r.Z)("div",{target:"enpv6dr1",label:"TreeConnector"})("height:",(function(e){return e.isLast?a.d/2:a.d}),"px;width:100%;border-left:1px ",(function(e){return e.orphanBranch?"dashed":"solid"})," ",(function(e){return e.theme.border}),";position:absolute;top:0;&:before{content:'';height:1px;border-bottom:1px ",(function(e){return e.orphanBranch?"dashed":"solid"})," ",(function(e){return e.theme.border}),";width:100%;position:absolute;bottom:",(function(e){return e.isLast?"0":"50%"}),";}&:after{content:'';background-color:",(function(e){return e.theme.border}),";border-radius:4px;height:3px;width:3px;position:absolute;right:0;top:",a.d/2-2,"px;}"),u=(0,r.Z)("div",{target:"enpv6dr2",label:"TreeToggle"})("height:16px;white-space:nowrap;min-width:30px;display:flex;align-items:center;justify-content:center;border-radius:99px;padding:0px ",(0,o.Z)(.5),";transition:all 0.15s ease-in-out;font-size:10px;line-height:0;z-index:1;",(function(e){return(0,s.uu)(e)})),d=(0,r.Z)("div",{target:"enpv6dr3",label:"TreeToggleContainer"})("position:relative;height:",a.d,"px;width:40px;min-width:40px;margin-right:",(0,o.Z)(1),";z-index:",(function(e){return e.theme.zIndex.traceView.spanTreeToggler}),";display:flex;justify-content:flex-end;align-items:center;"),m=(0,r.Z)(i.g6,{target:"enpv6dr4",label:"StyledIconChevron"})("width:7px;margin-left:",(0,o.Z)(.25),";")},"./app/utils/userselect.tsx":(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var r=function(e){var t={userSelect:document.body.style.userSelect,MozUserSelect:document.body.style.MozUserSelect,msUserSelect:document.body.style.msUserSelect,webkitUserSelect:document.body.style.webkitUserSelect};return document.body.style.userSelect=e.userSelect||"",document.body.style.MozUserSelect=e.MozUserSelect||"",document.body.style.msUserSelect=e.msUserSelect||"",document.body.style.webkitUserSelect=e.webkitUserSelect||"",t}}}]);
//# sourceMappingURL=app_components_events_interfaces_spans_dividerHandlerManager_tsx-app_components_events_interf-7203f7.js.map