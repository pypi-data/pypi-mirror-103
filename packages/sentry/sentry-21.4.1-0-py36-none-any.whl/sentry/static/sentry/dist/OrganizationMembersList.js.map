{"version":3,"sources":["webpack:///./app/utils/recreateRoute.tsx","webpack:///./app/utils/routeTitle.tsx","webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/organizationMembers/components/membersFilter.tsx","webpack:///./app/views/settings/organizationMembers/organizationMemberRow.tsx","webpack:///./app/views/settings/organizationMembers/organizationMembersList.tsx"],"names":["recreateRoute","to","options","lastRootIndex","routeIndex","routes","params","location","stepBack","paths","map","path","indexOf","findLastIndex","slice","baseRoute","search","hash","fullRoute","join","replaceRouterParams","routeName","orgSlug","withSentry","projectSlug","tmplBase","tmpl","AsyncView","title","this","getTitle","renderComponent","AsyncComponent","getBoolean","list","Array","isArray","length","v","toLowerCase","includes","MembersFilter","className","roles","query","onChange","tokenizeSearch","filters","getTagValues","isInvited","ssoLinked","has2fa","handleRoleFilter","id","roleList","Set","has","add","newSearch","copy","setTagValues","stringifyQueryObject","handleBoolFilter","key","value","newQueryObject","removeTag","Boolean","toString","FilterContainer","FilterHeader","t","FilterLists","Filters","name","data-test-id","checked","BooleanFilter","children","isDisabled","isActive","toggle","p","theme","background","dropShadowLight","border","backgroundSecondary","subText","fontSizeExtraSmall","space","fontSizeMedium","fontSizeSmall","OrganizationMemberRow","busy","onRemove","props","setState","member","onLeave","onSendInvite","orgName","status","requireLink","memberCanLeave","currentUser","canRemoveMembers","canAddMembers","flags","email","roleName","pending","expired","user","needsSso","isCurrentUser","showRemoveButton","showLeaveButton","canRemoveMember","detailsUrl","isInviteSuccessful","isInviting","showResendButton","StyledPanelItem","MemberHeading","size","MemberDescription","style","margin","UserName","Email","InvitedRole","tct","LoadingContainer","mini","disabled","priority","onClick","handleSendInvite","AuthStatus","isCircled","color","message","onConfirm","handleRemove","icon","state","handleLeave","React","PanelItem","Section","Link","fontSizeLarge","textColor","OrganizationMembersList","orgId","api","requestPromise","method","data","members","filter","organization","slug","removeMember","addErrorMessage","addSuccessMessage","redirectToRemainingOrganization","removeOrg","invited","resendMemberInvite","memberId","regenerate","paginate","allowError","error","routeTitleGen","membersPageLinks","currentMember","access","canRemove","ConfigStore","isOnlyOwner","find","role","authProvider","require_link","renderSearch","defaultSearchBar","handleChange","SearchWrapper","closeOnEscape","getActorProps","isOpen","FilterWrapper","StyledMembersFilter","MEMBER_ROLES","css","renderSearchInput","updateRoute","placeholder","pageLinks","zIndex","dropdown","withOrganization"],"mappings":"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","file":"OrganizationMembersList.53805cff29e61a05aef4.js","sourcesContent":["import {Location} from 'history';\nimport findLastIndex from 'lodash/findLastIndex';\n\nimport replaceRouterParams from 'app/utils/replaceRouterParams';\nimport {RouteWithName} from 'app/views/settings/components/settingsBreadcrumb/types';\n\ntype Options = {\n  routes: RouteWithName[];\n\n  // parameters to replace any route string parameters (e.g. if route is `:orgId`,\n  // params should have `{orgId: slug}`\n  params: {[key: string]: string | undefined};\n\n  /**\n   * The number of routes to to pop off of `routes\n   * Must be < 0\n   *\n   * There's no ts type for negative numbers so we are arbitrarily specifying -1-9\n   */\n  stepBack?: -1 | -2 | -3 | -4 | -5 | -6 | -7 | -8 | -9;\n  location?: Location;\n};\n\n/**\n * Given a route object or a string and a list of routes + params from router, this will attempt to recreate a location string while replacing url params.\n * Can additionally specify the number of routes to move back\n *\n * See tests for examples\n */\nexport default function recreateRoute(\n  to: string | RouteWithName,\n  options: Options\n): string {\n  const {routes, params, location, stepBack} = options;\n  const paths = routes.map(({path}) => path || '');\n  let lastRootIndex: number;\n  let routeIndex: number | undefined;\n\n  // TODO(ts): typescript things\n  if (typeof to !== 'string') {\n    routeIndex = routes.indexOf(to) + 1;\n    lastRootIndex = findLastIndex(paths.slice(0, routeIndex), path => path[0] === '/');\n  } else {\n    lastRootIndex = findLastIndex(paths, path => path[0] === '/');\n  }\n\n  let baseRoute = paths.slice(lastRootIndex, routeIndex);\n\n  if (typeof stepBack !== 'undefined') {\n    baseRoute = baseRoute.slice(0, stepBack);\n  }\n\n  const search = location?.search ?? '';\n  const hash = location?.hash ?? '';\n\n  const fullRoute = `${baseRoute.join('')}${\n    typeof to !== 'string' ? '' : to\n  }${search}${hash}`;\n\n  return replaceRouterParams(fullRoute, params);\n}\n","function routeTitleGen(\n  routeName: string,\n  orgSlug: string,\n  withSentry: boolean = true,\n  projectSlug?: string\n): string {\n  const tmplBase = `${routeName} - ${orgSlug}`;\n  const tmpl = projectSlug ? `${tmplBase} - ${projectSlug}` : tmplBase;\n\n  return withSentry ? `${tmpl} - Sentry` : tmpl;\n}\n\nexport default routeTitleGen;\n","import React from 'react';\nimport DocumentTitle from 'react-document-title';\n\nimport AsyncComponent from 'app/components/asyncComponent';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    const title = this.getTitle();\n    return (\n      <DocumentTitle title={`${title ? `${title} - ` : ''}Sentry`}>\n        {this.renderComponent() as React.ReactChild}\n      </DocumentTitle>\n    );\n  }\n}\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport Checkbox from 'app/components/checkbox';\nimport Switch from 'app/components/switchButton';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {MemberRole} from 'app/types';\nimport {stringifyQueryObject, tokenizeSearch} from 'app/utils/tokenizeSearch';\n\ntype Props = {\n  className?: string;\n  roles: MemberRole[];\n  query: string;\n  onChange: (query: string) => void;\n};\n\ntype BooleanFilterProps = {\n  onChange: (value: boolean | null) => void;\n  value: boolean | null;\n  children: React.ReactNode;\n};\n\ntype Filters = {\n  roles: string[];\n  isInvited: boolean | null;\n  ssoLinked: boolean | null;\n  has2fa: boolean | null;\n};\n\nconst getBoolean = (list: string[]) =>\n  Array.isArray(list) && list.length\n    ? list && list.map(v => v.toLowerCase()).includes('true')\n    : null;\n\nconst MembersFilter = ({className, roles, query, onChange}: Props) => {\n  const search = tokenizeSearch(query);\n\n  const filters = {\n    roles: search.getTagValues('role') || [],\n    isInvited: getBoolean(search.getTagValues('isInvited')),\n    ssoLinked: getBoolean(search.getTagValues('ssoLinked')),\n    has2fa: getBoolean(search.getTagValues('has2fa')),\n  };\n\n  const handleRoleFilter = (id: string) => () => {\n    const roleList = new Set(\n      search.getTagValues('role') ? [...search.getTagValues('role')] : []\n    );\n\n    if (roleList.has(id)) {\n      roleList.delete(id);\n    } else {\n      roleList.add(id);\n    }\n\n    const newSearch = search.copy();\n    newSearch.setTagValues('role', [...roleList]);\n    onChange(stringifyQueryObject(newSearch));\n  };\n\n  const handleBoolFilter = (key: keyof Filters) => (value: boolean | null) => {\n    const newQueryObject = search.copy();\n    newQueryObject.removeTag(key);\n    if (value !== null) {\n      newQueryObject.setTagValues(key, [Boolean(value).toString()]);\n    }\n\n    onChange(stringifyQueryObject(newQueryObject));\n  };\n\n  return (\n    <FilterContainer className={className}>\n      <FilterHeader>{t('Filter By')}</FilterHeader>\n\n      <FilterLists>\n        <Filters>\n          <h3>{t('User Role')}</h3>\n          {roles.map(({id, name}) => (\n            <label key={id}>\n              <Checkbox\n                data-test-id={`filter-role-${id}`}\n                checked={filters.roles.includes(id)}\n                onChange={handleRoleFilter(id)}\n              />\n              {name}\n            </label>\n          ))}\n        </Filters>\n\n        <Filters>\n          <h3>{t('Status')}</h3>\n          <BooleanFilter\n            data-test-id=\"filter-isInvited\"\n            onChange={handleBoolFilter('isInvited')}\n            value={filters.isInvited}\n          >\n            {t('Invited')}\n          </BooleanFilter>\n          <BooleanFilter\n            data-test-id=\"filter-has2fa\"\n            onChange={handleBoolFilter('has2fa')}\n            value={filters.has2fa}\n          >\n            {t('2FA')}\n          </BooleanFilter>\n          <BooleanFilter\n            data-test-id=\"filter-ssoLinked\"\n            onChange={handleBoolFilter('ssoLinked')}\n            value={filters.ssoLinked}\n          >\n            {t('SSO Linked')}\n          </BooleanFilter>\n        </Filters>\n      </FilterLists>\n    </FilterContainer>\n  );\n};\n\nconst BooleanFilter = ({onChange, value, children}: BooleanFilterProps) => (\n  <label>\n    <Checkbox\n      checked={value !== null}\n      onChange={() => onChange(value === null ? true : null)}\n    />\n    {children}\n    <Switch\n      isDisabled={value === null}\n      isActive={value === true}\n      toggle={() => onChange(!value)}\n    />\n  </label>\n);\n\nconst FilterContainer = styled('div')`\n  border-radius: 4px;\n  background: ${p => p.theme.background};\n  box-shadow: ${p => p.theme.dropShadowLight};\n  border: 1px solid ${p => p.theme.border};\n`;\n\nconst FilterHeader = styled('h2')`\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom: 1px solid ${p => p.theme.border};\n  background: ${p => p.theme.backgroundSecondary};\n  color: ${p => p.theme.subText};\n  text-transform: uppercase;\n  font-size: ${p => p.theme.fontSizeExtraSmall};\n  padding: ${space(1)};\n  margin: 0;\n`;\n\nconst FilterLists = styled('div')`\n  display: grid;\n  grid-template-columns: 100px max-content;\n  grid-gap: ${space(3)};\n  margin: ${space(1.5)};\n  margin-top: ${space(0.75)};\n`;\n\nconst Filters = styled('div')`\n  display: grid;\n  grid-template-rows: repeat(auto-fit, minmax(0, max-content));\n  grid-gap: ${space(1)};\n  font-size: ${p => p.theme.fontSizeMedium};\n\n  h3 {\n    color: #000;\n    font-size: ${p => p.theme.fontSizeSmall};\n    text-transform: uppercase;\n    margin: ${space(1)} 0;\n  }\n\n  label {\n    display: grid;\n    grid-template-columns: max-content 1fr max-content;\n    grid-gap: ${space(0.75)};\n    align-items: center;\n    font-weight: normal;\n    white-space: nowrap;\n    height: ${space(2)};\n  }\n\n  input,\n  label {\n    margin: 0;\n  }\n`;\nexport default MembersFilter;\n","import React from 'react';\nimport {PlainRoute} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport UserAvatar from 'app/components/avatar/userAvatar';\nimport Button from 'app/components/button';\nimport Confirm from 'app/components/confirm';\nimport Link from 'app/components/links/link';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport {PanelItem} from 'app/components/panels';\nimport {IconCheckmark, IconClose, IconFlag, IconMail, IconSubtract} from 'app/icons';\nimport {t, tct} from 'app/locale';\nimport space from 'app/styles/space';\nimport {AvatarUser, Member} from 'app/types';\nimport recreateRoute from 'app/utils/recreateRoute';\n\ntype Props = {\n  params: Record<string, string>;\n  routes: PlainRoute[];\n  member: Member;\n  onRemove: (member: Member) => void;\n  onLeave: (member: Member) => void;\n  onSendInvite: (member: Member) => void;\n  orgName: string;\n  memberCanLeave: boolean;\n  requireLink: boolean;\n  canRemoveMembers: boolean;\n  canAddMembers: boolean;\n  currentUser: AvatarUser;\n  status: '' | 'loading' | 'success' | 'error' | null;\n};\n\ntype State = {\n  busy: boolean;\n};\n\nexport default class OrganizationMemberRow extends React.PureComponent<Props, State> {\n  state: State = {\n    busy: false,\n  };\n\n  handleRemove = () => {\n    const {onRemove} = this.props;\n\n    if (typeof onRemove !== 'function') {\n      return;\n    }\n\n    this.setState({busy: true});\n    onRemove(this.props.member);\n  };\n\n  handleLeave = () => {\n    const {onLeave} = this.props;\n\n    if (typeof onLeave !== 'function') {\n      return;\n    }\n\n    this.setState({busy: true});\n    onLeave(this.props.member);\n  };\n\n  handleSendInvite = () => {\n    const {onSendInvite, member} = this.props;\n\n    if (typeof onSendInvite !== 'function') {\n      return;\n    }\n\n    onSendInvite(member);\n  };\n\n  render() {\n    const {\n      params,\n      routes,\n      member,\n      orgName,\n      status,\n      requireLink,\n      memberCanLeave,\n      currentUser,\n      canRemoveMembers,\n      canAddMembers,\n    } = this.props;\n\n    const {id, flags, email, name, roleName, pending, expired, user} = member;\n\n    // if member is not the only owner, they can leave\n    const needsSso = !flags['sso:linked'] && requireLink;\n    const isCurrentUser = currentUser.email === email;\n    const showRemoveButton = !isCurrentUser;\n    const showLeaveButton = isCurrentUser;\n    const canRemoveMember = canRemoveMembers && !isCurrentUser;\n    // member has a `user` property if they are registered with sentry\n    // i.e. has accepted an invite to join org\n    const has2fa = user && user.has2fa;\n    const detailsUrl = recreateRoute(id, {routes, params});\n    const isInviteSuccessful = status === 'success';\n    const isInviting = status === 'loading';\n    const showResendButton = pending || needsSso;\n\n    return (\n      <StyledPanelItem data-test-id={email}>\n        <MemberHeading>\n          <UserAvatar size={32} user={user ?? {id: email, email}} />\n          <MemberDescription to={detailsUrl}>\n            <h5 style={{margin: '0 0 3px'}}>\n              <UserName>{name}</UserName>\n            </h5>\n            <Email>{email}</Email>\n          </MemberDescription>\n        </MemberHeading>\n\n        <div data-test-id=\"member-role\">\n          {pending ? (\n            <InvitedRole>\n              <IconMail size=\"md\" />\n              {expired ? t('Expired Invite') : tct('Invited [roleName]', {roleName})}\n            </InvitedRole>\n          ) : (\n            roleName\n          )}\n        </div>\n\n        <div data-test-id=\"member-status\">\n          {showResendButton ? (\n            <React.Fragment>\n              {isInviting && (\n                <LoadingContainer>\n                  <LoadingIndicator mini />\n                </LoadingContainer>\n              )}\n              {isInviteSuccessful && <span>Sent!</span>}\n              {!isInviting && !isInviteSuccessful && (\n                <Button\n                  disabled={!canAddMembers}\n                  priority=\"primary\"\n                  size=\"small\"\n                  onClick={this.handleSendInvite}\n                >\n                  {pending ? t('Resend invite') : t('Resend SSO link')}\n                </Button>\n              )}\n            </React.Fragment>\n          ) : (\n            <AuthStatus>\n              {has2fa ? (\n                <IconCheckmark isCircled color=\"success\" />\n              ) : (\n                <IconFlag color=\"error\" />\n              )}\n              {has2fa ? t('2FA Enabled') : t('2FA Not Enabled')}\n            </AuthStatus>\n          )}\n        </div>\n\n        {showRemoveButton || showLeaveButton ? (\n          <div>\n            {showRemoveButton && canRemoveMember && (\n              <Confirm\n                message={tct('Are you sure you want to remove [name] from [orgName]?', {\n                  name,\n                  orgName,\n                })}\n                onConfirm={this.handleRemove}\n              >\n                <Button\n                  data-test-id=\"remove\"\n                  icon={<IconSubtract isCircled size=\"xs\" />}\n                  size=\"small\"\n                  busy={this.state.busy}\n                >\n                  {t('Remove')}\n                </Button>\n              </Confirm>\n            )}\n\n            {showRemoveButton && !canRemoveMember && (\n              <Button\n                disabled\n                size=\"small\"\n                title={t('You do not have access to remove members')}\n                icon={<IconSubtract isCircled size=\"xs\" />}\n              >\n                {t('Remove')}\n              </Button>\n            )}\n\n            {showLeaveButton && memberCanLeave && (\n              <Confirm\n                message={tct('Are you sure you want to leave [orgName]?', {\n                  orgName,\n                })}\n                onConfirm={this.handleLeave}\n              >\n                <Button priority=\"danger\" size=\"small\" icon={<IconClose size=\"xs\" />}>\n                  {t('Leave')}\n                </Button>\n              </Confirm>\n            )}\n\n            {showLeaveButton && !memberCanLeave && (\n              <Button\n                size=\"small\"\n                icon={<IconClose size=\"xs\" />}\n                disabled\n                title={t(\n                  'You cannot leave this organization as you are the only organization owner.'\n                )}\n              >\n                {t('Leave')}\n              </Button>\n            )}\n          </div>\n        ) : null}\n      </StyledPanelItem>\n    );\n  }\n}\n\nconst StyledPanelItem = styled(PanelItem)`\n  display: grid;\n  grid-template-columns: minmax(150px, 2fr) minmax(90px, 1fr) minmax(120px, 1fr) 90px;\n  grid-gap: ${space(2)};\n  align-items: center;\n`;\n\nconst Section = styled('div')`\n  display: inline-grid;\n  grid-template-columns: max-content auto;\n  grid-gap: ${space(1)};\n  align-items: center;\n`;\n\nconst MemberHeading = styled(Section)``;\nconst MemberDescription = styled(Link)`\n  overflow: hidden;\n`;\n\nconst UserName = styled('div')`\n  display: block;\n  font-size: ${p => p.theme.fontSizeLarge};\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst Email = styled('div')`\n  color: ${p => p.theme.textColor};\n  font-size: ${p => p.theme.fontSizeMedium};\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst InvitedRole = styled(Section)``;\nconst LoadingContainer = styled('div')`\n  margin-top: 0;\n  margin-bottom: ${space(1.5)};\n`;\n\nconst AuthStatus = styled(Section)``;\n","import React from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport {ClassNames} from '@emotion/core';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';\nimport {resendMemberInvite} from 'app/actionCreators/members';\nimport {redirectToRemainingOrganization} from 'app/actionCreators/organizations';\nimport Button from 'app/components/button';\nimport DropdownMenu from 'app/components/dropdownMenu';\nimport Pagination from 'app/components/pagination';\nimport {Panel, PanelBody, PanelHeader} from 'app/components/panels';\nimport {MEMBER_ROLES} from 'app/constants';\nimport {IconSliders} from 'app/icons';\nimport {t, tct} from 'app/locale';\nimport ConfigStore from 'app/stores/configStore';\nimport space from 'app/styles/space';\nimport {Member, MemberRole, Organization} from 'app/types';\nimport routeTitleGen from 'app/utils/routeTitle';\nimport theme from 'app/utils/theme';\nimport withOrganization from 'app/utils/withOrganization';\nimport AsyncView from 'app/views/asyncView';\nimport EmptyMessage from 'app/views/settings/components/emptyMessage';\n\nimport MembersFilter from './components/membersFilter';\nimport OrganizationMemberRow from './organizationMemberRow';\n\ntype Props = {\n  organization: Organization;\n} & RouteComponentProps<{orgId: string}, {}>;\n\ntype State = AsyncView['state'] & {\n  member: (Member & {roles: MemberRole[]}) | null;\n  members: Member[];\n  invited: {[key: string]: 'loading' | 'success' | null};\n};\n\nclass OrganizationMembersList extends AsyncView<Props, State> {\n  getDefaultState() {\n    return {\n      ...super.getDefaultState(),\n      members: [],\n      invited: {},\n    };\n  }\n\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    const {orgId} = this.props.params;\n\n    return [\n      ['members', `/organizations/${orgId}/members/`, {}, {paginate: true}],\n      [\n        'member',\n        `/organizations/${orgId}/members/me/`,\n        {},\n        {allowError: error => error.status === 404},\n      ],\n      [\n        'authProvider',\n        `/organizations/${orgId}/auth-provider/`,\n        {},\n        {allowError: error => error.status === 403},\n      ],\n    ];\n  }\n\n  getTitle() {\n    const orgId = this.props.organization.slug;\n    return routeTitleGen(t('Members'), orgId, false);\n  }\n\n  removeMember = async (id: string) => {\n    const {orgId} = this.props.params;\n\n    await this.api.requestPromise(`/organizations/${orgId}/members/${id}/`, {\n      method: 'DELETE',\n      data: {},\n    });\n\n    this.setState(state => ({\n      members: state.members.filter(({id: existingId}) => existingId !== id),\n    }));\n  };\n\n  handleRemove = async ({id, name}: Member) => {\n    const {organization} = this.props;\n    const {slug: orgName} = organization;\n\n    try {\n      await this.removeMember(id);\n    } catch {\n      addErrorMessage(tct('Error removing [name] from [orgName]', {name, orgName}));\n      return;\n    }\n\n    addSuccessMessage(tct('Removed [name] from [orgName]', {name, orgName}));\n  };\n\n  handleLeave = async ({id}: Member) => {\n    const {organization} = this.props;\n    const {slug: orgName} = organization;\n\n    try {\n      await this.removeMember(id);\n    } catch {\n      addErrorMessage(tct('Error leaving [orgName]', {orgName}));\n      return;\n    }\n\n    redirectToRemainingOrganization({orgId: orgName, removeOrg: true});\n    addSuccessMessage(tct('You left [orgName]', {orgName}));\n  };\n\n  handleSendInvite = async ({id, expired}) => {\n    this.setState(state => ({\n      invited: {...state.invited, [id]: 'loading'},\n    }));\n\n    try {\n      await resendMemberInvite(this.api, {\n        orgId: this.props.params.orgId,\n        memberId: id,\n        regenerate: expired,\n      });\n    } catch {\n      this.setState(state => ({invited: {...state.invited, [id]: null}}));\n      addErrorMessage(t('Error sending invite'));\n      return;\n    }\n\n    this.setState(state => ({invited: {...state.invited, [id]: 'success'}}));\n  };\n\n  renderBody() {\n    const {params, organization, routes} = this.props;\n    const {membersPageLinks, members, member: currentMember} = this.state;\n    const {name: orgName, access} = organization;\n\n    const canAddMembers = access.includes('member:write');\n    const canRemove = access.includes('member:admin');\n    const currentUser = ConfigStore.get('user');\n\n    // Find out if current user is the only owner\n    const isOnlyOwner = !members.find(\n      ({role, email, pending}) =>\n        role === 'owner' && email !== currentUser.email && !pending\n    );\n\n    // Only admins/owners can remove members\n    const requireLink = !!this.state.authProvider && this.state.authProvider.require_link;\n\n    type RenderSearch = React.ComponentProps<\n      typeof AsyncView.prototype.renderSearchInput\n    >['children'];\n\n    // eslint-disable-next-line react/prop-types\n    const renderSearch: RenderSearch = ({defaultSearchBar, value, handleChange}) => (\n      <SearchWrapper>\n        {defaultSearchBar}\n        <DropdownMenu closeOnEscape>\n          {({getActorProps, isOpen}) => (\n            <FilterWrapper>\n              <Button icon={<IconSliders size=\"xs\" />} {...getActorProps({})}>\n                {t('Search Filters')}\n              </Button>\n              {isOpen && (\n                <StyledMembersFilter\n                  roles={currentMember?.roles ?? MEMBER_ROLES}\n                  query={value}\n                  onChange={(query: string) => handleChange(query)}\n                />\n              )}\n            </FilterWrapper>\n          )}\n        </DropdownMenu>\n      </SearchWrapper>\n    );\n\n    return (\n      <React.Fragment>\n        <ClassNames>\n          {({css}) =>\n            this.renderSearchInput({\n              updateRoute: true,\n              placeholder: t('Search Members'),\n              children: renderSearch,\n              className: css`\n                font-size: ${theme.fontSizeMedium};\n              `,\n            })\n          }\n        </ClassNames>\n        <Panel data-test-id=\"org-member-list\">\n          <PanelHeader>{t('Members')}</PanelHeader>\n\n          <PanelBody>\n            {members.map(member => (\n              <OrganizationMemberRow\n                routes={routes}\n                params={params}\n                key={member.id}\n                member={member}\n                status={this.state.invited[member.id]}\n                orgName={orgName}\n                memberCanLeave={!isOnlyOwner}\n                currentUser={currentUser}\n                canRemoveMembers={canRemove}\n                canAddMembers={canAddMembers}\n                requireLink={requireLink}\n                onSendInvite={this.handleSendInvite}\n                onRemove={this.handleRemove}\n                onLeave={this.handleLeave}\n              />\n            ))}\n            {members.length === 0 && (\n              <EmptyMessage>{t('No members found.')}</EmptyMessage>\n            )}\n          </PanelBody>\n        </Panel>\n\n        <Pagination pageLinks={membersPageLinks} />\n      </React.Fragment>\n    );\n  }\n}\n\nconst SearchWrapper = styled('div')`\n  display: grid;\n  grid-template-columns: 1fr max-content;\n  grid-gap: ${space(1.5)};\n  margin-bottom: ${space(3)};\n  position: relative;\n`;\n\nconst FilterWrapper = styled('div')`\n  position: relative;\n`;\n\nconst StyledMembersFilter = styled(MembersFilter)`\n  position: absolute;\n  right: 0;\n  top: 42px;\n  z-index: ${p => p.theme.zIndex.dropdown};\n\n  &:before,\n  &:after {\n    position: absolute;\n    top: -16px;\n    right: 32px;\n    content: '';\n    height: 16px;\n    width: 16px;\n    border: 8px solid transparent;\n    border-bottom-color: ${p => p.theme.backgroundSecondary};\n  }\n\n  &:before {\n    margin-top: -1px;\n    border-bottom-color: ${p => p.theme.border};\n  }\n`;\nexport default withOrganization(OrganizationMembersList);\n"],"sourceRoot":""}