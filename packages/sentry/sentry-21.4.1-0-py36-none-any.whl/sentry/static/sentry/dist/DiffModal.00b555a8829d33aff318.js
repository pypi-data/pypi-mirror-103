(self.webpackChunk=self.webpackChunk||[]).push([["DiffModal"],{"./app/components/events/interfaces/frame/utils.tsx":(e,t,n)=>{"use strict";n.d(t,{Q6:()=>a,Xf:()=>c,XQ:()=>l,c$:()=>u}),n("../node_modules/react/index.js");var r=n("./app/components/events/interfaces/types.tsx"),o=n("./app/icons/index.tsx"),i=n("./app/locale.tsx"),s=n("../node_modules/@emotion/core/dist/core.browser.esm.js");function a(e){var t=e.split(/^([a-z]:\\|\\\\)/i.test(e)?"\\":"/");return(t[t.length-1]||t[t.length-2]||e).replace(/\.(dylib|so|a|dll|exe)$/,"")}function c(e,t){return e||t}function l(e){var t=e.symbolicatorStatus,n=e.function||"<unknown>",a=(0,s.tZ)(o.BS,{size:"xs",color:"#2c45a8"}),c=(0,s.tZ)(o.FC,{size:"xs",color:"red300"});if(n.match(/^@objc\s/))return[(0,i.t)("Objective-C -> Swift shim frame"),a];if(n.match(/^__?hidden#\d+/))return[(0,i.t)("Hidden function from bitcode build"),c];if(!t&&"<unknown>"===n)return[(0,i.t)("No function name was supplied by the client SDK."),a];if("<unknown>"===n||"<redacted>"===n&&t===r.i.MISSING_SYMBOL)switch(t){case r.i.MISSING_SYMBOL:return[(0,i.t)("The symbol was not found within the debug file."),a];case r.i.UNKNOWN_IMAGE:return[(0,i.t)("No image is specified for the address of the frame."),a];case r.i.MISSING:return[(0,i.t)("The debug file could not be retrieved from any of the sources."),c];case r.i.MALFORMED:return[(0,i.t)("The retrieved debug file could not be processed."),c]}return"<redacted>"===n?[(0,i.t)("Unknown system frame. Usually from beta SDKs"),a]:[null,null]}function u(e){return"csharp"===e}},"./app/components/events/interfaces/rawStacktraceContent.tsx":(e,t,n)=>{"use strict";n.d(t,{ZP:()=>a});var r=n("./app/components/events/interfaces/frame/utils.tsx"),o=n("./app/utils.tsx");function i(e){var t="";return(0,o.ri)(e.filename)?t+='  File "'+e.filename+'"':(0,o.ri)(e.module)?t+='  Module "'+e.module+'"':t+="  ?",(0,o.ri)(e.lineNo)&&e.lineNo>=0&&(t+=", line "+e.lineNo),(0,o.ri)(e.colNo)&&e.colNo>=0&&(t+=", col "+e.colNo),(0,o.ri)(e.function)&&(t+=", in "+e.function),(0,o.ri)(e.context)&&e.context.forEach((function(n){n[0]===e.lineNo&&(t+="\n    "+(0,o.fy)(n[1]))})),t}function s(e,t){return e+Array(Math.max(0,t-e.length)+1).join(" ")}function a(e,t,n){var a,c=[];return(null!==(a=null==e?void 0:e.frames)&&void 0!==a?a:[]).forEach((function(e,n){c.push(function(e,t,n){switch(e.platform&&(n=e.platform),n){case"javascript":return function(e){var t="";return(0,o.ri)(e.function)?t+="  at "+e.function+"(":t+="  at ? (",(0,o.ri)(e.filename)?t+=e.filename:(0,o.ri)(e.module)&&(t+=e.module),(0,o.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),(0,o.ri)(e.colNo)&&e.colNo>=0&&(t+=":"+e.colNo),t+")"}(e);case"ruby":return function(e){var t="  from ";return(0,o.ri)(e.filename)?t+=e.filename:(0,o.ri)(e.module)?t+="("+e.module+")":t+="?",(0,o.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),(0,o.ri)(e.colNo)&&e.colNo>=0&&(t+=":"+e.colNo),(0,o.ri)(e.function)&&(t+=":in `"+e.function+"'"),t}(e);case"php":return function(e,t){var n="null"===e.function?"{main}":e.function;return"#".concat(t," ").concat(e.filename||e.module,"(").concat(e.lineNo,"): ").concat(n)}(e,t);case"python":return i(e);case"java":return function(e){var t="    at";return(0,o.ri)(e.module)&&(t+=" "+e.module+"."),(0,o.ri)(e.function)&&(t+=e.function),(0,o.ri)(e.filename)&&(t+="("+e.filename,(0,o.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),t+=")"),t}(e);case"objc":case"cocoa":case"native":return function(e){var t="  ";return(0,o.ri)(e.package)&&(t+=s((0,r.Q6)(e.package),20)),(0,o.ri)(e.instructionAddr)&&(t+=s(e.instructionAddr,12)),t+=" "+(e.function||e.symbolAddr),(0,o.ri)(e.filename)&&(t+=" ("+e.filename,(0,o.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),t+=")"),t}(e);default:return i(e)}}(e,n,t))})),"python"!==t&&c.reverse(),n&&c.unshift(function(e,t){switch(t){case"java":return function(e){var t="".concat(e.type,": ").concat(e.value);return e.module&&(t="".concat(e.module,".").concat(t)),t}(e);default:return e.type+": "+e.value}}(n,t)),c.join("\n")}},"./app/components/events/interfaces/types.tsx":(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>r}),function(e){e.SYMBOLICATED="symbolicated",e.MISSING_SYMBOL="missing_symbol",e.UNKNOWN_IMAGE="unknown_image",e.MISSING="missing",e.MALFORMED="malformed"}(r||(r={}))},"./app/components/modals/diffModal.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>G,modalCss:()=>T});var r=n("../node_modules/@babel/runtime/helpers/esm/extends.js"),o=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=n("../node_modules/react/index.js"),s=n("../node_modules/@emotion/core/dist/core.browser.esm.js"),a=n("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),c=n("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),l=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),u=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),f=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),d=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),p=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),m=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),h=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),v=n("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),b=n("../node_modules/@babel/runtime/regenerator/index.js"),y=n.n(b),g=n("../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js"),j=n("./app/actionCreators/indicator.tsx"),x=n("./app/components/button.tsx"),Z=n("./app/components/buttonBar.tsx"),N=n("./app/components/loadingIndicator.tsx"),w=n("./app/locale.tsx"),k=n("./app/styles/space.tsx"),D=n("./app/utils/getStacktraceBody.tsx"),S=n("./app/utils/withApi.tsx");function _(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=[(0,w.t)("Type: %s",e.type)];e.hash&&t.push((0,w.t)("Hash: %s",e.hash)),e.description&&t.push((0,w.t)("Description: %s",e.description));var n=[t.join("\n")];return e.component&&n.push(P(e.component).join("\n")),n}function P(e){if(!e.contributes)return[];var t=e.name,n=e.id,r=e.hint,o=t||n,i=o&&r?"".concat(o," (").concat(r,")"):o,s=i?[i]:[];if(e.values){var a,c=_(e.values);try{for(c.s();!(a=c.n()).done;){var l=a.value;if("string"!=typeof l){var u,f=_(P(l));try{for(f.s();!(u=f.n()).done;){var d=u.value;s.push("  ".concat(d))}}catch(e){f.e(e)}finally{f.f()}}else s.push("  ".concat(l))}}catch(e){c.e(e)}finally{c.f()}}return s}const M=function(e){return Object.values(e).map(O).flat()};var C=function(e){(0,d.Z)(i,e);var t,r,o=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,m.Z)(t);if(r){var o=(0,m.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,p.Z)(this,e)});function i(){var e;(0,l.Z)(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=o.call.apply(o,[this].concat(n)),(0,h.Z)((0,f.Z)(e),"state",{loading:!0,groupingDiff:!1,baseEvent:[],targetEvent:[],SplitDiffAsync:void 0}),(0,h.Z)((0,f.Z)(e),"toggleDiffMode",(function(){e.setState((function(e){return{groupingDiff:!e.groupingDiff,loading:!0}}),e.fetchData)})),(0,h.Z)((0,f.Z)(e),"fetchEventData",function(){var t=(0,c.Z)(y().mark((function t(n,r){var o,i,s,a,c,l,u,f,d;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props,i=o.orgId,s=o.project,a=o.api,c=e.state.groupingDiff,l=r,"latest"!==r){t.next=8;break}return t.next=6,a.requestPromise("/issues/".concat(n,"/events/latest/"));case 6:u=t.sent,l=u.eventID;case 8:if(!c){t.next=13;break}return t.next=11,a.requestPromise("/projects/".concat(i,"/").concat(s.slug,"/events/").concat(l,"/grouping-info/"));case 11:return f=t.sent,t.abrupt("return",M(f));case 13:return t.next=15,a.requestPromise("/projects/".concat(i,"/").concat(s.slug,"/events/").concat(l,"/"));case 15:return d=t.sent,t.abrupt("return",(0,D.Z)(d));case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),e}return(0,u.Z)(i,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this,t=this.props,r=t.baseIssueId,o=t.targetIssueId,i=t.baseEventId,s=t.targetEventId;Promise.all([n.e("splitDiff").then(n.bind(n,"./app/components/splitDiff.tsx")),this.fetchEventData(r,null!=i?i:"latest"),this.fetchEventData(o,null!=s?s:"latest")]).then((function(t){var n=(0,a.Z)(t,3),r=n[0].default,o=n[1],i=n[2];e.setState({SplitDiffAsync:r,baseEvent:o,targetEvent:i,loading:!1})})).catch((function(){(0,j.Iw)((0,w.t)("Error loading events"))}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.project,r=this.state,o=r.SplitDiffAsync,i=r.loading,a=r.groupingDiff,c=r.baseEvent,l=r.targetEvent,u=n.features.includes("similarity-view-v2");return(0,s.tZ)(A,{className:t,loading:i},i&&(0,s.tZ)(N.Z,null),!i&&u&&(0,s.tZ)(B,null,(0,s.tZ)(Z.Z,{merged:!0,active:a?"grouping":"event"},(0,s.tZ)(x.ZP,{barId:"event",size:"small",onClick:this.toggleDiffMode},(0,w.t)("Diff stack trace and message")),(0,s.tZ)(x.ZP,{barId:"grouping",size:"small",onClick:this.toggleDiffMode},(0,w.t)("Diff grouping information")))),!i&&o&&c.map((function(e,t){var n;return(0,s.tZ)(o,{key:t,base:e,target:null!==(n=l[t])&&void 0!==n?n:"",type:"words"})})))}}]),i}(i.Component);C.displayName="IssueDiff",(0,h.Z)(C,"defaultProps",{baseEventId:"latest",targetEventId:"latest"});const E=(0,S.Z)(C);var A=(0,v.Z)("div",{shouldForwardProp:function(e){return"string"==typeof e&&(0,g.Z)(e)&&"loading"!==e},target:"ectlbkf0",label:"StyledIssueDiff"})("background-color:",(function(e){return e.theme.backgroundSecondary}),";overflow:auto;padding:",(0,k.Z)(1),";flex:1;display:flex;flex-direction:column;",(function(e){return e.loading&&"\n        background-color: ".concat(e.theme.background,";\n        justify-content: center;\n      ")}),";"),B=(0,v.Z)("div",{target:"ectlbkf1",label:"HeaderWrapper"})("display:flex;align-items:center;margin-bottom:",(0,k.Z)(2),";"),R=function(e){var t=e.className,n=e.Body,i=(0,o.Z)(e,["className","Body"]);return(0,s.tZ)(n,null,(0,s.tZ)(E,(0,r.Z)({className:t},i)))};R.displayName="DiffModal";var T={name:"1vh8okv-modalCss",styles:".modal-dialog{display:flex;margin:0;left:10px;right:10px;top:10px;bottom:10px;width:auto;}.modal-content{display:flex;flex:1;}.modal-body{display:flex;overflow:hidden;flex:1;};label:modalCss;"};const G=R},"./app/utils/getStacktraceBody.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("./app/components/events/interfaces/rawStacktraceContent.tsx");function o(e){if(!e||!e.entries)return[];var t=e.entries.find((function(e){return"exception"===e.type}));if(!t){var n,o=e.entries.find((function(e){return"message"===e.type}));return o?(null==o||null===(n=o.data)||void 0===n?void 0:n.formatted)&&[o.data.formatted]:[]}return t.data?t.data.values.filter((function(e){return!!e.stacktrace})).map((function(t){return(0,r.ZP)(t.stacktrace,e.platform,t)})).reduce((function(e,t){return e.concat(t)}),[]):[]}},"./app/utils/withApi.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=n("../node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),f=n("../node_modules/react/index.js"),d=n("./app/api.tsx"),p=n("./app/utils/getDisplayName.tsx"),m=n("../node_modules/@emotion/core/dist/core.browser.esm.js");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var o=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}const y=function(e){var t,n,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=c.persistInFlight;return n=t=function(t){(0,a.Z)(c,t);var n=b(c);function c(e){var t;return(0,o.Z)(this,c),t=n.call(this,e),(0,u.Z)((0,s.Z)(t),"api",void 0),t.api=new d.KU,t}return(0,i.Z)(c,[{key:"componentWillUnmount",value:function(){l||this.api.clear()}},{key:"render",value:function(){var t=this.props,n=t.api,o=(0,r.Z)(t,["api"]);return(0,m.tZ)(e,v({api:null!=n?n:this.api},o))}}]),c}(f.Component),(0,u.Z)(t,"displayName","withApi(".concat((0,p.Z)(e),")")),n}}}]);
//# sourceMappingURL=DiffModal.js.map