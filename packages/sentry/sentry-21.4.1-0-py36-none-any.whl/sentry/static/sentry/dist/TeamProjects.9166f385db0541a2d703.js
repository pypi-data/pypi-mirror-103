(self.webpackChunk=self.webpackChunk||[]).push([["TeamProjects"],{"./app/views/settings/components/settingsProjectItem.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>k});var n=s("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=s("../node_modules/@babel/runtime/helpers/esm/createClass.js"),r=s("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=s("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=s("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=s("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=s("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),u=s("../node_modules/react/index.js"),d=s("./app/components/links/link.tsx"),m=s("../node_modules/@babel/runtime/helpers/esm/extends.js"),h=s("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),f=s("../node_modules/@emotion/core/dist/core.browser.esm.js");var Z=function(e){(0,a.Z)(l,e);var t,s,r=(t=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(s){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function l(){return(0,n.Z)(this,l),r.apply(this,arguments)}return(0,o.Z)(l,[{key:"render",value:function(){var e=this.props,t=e.project,s=(0,h.Z)(e,["project"]);return(0,f.tZ)("span",(0,m.Z)({className:"project-label"},s),(0,f.tZ)("span",{className:"project-name"},t.slug))}}]),l}(u.PureComponent);Z.displayName="ProjectLabel";var j=s("./app/components/projects/bookmarkStar.tsx"),g=s("./app/styles/space.tsx");var y=function(e){(0,a.Z)(u,e);var t,s,p=(t=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(s){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function u(){var e;(0,n.Z)(this,u);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return e=p.call.apply(p,[this].concat(s)),(0,l.Z)((0,r.Z)(e),"state",{isBookmarked:e.props.project.isBookmarked}),(0,l.Z)((0,r.Z)(e),"handleToggleBookmark",(function(t){e.setState({isBookmarked:t})})),e}return(0,o.Z)(u,[{key:"render",value:function(){var e=this.props,t=e.project,s=e.organization;return(0,f.tZ)(v,null,(0,f.tZ)(b,{organization:s,project:t,isBookmarked:this.state.isBookmarked,onToggle:this.handleToggleBookmark}),(0,f.tZ)(d.Z,{to:"/settings/".concat(s.slug,"/projects/").concat(t.slug,"/")},(0,f.tZ)(Z,{project:t})))}}]),u}(u.Component);y.displayName="ProjectItem";var v=(0,p.Z)("div",{target:"e3cl2ic0",label:"Wrapper"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),b=(0,p.Z)(j.Z,{target:"e3cl2ic1",label:"BookmarkLink"})("margin-right:",(0,g.Z)(1),";margin-top:-",(0,g.Z)(.25),";");const k=y},"./app/views/settings/organizationTeams/teamProjects.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{TeamProjects:()=>B,default:()=>q});var n=s("../node_modules/@babel/runtime/helpers/esm/extends.js"),o=s("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),r=s("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=s("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=s("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=s("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=s("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),p=s("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=s("../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),m=s("../node_modules/react/index.js"),h=s("./app/actionCreators/indicator.tsx"),f=s("./app/actions/projectActions.tsx"),Z=s("./app/components/button.tsx"),j=s("./app/components/dropdownAutoComplete/index.tsx"),g=s("./app/components/dropdownButton.tsx"),y=s("./app/components/loadingError.tsx"),v=s("./app/components/loadingIndicator.tsx"),b=s("./app/components/pagination.tsx"),k=s("./app/components/panels/index.tsx"),P=s("./app/components/tooltip.tsx"),x=s("./app/icons/index.tsx"),_=s("./app/locale.tsx"),w=s("./app/styles/space.tsx"),C=s("./app/utils.tsx"),R=s("./app/utils/withApi.tsx"),I=s("./app/utils/withOrganization.tsx"),z=s("./app/views/settings/components/emptyMessage.tsx"),S=s("./app/views/settings/components/settingsProjectItem.tsx"),T=s("../node_modules/@emotion/core/dist/core.browser.esm.js");var B=function(e){(0,c.Z)(w,e);var t,s,d=(t=w,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(t);if(s){var o=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,l.Z)(this,e)});function w(){var e;(0,r.Z)(this,w);for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e=d.call.apply(d,[this].concat(s)),(0,u.Z)((0,i.Z)(e),"state",{error:!1,loading:!0,pageLinks:null,unlinkedProjects:[],linkedProjects:[]}),(0,u.Z)((0,i.Z)(e),"fetchAll",(function(){e.fetchTeamProjects(),e.fetchUnlinkedProjects()})),(0,u.Z)((0,i.Z)(e),"handleLinkProject",(function(t,s){var n=e.props.params,o=n.orgId,r=n.teamId;e.props.api.request("/projects/".concat(o,"/").concat(t.slug,"/teams/").concat(r,"/"),{method:"add"===s?"POST":"DELETE",success:function(t){e.fetchAll(),f.Z.updateSuccess(t),(0,h.S9)("add"===s?(0,_.t)("Successfully added project to team."):(0,_.t)("Successfully removed project from team"))},error:function(){(0,h.Iw)((0,_.t)("Wasn't able to change project association."))}})})),(0,u.Z)((0,i.Z)(e),"handleProjectSelected",(function(t){var s=e.state.unlinkedProjects.find((function(e){return e.id===t.value}));s&&e.handleLinkProject(s,"add")})),(0,u.Z)((0,i.Z)(e),"handleQueryUpdate",(function(t){e.fetchUnlinkedProjects(t.target.value)})),e}return(0,a.Z)(w,[{key:"componentDidMount",value:function(){this.fetchAll()}},{key:"componentDidUpdate",value:function(e){e.params.orgId===this.props.params.orgId&&e.params.teamId===this.props.params.teamId||this.fetchAll(),e.location!==this.props.location&&this.fetchTeamProjects()}},{key:"fetchTeamProjects",value:function(){var e=this,t=this.props,s=t.location,n=t.params,r=n.orgId,a=n.teamId;this.setState({loading:!0}),this.props.api.requestPromise("/organizations/".concat(r,"/projects/"),{query:{query:"team:".concat(a),cursor:s.query.cursor||""},includeAllArgs:!0}).then((function(t){var s,n=(0,o.Z)(t,3),r=n[0],a=(n[1],n[2]);e.setState({loading:!1,error:!1,linkedProjects:r,pageLinks:null!==(s=null==a?void 0:a.getResponseHeader("Link"))&&void 0!==s?s:null})})).catch((function(){e.setState({loading:!1,error:!0})}))}},{key:"fetchUnlinkedProjects",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=this.props.params,n=s.orgId,o=s.teamId;this.props.api.requestPromise("/organizations/".concat(n,"/projects/"),{query:{query:t?"!team:".concat(o," ").concat(t):"!team:".concat(o)}}).then((function(t){e.setState({unlinkedProjects:t})}))}},{key:"projectPanelContents",value:function(e){var t=this,s=this.props.organization,n=new Set(s.access).has("org:write");return e.length?(0,C.Mx)(e).map((function(e){return(0,T.tZ)(A,{key:e.id},(0,T.tZ)(S.Z,{project:e,organization:s}),(0,T.tZ)(P.Z,{disabled:n,title:(0,_.t)("You do not have enough permission to change project association.")},(0,T.tZ)(Z.ZP,{size:"small",disabled:!n,icon:(0,T.tZ)(x.JZ,{isCircled:!0,size:"xs"}),onClick:function(){t.handleLinkProject(e,"remove")}},(0,_.t)("Remove"))))})):(0,T.tZ)(z.Z,{size:"large",icon:(0,T.tZ)(x.Gy,{size:"xl"})},(0,_.t)("This team doesn't have access to any projects."))}},{key:"render",value:function(){var e=this,t=this.state,s=t.linkedProjects,o=t.unlinkedProjects,r=t.error,a=t.loading;if(r)return(0,T.tZ)(y.Z,{onRetry:function(){return e.fetchAll()}});if(a)return(0,T.tZ)(v.Z,null);var i=new Set(this.props.organization.access),c=o.map((function(e){return{value:e.id,searchKey:e.slug,label:(0,T.tZ)(L,null,e.slug)}}));return(0,T.tZ)(m.Fragment,null,(0,T.tZ)(k.s_,null,(0,T.tZ)(k.V9,{hasButtons:!0},(0,T.tZ)("div",null,(0,_.t)("Projects")),(0,T.tZ)("div",{style:{textTransform:"none"}},i.has("org:write")?(0,T.tZ)(j.Z,{items:c,onChange:this.handleQueryUpdate,onSelect:this.handleProjectSelected,emptyMessage:(0,_.t)("No projects"),alignMenu:"right"},(function(e){var t=e.isOpen;return(0,T.tZ)(g.Z,{isOpen:t,size:"xsmall"},(0,_.t)("Add Project"))})):(0,T.tZ)(g.Z,{disabled:!0,title:(0,_.t)("You do not have enough permission to associate a project."),size:"xsmall"},(0,_.t)("Add Project")))),(0,T.tZ)(k.N,null,this.projectPanelContents(s))),(0,T.tZ)(b.Z,(0,n.Z)({pageLinks:this.state.pageLinks},this.props)))}}]),w}(m.Component);B.displayName="TeamProjects";var A=(0,d.Z)(k.Lv,{target:"eofet40",label:"StyledPanelItem"})("display:flex;align-items:center;justify-content:space-between;padding:",(0,w.Z)(2),";"),L=(0,d.Z)("div",{target:"eofet41",label:"ProjectListElement"})("padding:",(0,w.Z)(.25)," 0;");const q=(0,R.Z)((0,I.Z)(B))}}]);
//# sourceMappingURL=TeamProjects.js.map